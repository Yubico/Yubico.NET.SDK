2025-10-22T21:57:42.0563960Z Current runner version: '2.329.0'
2025-10-22T21:57:42.0577040Z ##[group]Runner Image Provisioner
2025-10-22T21:57:42.0577500Z Hosted Compute Agent
2025-10-22T21:57:42.0577810Z Version: 20251016.436
2025-10-22T21:57:42.0578180Z Commit: 8ab8ac8bfd662a3739dab9fe09456aba92132568
2025-10-22T21:57:42.0578600Z Build Date: 2025-10-15T20:44:12Z
2025-10-22T21:57:42.0578950Z ##[endgroup]
2025-10-22T21:57:42.0579270Z ##[group]Operating System
2025-10-22T21:57:42.0579600Z macOS
2025-10-22T21:57:42.0579890Z 15.6.1
2025-10-22T21:57:42.0580160Z 24G90
2025-10-22T21:57:42.0580430Z ##[endgroup]
2025-10-22T21:57:42.0580710Z ##[group]Runner Image
2025-10-22T21:57:42.0581020Z Image: macos-15-arm64
2025-10-22T21:57:42.0581330Z Version: 20251015.0042
2025-10-22T21:57:42.0581980Z Included Software: https://github.com/actions/runner-images/blob/macos-15-arm64/20251015.0042/images/macos/macos-15-arm64-Readme.md
2025-10-22T21:57:42.0582970Z Image Release: https://github.com/actions/runner-images/releases/tag/macos-15-arm64%2F20251015.0042
2025-10-22T21:57:42.0583570Z ##[endgroup]
2025-10-22T21:57:42.0584210Z ##[group]GITHUB_TOKEN Permissions
2025-10-22T21:57:42.0585080Z Contents: read
2025-10-22T21:57:42.0585370Z Metadata: read
2025-10-22T21:57:42.0585660Z Packages: read
2025-10-22T21:57:42.0585950Z ##[endgroup]
2025-10-22T21:57:42.0587190Z Secret source: Actions
2025-10-22T21:57:42.0587580Z Prepare workflow directory
2025-10-22T21:57:42.0787080Z Prepare all required actions
2025-10-22T21:57:42.0813250Z Getting action download info
2025-10-22T21:57:42.4385190Z Download action repository 'actions/checkout@v4' (SHA:08eba0b27e820071cde6df949e0beb9ba4906955)
2025-10-22T21:57:42.6807520Z Download action repository 'actions/setup-dotnet@v4' (SHA:67a3573c9a986a3f9c594539f4ab511d57bb3ce9)
2025-10-22T21:57:43.8024130Z Download action repository 'actions/upload-artifact@v4' (SHA:ea165f8d65b6e75b540449e92b4886f43607fa02)
2025-10-22T21:57:43.9592560Z Complete job name: Test 11 - Dispose_StopsIOKitCallbacks
2025-10-22T21:57:43.9982450Z ##[group]Run actions/checkout@v4
2025-10-22T21:57:43.9983020Z with:
2025-10-22T21:57:43.9983340Z   repository: Yubico/Yubico.NET.SDK
2025-10-22T21:57:43.9983910Z   token: ***
2025-10-22T21:57:43.9984200Z   ssh-strict: true
2025-10-22T21:57:43.9984510Z   ssh-user: git
2025-10-22T21:57:43.9984820Z   persist-credentials: true
2025-10-22T21:57:43.9985160Z   clean: true
2025-10-22T21:57:43.9985470Z   sparse-checkout-cone-mode: true
2025-10-22T21:57:43.9985840Z   fetch-depth: 1
2025-10-22T21:57:43.9986140Z   fetch-tags: false
2025-10-22T21:57:43.9986450Z   show-progress: true
2025-10-22T21:57:43.9986770Z   lfs: false
2025-10-22T21:57:43.9987080Z   submodules: false
2025-10-22T21:57:43.9987430Z   set-safe-directory: true
2025-10-22T21:57:43.9987930Z ##[endgroup]
2025-10-22T21:57:44.2991470Z Syncing repository: Yubico/Yubico.NET.SDK
2025-10-22T21:57:44.2993840Z ##[group]Getting Git version info
2025-10-22T21:57:44.2994550Z Working directory is '/Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK'
2025-10-22T21:57:44.2995470Z [command]/opt/homebrew/bin/git version
2025-10-22T21:57:44.3878260Z git version 2.50.1
2025-10-22T21:57:44.3904750Z ##[endgroup]
2025-10-22T21:57:44.3910220Z Copying '/Users/runner/.gitconfig' to '/Users/runner/work/_temp/b0f8453c-65b6-4056-9e60-660384d99c3d/.gitconfig'
2025-10-22T21:57:44.3916950Z Temporarily overriding HOME='/Users/runner/work/_temp/b0f8453c-65b6-4056-9e60-660384d99c3d' before making global git config changes
2025-10-22T21:57:44.3917990Z Adding repository directory to the temporary git global config as a safe directory
2025-10-22T21:57:44.3920420Z [command]/opt/homebrew/bin/git config --global --add safe.directory /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK
2025-10-22T21:57:44.4006120Z Deleting the contents of '/Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK'
2025-10-22T21:57:44.4009030Z ##[group]Initializing the repository
2025-10-22T21:57:44.4013470Z [command]/opt/homebrew/bin/git init /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK
2025-10-22T21:57:44.4185330Z hint: Using 'master' as the name for the initial branch. This default branch name
2025-10-22T21:57:44.4187350Z hint: is subject to change. To configure the initial branch name to use in all
2025-10-22T21:57:44.4188090Z hint: of your new repositories, which will suppress this warning, call:
2025-10-22T21:57:44.4188610Z hint:
2025-10-22T21:57:44.4189020Z hint: 	git config --global init.defaultBranch <name>
2025-10-22T21:57:44.4189460Z hint:
2025-10-22T21:57:44.4189930Z hint: Names commonly chosen instead of 'master' are 'main', 'trunk' and
2025-10-22T21:57:44.4190610Z hint: 'development'. The just-created branch can be renamed via this command:
2025-10-22T21:57:44.4191160Z hint:
2025-10-22T21:57:44.4191470Z hint: 	git branch -m <name>
2025-10-22T21:57:44.4191900Z hint:
2025-10-22T21:57:44.4192390Z hint: Disable this message with "git config set advice.defaultBranchName false"
2025-10-22T21:57:44.4193170Z Initialized empty Git repository in /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/.git/
2025-10-22T21:57:44.4194670Z [command]/opt/homebrew/bin/git remote add origin https://github.com/Yubico/Yubico.NET.SDK
2025-10-22T21:57:44.4620520Z ##[endgroup]
2025-10-22T21:57:44.4722420Z ##[group]Disabling automatic garbage collection
2025-10-22T21:57:44.4809600Z [command]/opt/homebrew/bin/git config --local gc.auto 0
2025-10-22T21:57:44.4813150Z ##[endgroup]
2025-10-22T21:57:44.4813780Z ##[group]Setting up auth
2025-10-22T21:57:44.4815730Z [command]/opt/homebrew/bin/git config --local --name-only --get-regexp core\.sshCommand
2025-10-22T21:57:44.4817960Z [command]/opt/homebrew/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'core\.sshCommand' && git config --local --unset-all 'core.sshCommand' || :"
2025-10-22T21:57:44.5527370Z [command]/opt/homebrew/bin/git config --local --name-only --get-regexp http\.https\:\/\/github\.com\/\.extraheader
2025-10-22T21:57:44.5579980Z [command]/opt/homebrew/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'http\.https\:\/\/github\.com\/\.extraheader' && git config --local --unset-all 'http.https://github.com/.extraheader' || :"
2025-10-22T21:57:44.6225370Z [command]/opt/homebrew/bin/git config --local http.https://github.com/.extraheader AUTHORIZATION: basic ***
2025-10-22T21:57:44.6287530Z ##[endgroup]
2025-10-22T21:57:44.6288230Z ##[group]Fetching the repository
2025-10-22T21:57:44.6292590Z [command]/opt/homebrew/bin/git -c protocol.version=2 fetch --no-tags --prune --no-recurse-submodules --depth=1 origin +aabfee568d26bca8fd9e83fafbe1a8934840ca60:refs/remotes/origin/experiment/isolate-disposal-hang
2025-10-22T21:57:45.9523170Z From https://github.com/Yubico/Yubico.NET.SDK
2025-10-22T21:57:45.9524610Z  * [new ref]         aabfee568d26bca8fd9e83fafbe1a8934840ca60 -> origin/experiment/isolate-disposal-hang
2025-10-22T21:57:45.9589320Z ##[endgroup]
2025-10-22T21:57:45.9590090Z ##[group]Determining the checkout info
2025-10-22T21:57:45.9590980Z ##[endgroup]
2025-10-22T21:57:45.9593370Z [command]/opt/homebrew/bin/git sparse-checkout disable
2025-10-22T21:57:45.9659910Z [command]/opt/homebrew/bin/git config --local --unset-all extensions.worktreeConfig
2025-10-22T21:57:45.9717900Z ##[group]Checking out the ref
2025-10-22T21:57:45.9720610Z [command]/opt/homebrew/bin/git checkout --progress --force -B experiment/isolate-disposal-hang refs/remotes/origin/experiment/isolate-disposal-hang
2025-10-22T21:57:46.1750220Z Switched to a new branch 'experiment/isolate-disposal-hang'
2025-10-22T21:57:46.1775860Z branch 'experiment/isolate-disposal-hang' set up to track 'origin/experiment/isolate-disposal-hang'.
2025-10-22T21:57:46.1780560Z ##[endgroup]
2025-10-22T21:57:46.1825140Z [command]/opt/homebrew/bin/git log -1 --format=%H
2025-10-22T21:57:46.1884140Z aabfee568d26bca8fd9e83fafbe1a8934840ca60
2025-10-22T21:57:46.2101990Z ##[group]Run actions/setup-dotnet@v4
2025-10-22T21:57:46.2102740Z with:
2025-10-22T21:57:46.2103260Z   global-json-file: ./global.json
2025-10-22T21:57:46.2103950Z   cache: false
2025-10-22T21:57:46.2104460Z ##[endgroup]
2025-10-22T21:57:46.3700410Z [command]/Users/runner/work/_actions/actions/setup-dotnet/v4/externals/install-dotnet.sh --skip-non-versioned-files --runtime dotnet --channel LTS
2025-10-22T21:57:47.1545940Z dotnet-install: .NET Core Runtime with version '8.0.21' is already installed.
2025-10-22T21:57:47.1563910Z [command]/Users/runner/work/_actions/actions/setup-dotnet/v4/externals/install-dotnet.sh --skip-non-versioned-files --channel 9.0
2025-10-22T21:57:47.9701580Z dotnet-install: .NET Core SDK with version '9.0.306' is already installed.
2025-10-22T21:57:47.9791630Z ##[group]Run dotnet nuget add source --username DennisDyallo --password *** --store-password-in-clear-text --name github "https://nuget.pkg.github.com/Yubico/index.json"
2025-10-22T21:57:47.9792720Z [36;1mdotnet nuget add source --username DennisDyallo --password *** --store-password-in-clear-text --name github "https://nuget.pkg.github.com/Yubico/index.json"[0m
2025-10-22T21:57:47.9833130Z shell: /bin/bash -e {0}
2025-10-22T21:57:47.9833340Z env:
2025-10-22T21:57:47.9833530Z   DOTNET_ROOT: /Users/runner/.dotnet
2025-10-22T21:57:47.9833800Z ##[endgroup]
2025-10-22T21:57:48.4481870Z 
2025-10-22T21:57:48.4509440Z Welcome to .NET 9.0!
2025-10-22T21:57:48.4509760Z ---------------------
2025-10-22T21:57:48.4509950Z SDK Version: 9.0.306
2025-10-22T21:57:48.4510040Z 
2025-10-22T21:57:48.4510120Z Telemetry
2025-10-22T21:57:48.4510240Z ---------
2025-10-22T21:57:48.4511200Z The .NET tools collect usage data in order to help us improve your experience. It is collected by Microsoft and shared with the community. You can opt-out of telemetry by setting the DOTNET_CLI_TELEMETRY_OPTOUT environment variable to '1' or 'true' using your favorite shell.
2025-10-22T21:57:48.4511910Z 
2025-10-22T21:57:48.4512140Z Read more about .NET CLI Tools telemetry: https://aka.ms/dotnet-cli-telemetry
2025-10-22T21:57:48.9380380Z 
2025-10-22T21:57:48.9380620Z ----------------
2025-10-22T21:57:48.9381050Z Installed an ASP.NET Core HTTPS development certificate.
2025-10-22T21:57:48.9381440Z To trust the certificate, run 'dotnet dev-certs https --trust'
2025-10-22T21:57:48.9381890Z Learn about HTTPS: https://aka.ms/dotnet-https
2025-10-22T21:57:48.9382070Z 
2025-10-22T21:57:48.9382130Z ----------------
2025-10-22T21:57:48.9382360Z Write your first app: https://aka.ms/dotnet-hello-world
2025-10-22T21:57:48.9382760Z Find out what's new: https://aka.ms/dotnet-whats-new
2025-10-22T21:57:48.9383080Z Explore documentation: https://aka.ms/dotnet-docs
2025-10-22T21:57:48.9383480Z Report issues and find source on GitHub: https://github.com/dotnet/core
2025-10-22T21:57:48.9383920Z Use 'dotnet --help' to see available commands or visit: https://aka.ms/dotnet-cli
2025-10-22T21:57:48.9384320Z --------------------------------------------------------------------------------------
2025-10-22T21:57:49.1457060Z Package source with Name: github added successfully.
2025-10-22T21:57:49.2382040Z ##[group]Run brew install openssl
2025-10-22T21:57:49.2382390Z [36;1mbrew install openssl[0m
2025-10-22T21:57:49.2382580Z [36;1msudo mkdir -p /usr/local/lib[0m
2025-10-22T21:57:49.2383000Z [36;1msudo ln -s $(brew --prefix)/opt/openssl@3/lib/libcrypto.3.dylib /usr/local/lib/libcrypto.3.dylib[0m
2025-10-22T21:57:49.2383500Z [36;1msudo ln -s $(brew --prefix)/opt/openssl@3/lib/libssl.3.dylib /usr/local/lib/libssl.3.dylib[0m
2025-10-22T21:57:49.2414810Z shell: /bin/bash -e {0}
2025-10-22T21:57:49.2414980Z env:
2025-10-22T21:57:49.2415280Z   DOTNET_ROOT: /Users/runner/.dotnet
2025-10-22T21:57:49.2415510Z ##[endgroup]
2025-10-22T21:57:52.4804750Z ##[warning]openssl@3 3.6.0 is already installed and up-to-date.
To reinstall 3.6.0, run:
  brew reinstall openssl@3

2025-10-22T21:57:52.6579730Z ##[group]Run dotnet test Yubico.Core/tests/Yubico.Core.UnitTests.csproj --filter "FullyQualifiedName~MacOSHidDeviceListenerDisposalTests.Dispose_StopsIOKitCallbacks" --logger "console;verbosity=detailed"
2025-10-22T21:57:52.6581000Z [36;1mdotnet test Yubico.Core/tests/Yubico.Core.UnitTests.csproj --filter "FullyQualifiedName~MacOSHidDeviceListenerDisposalTests.Dispose_StopsIOKitCallbacks" --logger "console;verbosity=detailed"[0m
2025-10-22T21:57:52.6612810Z shell: /bin/bash -e {0}
2025-10-22T21:57:52.6612970Z env:
2025-10-22T21:57:52.6613150Z   DOTNET_ROOT: /Users/runner/.dotnet
2025-10-22T21:57:52.6613370Z   Logging__LogLevel__Default: Information
2025-10-22T21:57:52.6613620Z   Logging__LogLevel__Yubico: Information
2025-10-22T21:57:52.6613830Z ##[endgroup]
2025-10-22T21:57:53.2320060Z   Determining projects to restore...
2025-10-22T21:57:57.2837510Z   Restored /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/Yubico.Core/tests/Yubico.Core.UnitTests.csproj (in 3.07 sec).
2025-10-22T21:57:57.7623410Z   Restored /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/Yubico.Core/src/Yubico.Core.csproj (in 3.57 sec).
2025-10-22T21:58:02.1145560Z   Yubico.Core -> /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/Yubico.Core/src/bin/Debug/netstandard2.1/Yubico.Core.dll
2025-10-22T21:58:04.1922660Z   Yubico.Core.UnitTests -> /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/Yubico.Core/tests/bin/Debug/net8.0/Yubico.Core.UnitTests.dll
2025-10-22T21:58:04.2033490Z Test run for /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/Yubico.Core/tests/bin/Debug/net8.0/Yubico.Core.UnitTests.dll (.NETCoreApp,Version=v8.0)
2025-10-22T21:58:04.3896820Z VSTest version 17.14.1 (arm64)
2025-10-22T21:58:04.3902710Z 
2025-10-22T21:58:04.4708860Z Starting test execution, please wait...
2025-10-22T21:58:04.4892230Z A total of 1 test files matched the specified pattern.
2025-10-22T21:58:04.4893400Z /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/Yubico.Core/tests/bin/Debug/net8.0/Yubico.Core.UnitTests.dll
2025-10-22T21:58:05.1137690Z [xUnit.net 00:00:00.00] xUnit.net VSTest Adapter v3.1.5+1b188a7b0a (64-bit .NET 8.0.21)
2025-10-22T21:58:05.1631300Z [xUnit.net 00:00:00.06]   Discovering: Yubico.Core.UnitTests
2025-10-22T21:58:05.2759840Z [xUnit.net 00:00:00.17]   Discovered:  Yubico.Core.UnitTests
2025-10-22T21:58:05.2905020Z [xUnit.net 00:00:00.18]   Starting:    Yubico.Core.UnitTests
2025-10-22T21:58:05.3602360Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:05.3608770Z       [TELEMETRY][L001] MacOSHidDeviceListener constructor called on thread 7
2025-10-22T21:58:05.3610220Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:05.3650450Z       [TELEMETRY][L001] StartListening() called, creating background thread
2025-10-22T21:58:05.3663600Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:05.3664230Z       [TELEMETRY][L001] Background thread started
2025-10-22T21:58:05.3667080Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:05.3667800Z       [TELEMETRY][L001] MacOSHidDeviceListener constructor complete
2025-10-22T21:58:05.3669890Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:05.3672830Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:58:05.3674130Z       HID listener thread started. ThreadID is 18.
2025-10-22T21:58:05.3719630Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:05.3741900Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:58:05.3744620Z       IOHIDManager 4339163776 is scheduled with run loop 4561440304 with mode kCFRunLoopDefaultMode
2025-10-22T21:58:05.3756400Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:05.3765880Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:58:05.3766730Z       Flushed existing devices.
2025-10-22T21:58:05.3793540Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:05.3824510Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:58:05.3834340Z       [TELEMETRY][L001] Entering run loop. _shouldStop=False
2025-10-22T21:58:05.3856030Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:05.3878530Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:58:05.3888370Z       [TELEMETRY][L001] Loop iter 1: _shouldStop=False, prevResult=4, calling CFRunLoopRunInMode...
2025-10-22T21:58:05.3897960Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:05.3913680Z       [TELEMETRY][L001] >>> DISPOSE-ENTRY: disposing=True, thread=7, _isDisposed=False, _shouldStop=False
2025-10-22T21:58:05.3941810Z         CallStack:
2025-10-22T21:58:05.3961110Z          at Yubico.Core.Devices.Hid.MacOSHidDeviceListener.Dispose(Boolean disposing) in /_/Yubico.Core/src/Yubico/Core/Devices/Hid/MacOSHidDeviceListener.cs:line 154
2025-10-22T21:58:05.3974050Z          at Yubico.Core.Devices.Hid.HidDeviceListener.Dispose() in /_/Yubico.Core/src/Yubico/Core/Devices/Hid/HidDeviceListener.cs:line 153
2025-10-22T21:58:05.3993720Z          at Yubico.Core.Devices.Hid.UnitTests.MacOSHidDeviceListenerDisposalTests.Dispose_StopsIOKitCallbacks() in /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/Yubico.Core/tests/Yubico/Core/Devices/Hid/MacOSHidDeviceListenerDisposalTests.cs:line 423
2025-10-22T21:58:05.4000100Z          at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
2025-10-22T21:58:05.4001240Z          at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
2025-10-22T21:58:05.4002300Z          at Xunit.Sdk.TestInvoker`1.CallTestMethod(Object testClassInstance) in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestInvoker.cs:line 149
2025-10-22T21:58:05.4003450Z          at Xunit.Sdk.TestInvoker`1.<>c__DisplayClass47_0.<<InvokeTestMethodAsync>b__1>d.MoveNext() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestInvoker.cs:line 256
2025-10-22T21:58:05.4004510Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:58:05.4013820Z          at Xunit.Sdk.TestInvoker`1.<>c__DisplayClass47_0.<InvokeTestMethodAsync>b__1()
2025-10-22T21:58:05.4014850Z          at Xunit.Sdk.ExecutionTimer.AggregateAsync(Func`1 asyncAction) in /_/src/xunit.execution/Sdk/Frameworks/ExecutionTimer.cs:line 48
2025-10-22T21:58:05.4015880Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:58:05.4016830Z          at Xunit.Sdk.ExecutionTimer.AggregateAsync(Func`1 asyncAction)
2025-10-22T21:58:05.4017710Z          at Xunit.Sdk.TestInvoker`1.<>c__DisplayClass47_0.<InvokeTestMethodAsync>b__0() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestInvoker.cs:line 215
2025-10-22T21:58:05.4018660Z          at Xunit.Sdk.ExceptionAggregator.RunAsync(Func`1 code) in /_/src/xunit.core/Sdk/ExceptionAggregator.cs:line 90
2025-10-22T21:58:05.4019700Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:58:05.4020500Z          at Xunit.Sdk.ExceptionAggregator.RunAsync(Func`1 code)
2025-10-22T21:58:05.4021590Z          at Xunit.Sdk.TestInvoker`1.InvokeTestMethodAsync(Object testClassInstance) in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestInvoker.cs:line 214
2025-10-22T21:58:05.4022540Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:58:05.4023340Z          at Xunit.Sdk.TestInvoker`1.InvokeTestMethodAsync(Object testClassInstance)
2025-10-22T21:58:05.4024300Z          at Xunit.Sdk.XunitTestInvoker.InvokeTestMethodAsync(Object testClassInstance) in /_/src/xunit.execution/Sdk/Frameworks/Runners/XunitTestInvoker.cs:line 112
2025-10-22T21:58:05.4025280Z          at Xunit.Sdk.TestInvoker`1.<RunAsync>b__46_0() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestInvoker.cs:line 180
2025-10-22T21:58:05.4026700Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:58:05.4027320Z          at Xunit.Sdk.TestInvoker`1.<RunAsync>b__46_0()
2025-10-22T21:58:05.4028020Z          at Xunit.Sdk.ExceptionAggregator.RunAsync[T](Func`1 code) in /_/src/xunit.core/Sdk/ExceptionAggregator.cs:line 107
2025-10-22T21:58:05.4028870Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:58:05.4029970Z          at Xunit.Sdk.ExceptionAggregator.RunAsync[T](Func`1 code)
2025-10-22T21:58:05.4030690Z          at Xunit.Sdk.TestInvoker`1.RunAsync() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestInvoker.cs:line 163
2025-10-22T21:58:05.4031670Z          at Xunit.Sdk.XunitTestRunner.InvokeTestMethodAsync(ExceptionAggregator aggregator) in /_/src/xunit.execution/Sdk/Frameworks/Runners/XunitTestRunner.cs:line 88
2025-10-22T21:58:05.4032920Z          at Xunit.Sdk.XunitTestRunner.InvokeTestAsync(ExceptionAggregator aggregator) in /_/src/xunit.execution/Sdk/Frameworks/Runners/XunitTestRunner.cs:line 70
2025-10-22T21:58:05.4033900Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:58:05.4034780Z          at Xunit.Sdk.XunitTestRunner.InvokeTestAsync(ExceptionAggregator aggregator)
2025-10-22T21:58:05.4035680Z          at Xunit.Sdk.TestRunner`1.<>c__DisplayClass43_0.<RunAsync>b__0() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestRunner.cs:line 149
2025-10-22T21:58:05.4036570Z          at Xunit.Sdk.ExceptionAggregator.RunAsync[T](Func`1 code) in /_/src/xunit.core/Sdk/ExceptionAggregator.cs:line 107
2025-10-22T21:58:05.4037210Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:58:05.4038040Z          at Xunit.Sdk.ExceptionAggregator.RunAsync[T](Func`1 code)
2025-10-22T21:58:05.4038740Z          at Xunit.Sdk.TestRunner`1.RunAsync() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestRunner.cs:line 149
2025-10-22T21:58:05.4039970Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:58:05.4048380Z          at Xunit.Sdk.TestRunner`1.RunAsync()
2025-10-22T21:58:05.4049160Z          at Xunit.Sdk.XunitTestCaseRunner.RunTestAsync() in /_/src/xunit.execution/Sdk/Frameworks/Runners/XunitTestCaseRunner.cs:line 140
2025-10-22T21:58:05.4050290Z          at Xunit.Sdk.TestCaseRunner`1.RunAsync() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestCaseRunner.cs:line 82
2025-10-22T21:58:05.4051350Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:58:05.4052030Z          at Xunit.Sdk.TestCaseRunner`1.RunAsync()
2025-10-22T21:58:05.4053260Z          at Xunit.Sdk.XunitTestCase.RunAsync(IMessageSink diagnosticMessageSink, IMessageBus messageBus, Object[] constructorArguments, ExceptionAggregator aggregator, CancellationTokenSource cancellationTokenSource) in /_/src/xunit.execution/Sdk/Frameworks/XunitTestCase.cs:line 170
2025-10-22T21:58:05.4055300Z          at Xunit.Sdk.SkippableFactTestCase.<>n__0(IMessageSink diagnosticMessageSink, IMessageBus messageBus, Object[] constructorArguments, ExceptionAggregator aggregator, CancellationTokenSource cancellationTokenSource)
2025-10-22T21:58:05.4057010Z          at Xunit.Sdk.SkippableFactTestCase.RunAsync(IMessageSink diagnosticMessageSink, IMessageBus messageBus, Object[] constructorArguments, ExceptionAggregator aggregator, CancellationTokenSource cancellationTokenSource)
2025-10-22T21:58:05.4057960Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:58:05.4059190Z          at Xunit.Sdk.SkippableFactTestCase.RunAsync(IMessageSink diagnosticMessageSink, IMessageBus messageBus, Object[] constructorArguments, ExceptionAggregator aggregator, CancellationTokenSource cancellationTokenSource)
2025-10-22T21:58:05.4061170Z          at Xunit.Sdk.XunitTestMethodRunner.RunTestCaseAsync(IXunitTestCase testCase) in /_/src/xunit.execution/Sdk/Frameworks/Runners/XunitTestMethodRunner.cs:line 45
2025-10-22T21:58:05.4062240Z          at Xunit.Sdk.TestMethodRunner`1.RunTestCasesAsync() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestMethodRunner.cs:line 136
2025-10-22T21:58:05.4066240Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:58:05.4067590Z          at Xunit.Sdk.TestMethodRunner`1.RunTestCasesAsync()
2025-10-22T21:58:05.4068220Z          at Xunit.Sdk.TestMethodRunner`1.RunAsync() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestMethodRunner.cs:line 106
2025-10-22T21:58:05.4069170Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:58:05.4069660Z          at Xunit.Sdk.TestMethodRunner`1.RunAsync()
2025-10-22T21:58:05.4070570Z          at Xunit.Sdk.XunitTestClassRunner.RunTestMethodAsync(ITestMethod testMethod, IReflectionMethodInfo method, IEnumerable`1 testCases, Object[] constructorArguments) in /_/src/xunit.execution/Sdk/Frameworks/Runners/XunitTestClassRunner.cs:line 206
2025-10-22T21:58:05.4071620Z          at Xunit.Sdk.TestClassRunner`1.RunTestMethodsAsync()
2025-10-22T21:58:05.4072210Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:58:05.4072770Z          at Xunit.Sdk.TestClassRunner`1.RunTestMethodsAsync()
2025-10-22T21:58:05.4073430Z          at Xunit.Sdk.TestClassRunner`1.RunAsync() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestClassRunner.cs:line 175
2025-10-22T21:58:05.4074110Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:58:05.4074750Z          at Xunit.Sdk.TestClassRunner`1.RunAsync()
2025-10-22T21:58:05.4075780Z          at Xunit.Sdk.XunitTestCollectionRunner.RunTestClassAsync(ITestClass testClass, IReflectionTypeInfo class, IEnumerable`1 testCases) in /_/src/xunit.execution/Sdk/Frameworks/Runners/XunitTestCollectionRunner.cs:line 185
2025-10-22T21:58:05.4076970Z          at Xunit.Sdk.TestCollectionRunner`1.RunTestClassesAsync()
2025-10-22T21:58:05.4082330Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:58:05.4083200Z          at Xunit.Sdk.TestCollectionRunner`1.RunTestClassesAsync()
2025-10-22T21:58:05.4084010Z          at Xunit.Sdk.TestCollectionRunner`1.RunAsync() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestCollectionRunner.cs:line 101
2025-10-22T21:58:05.4085140Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:58:05.4085870Z          at Xunit.Sdk.TestCollectionRunner`1.RunAsync()
2025-10-22T21:58:05.4087120Z          at Xunit.Sdk.XunitTestAssemblyRunner.RunTestCollectionAsync(IMessageBus messageBus, ITestCollection testCollection, IEnumerable`1 testCases, CancellationTokenSource cancellationTokenSource) in /_/src/xunit.execution/Sdk/Frameworks/Runners/XunitTestAssemblyRunner.cs:line 346
2025-10-22T21:58:05.4088850Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:58:05.4090210Z          at Xunit.Sdk.XunitTestAssemblyRunner.RunTestCollectionAsync(IMessageBus messageBus, ITestCollection testCollection, IEnumerable`1 testCases, CancellationTokenSource cancellationTokenSource)
2025-10-22T21:58:05.4091610Z          at Xunit.Sdk.XunitTestAssemblyRunner.<>c__DisplayClass16_2.<RunTestCollectionsAsync>b__2() in /_/src/xunit.execution/Sdk/Frameworks/Runners/XunitTestAssemblyRunner.cs:line 250
2025-10-22T21:58:05.4092520Z          at System.Threading.Tasks.Task`1.InnerInvoke()
2025-10-22T21:58:05.4094830Z          at System.Threading.ExecutionContext.RunFromThreadPoolDispatchLoop(Thread threadPoolThread, ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-22T21:58:05.4102370Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-22T21:58:05.4110020Z          at System.Threading.ThreadPoolWorkQueue.Dispatch()
2025-10-22T21:58:05.4110850Z          at System.Threading.PortableThreadPool.WorkerThread.WorkerThreadStart()
2025-10-22T21:58:05.4111460Z          at System.Threading.Thread.StartCallback()
2025-10-22T21:58:05.4112560Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:05.4113210Z       [TELEMETRY][L001] Setting _isDisposed = true
2025-10-22T21:58:05.4113800Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:05.4114580Z       [TELEMETRY][L001] Calling StopListening(fromFinalizer=False)...
2025-10-22T21:58:05.4115380Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:05.4116080Z       [TELEMETRY][L001] StopListening(fromFinalizer=False) called
2025-10-22T21:58:05.4116790Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:05.4117480Z       [TELEMETRY][L001] Setting _shouldStop flag to true
2025-10-22T21:58:05.4118140Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:05.4118850Z       [TELEMETRY][L001] _shouldStop flag set. RunLoop pointer: 4561440304
2025-10-22T21:58:05.4119630Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:05.4120290Z       [TELEMETRY][L001] Calling CFRunLoopStop(4561440304)
2025-10-22T21:58:05.4120920Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:05.4121700Z       [TELEMETRY][L001] CFRunLoopStop() returned
2025-10-22T21:58:05.4122360Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:05.4122960Z       [TELEMETRY][L001] Waiting for thread to exit (1 second timeout)...
2025-10-22T21:58:05.4123750Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:05.4124380Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:58:05.4125070Z       [TELEMETRY][L001] Loop iter 1: CFRunLoopRunInMode returned 2 after 6ms
2025-10-22T21:58:05.4125770Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:05.4126420Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:58:05.4127080Z       [TELEMETRY][L001] Run loop exited after 1 iterations. _shouldStop=True, finalResult=2
2025-10-22T21:58:05.4127800Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:05.4128490Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:58:05.4129200Z       [TELEMETRY][L001] Listener thread finally block - cleaning up native resources
2025-10-22T21:58:05.4130020Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:05.4130790Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:58:05.4131390Z       [TELEMETRY][L001] Unscheduling IOHIDManager from run loop
2025-10-22T21:58:05.4132010Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:05.4132690Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:58:05.4133330Z       [TELEMETRY][L001] IOHIDManager unscheduled from run loop
2025-10-22T21:58:05.4133990Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:05.4134610Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:58:05.4135260Z       [TELEMETRY][L001] Releasing IOHIDManager
2025-10-22T21:58:05.4135720Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:05.4136060Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:58:05.4136780Z       [TELEMETRY][L001] IOHIDManager released
2025-10-22T21:58:05.4137500Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:05.4138050Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:58:05.4138750Z       [TELEMETRY][L001] Releasing run loop mode CFString
2025-10-22T21:58:05.4139330Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:05.4140020Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:58:05.4141140Z       [TELEMETRY][L001] Run loop mode CFString released
2025-10-22T21:58:05.4141780Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:05.4142490Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:58:05.4143120Z       [TELEMETRY][L001] Listener thread cleanup complete - thread exiting
2025-10-22T21:58:05.4143830Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:05.4144580Z       [TELEMETRY][L001] Thread exited successfully after 0ms
2025-10-22T21:58:05.4145220Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:05.4145750Z       [TELEMETRY][L001] StopListening() complete
2025-10-22T21:58:05.4146320Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:05.4146890Z       [TELEMETRY][L001] StopListening() returned successfully
2025-10-22T21:58:05.4147480Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:05.4148020Z       [TELEMETRY][L001] Calling base.Dispose(True)
2025-10-22T21:58:05.4148590Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:05.4149300Z       [TELEMETRY][L001] <<< DISPOSE-EXIT: Complete
2025-10-22T21:58:05.9471270Z [xUnit.net 00:00:00.84]   Finished:    Yubico.Core.UnitTests
2025-10-22T21:58:06.0151510Z   Passed Yubico.Core.Devices.Hid.UnitTests.MacOSHidDeviceListenerDisposalTests.Dispose_StopsIOKitCallbacks [628 ms]
2025-10-22T21:58:06.0152310Z   Standard Output Messages:
2025-10-22T21:58:06.0152650Z  === TEST START: Dispose_StopsIOKitCallbacks ===
2025-10-22T21:58:06.0153010Z  [USING-ENTRY] Test=Dispose_StopsIOKitCallbacks, Thread=7
2025-10-22T21:58:06.0153470Z  [USING-BODY] Test=Dispose_StopsIOKitCallbacks, Listener=L001, Thread=7
2025-10-22T21:58:06.0153830Z  [TEST] Created listener: L001
2025-10-22T21:58:06.0154090Z  [TEST] Disposing listener: L001
2025-10-22T21:58:06.0154360Z  [TEST] Dispose() completed on L001
2025-10-22T21:58:06.0154650Z  [TEST] Verified no callbacks fired for L001
2025-10-22T21:58:06.0155040Z  [USING-EXIT] Test=Dispose_StopsIOKitCallbacks, Listener=L001, Thread=7
2025-10-22T21:58:06.0155330Z 
2025-10-22T21:58:06.0155420Z 
2025-10-22T21:58:06.0158240Z 
2025-10-22T21:58:06.0177260Z Test Run Successful.
2025-10-22T21:58:06.0177540Z Total tests: 1
2025-10-22T21:58:06.0177770Z      Passed: 1
2025-10-22T21:58:06.0220300Z  Total time: 1.5261 Seconds
2025-10-22T21:58:06.0733920Z ##[group]Run actions/upload-artifact@v4
2025-10-22T21:58:06.0734160Z with:
2025-10-22T21:58:06.0734370Z   name: Logs-Test11-Dispose_StopsIOKitCallbacks
2025-10-22T21:58:06.0734650Z   path: **/TestResults/*
2025-10-22T21:58:06.0734830Z   if-no-files-found: warn
2025-10-22T21:58:06.0735040Z   compression-level: 6
2025-10-22T21:58:06.0735240Z   overwrite: false
2025-10-22T21:58:06.0735520Z   include-hidden-files: false
2025-10-22T21:58:06.0735740Z env:
2025-10-22T21:58:06.0735930Z   DOTNET_ROOT: /Users/runner/.dotnet
2025-10-22T21:58:06.0736190Z ##[endgroup]
2025-10-22T21:58:06.5545390Z ##[warning]No files were found with the provided path: **/TestResults/*. No artifacts will be uploaded.
2025-10-22T21:58:06.5628510Z Post job cleanup.
2025-10-22T21:58:06.6879740Z Post job cleanup.
2025-10-22T21:58:06.7756830Z [command]/opt/homebrew/bin/git version
2025-10-22T21:58:06.7917760Z git version 2.50.1
2025-10-22T21:58:06.7949850Z Copying '/Users/runner/.gitconfig' to '/Users/runner/work/_temp/00c6a9ad-20f9-4f87-8c32-ad64153a85ae/.gitconfig'
2025-10-22T21:58:06.7955850Z Temporarily overriding HOME='/Users/runner/work/_temp/00c6a9ad-20f9-4f87-8c32-ad64153a85ae' before making global git config changes
2025-10-22T21:58:06.7956580Z Adding repository directory to the temporary git global config as a safe directory
2025-10-22T21:58:06.7965130Z [command]/opt/homebrew/bin/git config --global --add safe.directory /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK
2025-10-22T21:58:06.8049940Z [command]/opt/homebrew/bin/git config --local --name-only --get-regexp core\.sshCommand
2025-10-22T21:58:06.8121260Z [command]/opt/homebrew/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'core\.sshCommand' && git config --local --unset-all 'core.sshCommand' || :"
2025-10-22T21:58:06.8830860Z [command]/opt/homebrew/bin/git config --local --name-only --get-regexp http\.https\:\/\/github\.com\/\.extraheader
2025-10-22T21:58:06.8876650Z http.https://github.com/.extraheader
2025-10-22T21:58:06.8884030Z [command]/opt/homebrew/bin/git config --local --unset-all http.https://github.com/.extraheader
2025-10-22T21:58:06.8939420Z [command]/opt/homebrew/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'http\.https\:\/\/github\.com\/\.extraheader' && git config --local --unset-all 'http.https://github.com/.extraheader' || :"
2025-10-22T21:58:06.9729350Z Cleaning up orphan processes
2025-10-22T21:58:07.1234270Z Terminate orphan process: pid (4045) (dotnet)
