2025-10-22T21:57:42.5860230Z Current runner version: '2.329.0'
2025-10-22T21:57:42.5882970Z ##[group]Runner Image Provisioner
2025-10-22T21:57:42.5883810Z Hosted Compute Agent
2025-10-22T21:57:42.5884150Z Version: 20251016.436
2025-10-22T21:57:42.5884520Z Commit: 8ab8ac8bfd662a3739dab9fe09456aba92132568
2025-10-22T21:57:42.5884960Z Build Date: 2025-10-15T20:44:12Z
2025-10-22T21:57:42.5885320Z ##[endgroup]
2025-10-22T21:57:42.5885650Z ##[group]Operating System
2025-10-22T21:57:42.5886000Z macOS
2025-10-22T21:57:42.5886290Z 15.6.1
2025-10-22T21:57:42.5886580Z 24G90
2025-10-22T21:57:42.5886860Z ##[endgroup]
2025-10-22T21:57:42.5887150Z ##[group]Runner Image
2025-10-22T21:57:42.5887490Z Image: macos-15-arm64
2025-10-22T21:57:42.5887820Z Version: 20251015.0042
2025-10-22T21:57:42.5888540Z Included Software: https://github.com/actions/runner-images/blob/macos-15-arm64/20251015.0042/images/macos/macos-15-arm64-Readme.md
2025-10-22T21:57:42.5889690Z Image Release: https://github.com/actions/runner-images/releases/tag/macos-15-arm64%2F20251015.0042
2025-10-22T21:57:42.5890330Z ##[endgroup]
2025-10-22T21:57:42.5891170Z ##[group]GITHUB_TOKEN Permissions
2025-10-22T21:57:42.5892780Z Contents: read
2025-10-22T21:57:42.5893100Z Metadata: read
2025-10-22T21:57:42.5893430Z Packages: read
2025-10-22T21:57:42.5893750Z ##[endgroup]
2025-10-22T21:57:42.5895290Z Secret source: Actions
2025-10-22T21:57:42.5895700Z Prepare workflow directory
2025-10-22T21:57:42.6325970Z Prepare all required actions
2025-10-22T21:57:42.6355090Z Getting action download info
2025-10-22T21:57:42.9379360Z Download action repository 'actions/checkout@v4' (SHA:08eba0b27e820071cde6df949e0beb9ba4906955)
2025-10-22T21:57:43.4158430Z Download action repository 'actions/setup-dotnet@v4' (SHA:67a3573c9a986a3f9c594539f4ab511d57bb3ce9)
2025-10-22T21:57:45.0744490Z Download action repository 'actions/upload-artifact@v4' (SHA:ea165f8d65b6e75b540449e92b4886f43607fa02)
2025-10-22T21:57:45.2945520Z Complete job name: Test 12 - Dispose_ClearsDelegateReferences
2025-10-22T21:57:45.3624350Z ##[group]Run actions/checkout@v4
2025-10-22T21:57:45.3625030Z with:
2025-10-22T21:57:45.3625380Z   repository: Yubico/Yubico.NET.SDK
2025-10-22T21:57:45.3626090Z   token: ***
2025-10-22T21:57:45.3626430Z   ssh-strict: true
2025-10-22T21:57:45.3626770Z   ssh-user: git
2025-10-22T21:57:45.3627120Z   persist-credentials: true
2025-10-22T21:57:45.3627500Z   clean: true
2025-10-22T21:57:45.3627850Z   sparse-checkout-cone-mode: true
2025-10-22T21:57:45.3628290Z   fetch-depth: 1
2025-10-22T21:57:45.3628620Z   fetch-tags: false
2025-10-22T21:57:45.3628960Z   show-progress: true
2025-10-22T21:57:45.3629320Z   lfs: false
2025-10-22T21:57:45.3629650Z   submodules: false
2025-10-22T21:57:45.3630020Z   set-safe-directory: true
2025-10-22T21:57:45.3630560Z ##[endgroup]
2025-10-22T21:57:45.8064660Z Syncing repository: Yubico/Yubico.NET.SDK
2025-10-22T21:57:45.8081280Z ##[group]Getting Git version info
2025-10-22T21:57:45.8124900Z Working directory is '/Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK'
2025-10-22T21:57:45.8139280Z [command]/opt/homebrew/bin/git version
2025-10-22T21:57:45.8673290Z git version 2.50.1
2025-10-22T21:57:45.8724940Z ##[endgroup]
2025-10-22T21:57:45.8729210Z Copying '/Users/runner/.gitconfig' to '/Users/runner/work/_temp/23713a85-ab6c-46e9-830d-0ecde92c58dd/.gitconfig'
2025-10-22T21:57:45.8730580Z Temporarily overriding HOME='/Users/runner/work/_temp/23713a85-ab6c-46e9-830d-0ecde92c58dd' before making global git config changes
2025-10-22T21:57:45.8731820Z Adding repository directory to the temporary git global config as a safe directory
2025-10-22T21:57:45.8732890Z [command]/opt/homebrew/bin/git config --global --add safe.directory /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK
2025-10-22T21:57:45.8818700Z Deleting the contents of '/Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK'
2025-10-22T21:57:45.8820860Z ##[group]Initializing the repository
2025-10-22T21:57:45.8824510Z [command]/opt/homebrew/bin/git init /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK
2025-10-22T21:57:45.9717440Z hint: Using 'master' as the name for the initial branch. This default branch name
2025-10-22T21:57:45.9725720Z hint: is subject to change. To configure the initial branch name to use in all
2025-10-22T21:57:45.9726630Z hint: of your new repositories, which will suppress this warning, call:
2025-10-22T21:57:45.9743800Z hint:
2025-10-22T21:57:45.9746690Z hint: 	git config --global init.defaultBranch <name>
2025-10-22T21:57:45.9750040Z hint:
2025-10-22T21:57:45.9750660Z hint: Names commonly chosen instead of 'master' are 'main', 'trunk' and
2025-10-22T21:57:45.9751910Z hint: 'development'. The just-created branch can be renamed via this command:
2025-10-22T21:57:45.9752710Z hint:
2025-10-22T21:57:45.9753290Z hint: 	git branch -m <name>
2025-10-22T21:57:45.9754070Z hint:
2025-10-22T21:57:45.9754780Z hint: Disable this message with "git config set advice.defaultBranchName false"
2025-10-22T21:57:45.9755820Z Initialized empty Git repository in /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/.git/
2025-10-22T21:57:45.9758540Z [command]/opt/homebrew/bin/git remote add origin https://github.com/Yubico/Yubico.NET.SDK
2025-10-22T21:57:45.9822500Z ##[endgroup]
2025-10-22T21:57:45.9823820Z ##[group]Disabling automatic garbage collection
2025-10-22T21:57:45.9824590Z [command]/opt/homebrew/bin/git config --local gc.auto 0
2025-10-22T21:57:45.9915660Z ##[endgroup]
2025-10-22T21:57:45.9916470Z ##[group]Setting up auth
2025-10-22T21:57:45.9918860Z [command]/opt/homebrew/bin/git config --local --name-only --get-regexp core\.sshCommand
2025-10-22T21:57:45.9988560Z [command]/opt/homebrew/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'core\.sshCommand' && git config --local --unset-all 'core.sshCommand' || :"
2025-10-22T21:57:46.1616650Z [command]/opt/homebrew/bin/git config --local --name-only --get-regexp http\.https\:\/\/github\.com\/\.extraheader
2025-10-22T21:57:46.1681300Z [command]/opt/homebrew/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'http\.https\:\/\/github\.com\/\.extraheader' && git config --local --unset-all 'http.https://github.com/.extraheader' || :"
2025-10-22T21:57:46.2859280Z [command]/opt/homebrew/bin/git config --local http.https://github.com/.extraheader AUTHORIZATION: basic ***
2025-10-22T21:57:46.2863030Z ##[endgroup]
2025-10-22T21:57:46.2863760Z ##[group]Fetching the repository
2025-10-22T21:57:46.2865490Z [command]/opt/homebrew/bin/git -c protocol.version=2 fetch --no-tags --prune --no-recurse-submodules --depth=1 origin +aabfee568d26bca8fd9e83fafbe1a8934840ca60:refs/remotes/origin/experiment/isolate-disposal-hang
2025-10-22T21:57:47.5823800Z From https://github.com/Yubico/Yubico.NET.SDK
2025-10-22T21:57:47.5828430Z  * [new ref]         aabfee568d26bca8fd9e83fafbe1a8934840ca60 -> origin/experiment/isolate-disposal-hang
2025-10-22T21:57:47.5919220Z ##[endgroup]
2025-10-22T21:57:47.5921460Z ##[group]Determining the checkout info
2025-10-22T21:57:47.5923650Z ##[endgroup]
2025-10-22T21:57:47.5925400Z [command]/opt/homebrew/bin/git sparse-checkout disable
2025-10-22T21:57:47.5983240Z [command]/opt/homebrew/bin/git config --local --unset-all extensions.worktreeConfig
2025-10-22T21:57:47.6057560Z ##[group]Checking out the ref
2025-10-22T21:57:47.6059910Z [command]/opt/homebrew/bin/git checkout --progress --force -B experiment/isolate-disposal-hang refs/remotes/origin/experiment/isolate-disposal-hang
2025-10-22T21:57:47.8863280Z Switched to a new branch 'experiment/isolate-disposal-hang'
2025-10-22T21:57:47.8965520Z branch 'experiment/isolate-disposal-hang' set up to track 'origin/experiment/isolate-disposal-hang'.
2025-10-22T21:57:47.9271730Z ##[endgroup]
2025-10-22T21:57:47.9624280Z [command]/opt/homebrew/bin/git log -1 --format=%H
2025-10-22T21:57:47.9742380Z aabfee568d26bca8fd9e83fafbe1a8934840ca60
2025-10-22T21:57:48.0322350Z ##[group]Run actions/setup-dotnet@v4
2025-10-22T21:57:48.0322980Z with:
2025-10-22T21:57:48.0323450Z   global-json-file: ./global.json
2025-10-22T21:57:48.0323970Z   cache: false
2025-10-22T21:57:48.0324420Z ##[endgroup]
2025-10-22T21:57:48.2154840Z [command]/Users/runner/work/_actions/actions/setup-dotnet/v4/externals/install-dotnet.sh --skip-non-versioned-files --runtime dotnet --channel LTS
2025-10-22T21:57:49.2870160Z dotnet-install: .NET Core Runtime with version '8.0.21' is already installed.
2025-10-22T21:57:49.2971690Z [command]/Users/runner/work/_actions/actions/setup-dotnet/v4/externals/install-dotnet.sh --skip-non-versioned-files --channel 9.0
2025-10-22T21:57:50.2662260Z dotnet-install: .NET Core SDK with version '9.0.306' is already installed.
2025-10-22T21:57:50.2871880Z ##[group]Run dotnet nuget add source --username DennisDyallo --password *** --store-password-in-clear-text --name github "https://nuget.pkg.github.com/Yubico/index.json"
2025-10-22T21:57:50.2872980Z [36;1mdotnet nuget add source --username DennisDyallo --password *** --store-password-in-clear-text --name github "https://nuget.pkg.github.com/Yubico/index.json"[0m
2025-10-22T21:57:50.2919990Z shell: /bin/bash -e {0}
2025-10-22T21:57:50.2920220Z env:
2025-10-22T21:57:50.2920420Z   DOTNET_ROOT: /Users/runner/.dotnet
2025-10-22T21:57:50.2920630Z ##[endgroup]
2025-10-22T21:57:51.1203790Z 
2025-10-22T21:57:51.1306620Z Welcome to .NET 9.0!
2025-10-22T21:57:51.1409400Z ---------------------
2025-10-22T21:57:51.1511590Z SDK Version: 9.0.306
2025-10-22T21:57:51.1613420Z 
2025-10-22T21:57:51.1714880Z Telemetry
2025-10-22T21:57:51.1818520Z ---------
2025-10-22T21:57:51.1930230Z The .NET tools collect usage data in order to help us improve your experience. It is collected by Microsoft and shared with the community. You can opt-out of telemetry by setting the DOTNET_CLI_TELEMETRY_OPTOUT environment variable to '1' or 'true' using your favorite shell.
2025-10-22T21:57:51.2032990Z 
2025-10-22T21:57:51.2145800Z Read more about .NET CLI Tools telemetry: https://aka.ms/dotnet-cli-telemetry
2025-10-22T21:57:52.1312900Z 
2025-10-22T21:57:52.1414260Z ----------------
2025-10-22T21:57:52.1517060Z Installed an ASP.NET Core HTTPS development certificate.
2025-10-22T21:57:52.1618440Z To trust the certificate, run 'dotnet dev-certs https --trust'
2025-10-22T21:57:52.1719720Z Learn about HTTPS: https://aka.ms/dotnet-https
2025-10-22T21:57:52.1820800Z 
2025-10-22T21:57:52.1921720Z ----------------
2025-10-22T21:57:52.2022770Z Write your first app: https://aka.ms/dotnet-hello-world
2025-10-22T21:57:52.2125650Z Find out what's new: https://aka.ms/dotnet-whats-new
2025-10-22T21:57:52.2226930Z Explore documentation: https://aka.ms/dotnet-docs
2025-10-22T21:57:52.2328390Z Report issues and find source on GitHub: https://github.com/dotnet/core
2025-10-22T21:57:52.2429890Z Use 'dotnet --help' to see available commands or visit: https://aka.ms/dotnet-cli
2025-10-22T21:57:52.2531420Z --------------------------------------------------------------------------------------
2025-10-22T21:57:52.3548660Z Package source with Name: github added successfully.
2025-10-22T21:57:52.8268430Z ##[group]Run brew install openssl
2025-10-22T21:57:52.8268720Z [36;1mbrew install openssl[0m
2025-10-22T21:57:52.8268930Z [36;1msudo mkdir -p /usr/local/lib[0m
2025-10-22T21:57:52.8269330Z [36;1msudo ln -s $(brew --prefix)/opt/openssl@3/lib/libcrypto.3.dylib /usr/local/lib/libcrypto.3.dylib[0m
2025-10-22T21:57:52.8269860Z [36;1msudo ln -s $(brew --prefix)/opt/openssl@3/lib/libssl.3.dylib /usr/local/lib/libssl.3.dylib[0m
2025-10-22T21:57:52.8301930Z shell: /bin/bash -e {0}
2025-10-22T21:57:52.8302100Z env:
2025-10-22T21:57:52.8302260Z   DOTNET_ROOT: /Users/runner/.dotnet
2025-10-22T21:57:52.8302500Z ##[endgroup]
2025-10-22T21:57:57.4857150Z ##[warning]openssl@3 3.6.0 is already installed and up-to-date.
To reinstall 3.6.0, run:
  brew reinstall openssl@3

2025-10-22T21:57:57.7140880Z ##[group]Run dotnet test Yubico.Core/tests/Yubico.Core.UnitTests.csproj --filter "FullyQualifiedName~MacOSHidDeviceListenerDisposalTests.Dispose_ClearsDelegateReferences" --logger "console;verbosity=detailed"
2025-10-22T21:57:57.7142150Z [36;1mdotnet test Yubico.Core/tests/Yubico.Core.UnitTests.csproj --filter "FullyQualifiedName~MacOSHidDeviceListenerDisposalTests.Dispose_ClearsDelegateReferences" --logger "console;verbosity=detailed"[0m
2025-10-22T21:57:57.7183330Z shell: /bin/bash -e {0}
2025-10-22T21:57:57.7183580Z env:
2025-10-22T21:57:57.7183850Z   DOTNET_ROOT: /Users/runner/.dotnet
2025-10-22T21:57:57.7184120Z   Logging__LogLevel__Default: Information
2025-10-22T21:57:57.7184440Z   Logging__LogLevel__Yubico: Information
2025-10-22T21:57:57.7184780Z ##[endgroup]
2025-10-22T21:57:58.5433940Z   Determining projects to restore...
2025-10-22T21:58:02.6341320Z   Restored /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/Yubico.Core/tests/Yubico.Core.UnitTests.csproj (in 3.68 sec).
2025-10-22T21:58:02.8956150Z   Restored /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/Yubico.Core/src/Yubico.Core.csproj (in 3.96 sec).
2025-10-22T21:58:09.8171050Z   Yubico.Core -> /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/Yubico.Core/src/bin/Debug/netstandard2.1/Yubico.Core.dll
2025-10-22T21:58:14.2569890Z   Yubico.Core.UnitTests -> /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/Yubico.Core/tests/bin/Debug/net8.0/Yubico.Core.UnitTests.dll
2025-10-22T21:58:14.2965150Z Test run for /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/Yubico.Core/tests/bin/Debug/net8.0/Yubico.Core.UnitTests.dll (.NETCoreApp,Version=v8.0)
2025-10-22T21:58:14.7407860Z VSTest version 17.14.1 (arm64)
2025-10-22T21:58:14.7543000Z 
2025-10-22T21:58:14.9261550Z Starting test execution, please wait...
2025-10-22T21:58:14.9678150Z A total of 1 test files matched the specified pattern.
2025-10-22T21:58:14.9779040Z /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/Yubico.Core/tests/bin/Debug/net8.0/Yubico.Core.UnitTests.dll
2025-10-22T21:58:16.0271870Z [xUnit.net 00:00:00.00] xUnit.net VSTest Adapter v3.1.5+1b188a7b0a (64-bit .NET 8.0.21)
2025-10-22T21:58:16.1461550Z [xUnit.net 00:00:00.12]   Discovering: Yubico.Core.UnitTests
2025-10-22T21:58:16.3647400Z [xUnit.net 00:00:00.35]   Discovered:  Yubico.Core.UnitTests
2025-10-22T21:58:16.4052640Z [xUnit.net 00:00:00.38]   Starting:    Yubico.Core.UnitTests
2025-10-22T21:58:16.5380840Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:16.5481180Z       [TELEMETRY][L001] MacOSHidDeviceListener constructor called on thread 12
2025-10-22T21:58:16.5586420Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:16.5688970Z       [TELEMETRY][L001] StartListening() called, creating background thread
2025-10-22T21:58:16.5793460Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:16.5895420Z       [TELEMETRY][L001] Background thread started
2025-10-22T21:58:16.5998040Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:16.6100720Z       [TELEMETRY][L001] MacOSHidDeviceListener constructor complete
2025-10-22T21:58:16.6203360Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:16.6305190Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:58:16.6421370Z       HID listener thread started. ThreadID is 18.
2025-10-22T21:58:16.6514950Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:16.6628760Z       [TELEMETRY][L001] >>> DISPOSE-ENTRY: disposing=True, thread=12, _isDisposed=False, _shouldStop=False
2025-10-22T21:58:16.6731350Z         CallStack:
2025-10-22T21:58:16.6834200Z          at Yubico.Core.Devices.Hid.MacOSHidDeviceListener.Dispose(Boolean disposing) in /_/Yubico.Core/src/Yubico/Core/Devices/Hid/MacOSHidDeviceListener.cs:line 154
2025-10-22T21:58:16.6937200Z          at Yubico.Core.Devices.Hid.HidDeviceListener.Dispose() in /_/Yubico.Core/src/Yubico/Core/Devices/Hid/HidDeviceListener.cs:line 153
2025-10-22T21:58:16.7039940Z          at Yubico.Core.Devices.Hid.UnitTests.MacOSHidDeviceListenerDisposalTests.Dispose_ClearsDelegateReferences() in /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/Yubico.Core/tests/Yubico/Core/Devices/Hid/MacOSHidDeviceListenerDisposalTests.cs:line 455
2025-10-22T21:58:16.7142990Z          at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
2025-10-22T21:58:16.7260430Z          at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
2025-10-22T21:58:16.7361990Z          at Xunit.Sdk.TestInvoker`1.CallTestMethod(Object testClassInstance) in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestInvoker.cs:line 149
2025-10-22T21:58:16.7465460Z          at Xunit.Sdk.TestInvoker`1.<>c__DisplayClass47_0.<<InvokeTestMethodAsync>b__1>d.MoveNext() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestInvoker.cs:line 256
2025-10-22T21:58:16.7572700Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:58:16.7661000Z          at Xunit.Sdk.TestInvoker`1.<>c__DisplayClass47_0.<InvokeTestMethodAsync>b__1()
2025-10-22T21:58:16.7722610Z          at Xunit.Sdk.ExecutionTimer.AggregateAsync(Func`1 asyncAction) in /_/src/xunit.execution/Sdk/Frameworks/ExecutionTimer.cs:line 48
2025-10-22T21:58:16.7824480Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:58:16.7942380Z          at Xunit.Sdk.ExecutionTimer.AggregateAsync(Func`1 asyncAction)
2025-10-22T21:58:16.8045970Z          at Xunit.Sdk.TestInvoker`1.<>c__DisplayClass47_0.<InvokeTestMethodAsync>b__0() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestInvoker.cs:line 215
2025-10-22T21:58:16.8156620Z          at Xunit.Sdk.ExceptionAggregator.RunAsync(Func`1 code) in /_/src/xunit.core/Sdk/ExceptionAggregator.cs:line 90
2025-10-22T21:58:16.8260040Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:58:16.8362860Z          at Xunit.Sdk.ExceptionAggregator.RunAsync(Func`1 code)
2025-10-22T21:58:16.8472240Z          at Xunit.Sdk.TestInvoker`1.InvokeTestMethodAsync(Object testClassInstance) in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestInvoker.cs:line 214
2025-10-22T21:58:16.8576440Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:58:16.8678190Z          at Xunit.Sdk.TestInvoker`1.InvokeTestMethodAsync(Object testClassInstance)
2025-10-22T21:58:16.8731140Z          at Xunit.Sdk.XunitTestInvoker.InvokeTestMethodAsync(Object testClassInstance) in /_/src/xunit.execution/Sdk/Frameworks/Runners/XunitTestInvoker.cs:line 112
2025-10-22T21:58:16.8812720Z          at Xunit.Sdk.TestInvoker`1.<RunAsync>b__46_0() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestInvoker.cs:line 180
2025-10-22T21:58:16.8818100Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:58:16.8820630Z          at Xunit.Sdk.TestInvoker`1.<RunAsync>b__46_0()
2025-10-22T21:58:16.8915680Z          at Xunit.Sdk.ExceptionAggregator.RunAsync[T](Func`1 code) in /_/src/xunit.core/Sdk/ExceptionAggregator.cs:line 107
2025-10-22T21:58:16.8944510Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:58:16.8979750Z          at Xunit.Sdk.ExceptionAggregator.RunAsync[T](Func`1 code)
2025-10-22T21:58:16.9013270Z          at Xunit.Sdk.TestInvoker`1.RunAsync() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestInvoker.cs:line 163
2025-10-22T21:58:16.9022610Z          at Xunit.Sdk.XunitTestRunner.InvokeTestMethodAsync(ExceptionAggregator aggregator) in /_/src/xunit.execution/Sdk/Frameworks/Runners/XunitTestRunner.cs:line 88
2025-10-22T21:58:16.9076480Z          at Xunit.Sdk.XunitTestRunner.InvokeTestAsync(ExceptionAggregator aggregator) in /_/src/xunit.execution/Sdk/Frameworks/Runners/XunitTestRunner.cs:line 70
2025-10-22T21:58:16.9131680Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:58:16.9187190Z          at Xunit.Sdk.XunitTestRunner.InvokeTestAsync(ExceptionAggregator aggregator)
2025-10-22T21:58:16.9273890Z          at Xunit.Sdk.TestRunner`1.<>c__DisplayClass43_0.<RunAsync>b__0() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestRunner.cs:line 149
2025-10-22T21:58:16.9350120Z          at Xunit.Sdk.ExceptionAggregator.RunAsync[T](Func`1 code) in /_/src/xunit.core/Sdk/ExceptionAggregator.cs:line 107
2025-10-22T21:58:16.9445140Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:58:16.9480630Z          at Xunit.Sdk.ExceptionAggregator.RunAsync[T](Func`1 code)
2025-10-22T21:58:16.9516730Z          at Xunit.Sdk.TestRunner`1.RunAsync() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestRunner.cs:line 149
2025-10-22T21:58:16.9564320Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:58:16.9602230Z          at Xunit.Sdk.TestRunner`1.RunAsync()
2025-10-22T21:58:16.9634200Z          at Xunit.Sdk.XunitTestCaseRunner.RunTestAsync() in /_/src/xunit.execution/Sdk/Frameworks/Runners/XunitTestCaseRunner.cs:line 140
2025-10-22T21:58:16.9673620Z          at Xunit.Sdk.TestCaseRunner`1.RunAsync() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestCaseRunner.cs:line 82
2025-10-22T21:58:16.9708810Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:58:16.9749950Z          at Xunit.Sdk.TestCaseRunner`1.RunAsync()
2025-10-22T21:58:16.9772460Z          at Xunit.Sdk.XunitTestCase.RunAsync(IMessageSink diagnosticMessageSink, IMessageBus messageBus, Object[] constructorArguments, ExceptionAggregator aggregator, CancellationTokenSource cancellationTokenSource) in /_/src/xunit.execution/Sdk/Frameworks/XunitTestCase.cs:line 170
2025-10-22T21:58:16.9803010Z          at Xunit.Sdk.SkippableFactTestCase.<>n__0(IMessageSink diagnosticMessageSink, IMessageBus messageBus, Object[] constructorArguments, ExceptionAggregator aggregator, CancellationTokenSource cancellationTokenSource)
2025-10-22T21:58:16.9826510Z          at Xunit.Sdk.SkippableFactTestCase.RunAsync(IMessageSink diagnosticMessageSink, IMessageBus messageBus, Object[] constructorArguments, ExceptionAggregator aggregator, CancellationTokenSource cancellationTokenSource)
2025-10-22T21:58:16.9848640Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:58:16.9887060Z          at Xunit.Sdk.SkippableFactTestCase.RunAsync(IMessageSink diagnosticMessageSink, IMessageBus messageBus, Object[] constructorArguments, ExceptionAggregator aggregator, CancellationTokenSource cancellationTokenSource)
2025-10-22T21:58:16.9921440Z          at Xunit.Sdk.XunitTestMethodRunner.RunTestCaseAsync(IXunitTestCase testCase) in /_/src/xunit.execution/Sdk/Frameworks/Runners/XunitTestMethodRunner.cs:line 45
2025-10-22T21:58:16.9954020Z          at Xunit.Sdk.TestMethodRunner`1.RunTestCasesAsync() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestMethodRunner.cs:line 136
2025-10-22T21:58:16.9987460Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:58:16.9991880Z          at Xunit.Sdk.TestMethodRunner`1.RunTestCasesAsync()
2025-10-22T21:58:16.9994660Z          at Xunit.Sdk.TestMethodRunner`1.RunAsync() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestMethodRunner.cs:line 106
2025-10-22T21:58:16.9999040Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:58:17.0003430Z          at Xunit.Sdk.TestMethodRunner`1.RunAsync()
2025-10-22T21:58:17.0017900Z          at Xunit.Sdk.XunitTestClassRunner.RunTestMethodAsync(ITestMethod testMethod, IReflectionMethodInfo method, IEnumerable`1 testCases, Object[] constructorArguments) in /_/src/xunit.execution/Sdk/Frameworks/Runners/XunitTestClassRunner.cs:line 206
2025-10-22T21:58:17.0022930Z          at Xunit.Sdk.TestClassRunner`1.RunTestMethodsAsync()
2025-10-22T21:58:17.0026520Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:58:17.0030340Z          at Xunit.Sdk.TestClassRunner`1.RunTestMethodsAsync()
2025-10-22T21:58:17.0041510Z          at Xunit.Sdk.TestClassRunner`1.RunAsync() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestClassRunner.cs:line 175
2025-10-22T21:58:17.0046190Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:58:17.0049720Z          at Xunit.Sdk.TestClassRunner`1.RunAsync()
2025-10-22T21:58:17.0054800Z          at Xunit.Sdk.XunitTestCollectionRunner.RunTestClassAsync(ITestClass testClass, IReflectionTypeInfo class, IEnumerable`1 testCases) in /_/src/xunit.execution/Sdk/Frameworks/Runners/XunitTestCollectionRunner.cs:line 185
2025-10-22T21:58:17.0090210Z          at Xunit.Sdk.TestCollectionRunner`1.RunTestClassesAsync()
2025-10-22T21:58:17.0131440Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:58:17.0186770Z          at Xunit.Sdk.TestCollectionRunner`1.RunTestClassesAsync()
2025-10-22T21:58:17.0289940Z          at Xunit.Sdk.TestCollectionRunner`1.RunAsync() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestCollectionRunner.cs:line 101
2025-10-22T21:58:17.0292080Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:58:17.0393900Z          at Xunit.Sdk.TestCollectionRunner`1.RunAsync()
2025-10-22T21:58:17.0450300Z          at Xunit.Sdk.XunitTestAssemblyRunner.RunTestCollectionAsync(IMessageBus messageBus, ITestCollection testCollection, IEnumerable`1 testCases, CancellationTokenSource cancellationTokenSource) in /_/src/xunit.execution/Sdk/Frameworks/Runners/XunitTestAssemblyRunner.cs:line 346
2025-10-22T21:58:17.0552110Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:58:17.0604360Z          at Xunit.Sdk.XunitTestAssemblyRunner.RunTestCollectionAsync(IMessageBus messageBus, ITestCollection testCollection, IEnumerable`1 testCases, CancellationTokenSource cancellationTokenSource)
2025-10-22T21:58:17.0706880Z          at Xunit.Sdk.XunitTestAssemblyRunner.<>c__DisplayClass16_2.<RunTestCollectionsAsync>b__2() in /_/src/xunit.execution/Sdk/Frameworks/Runners/XunitTestAssemblyRunner.cs:line 250
2025-10-22T21:58:17.0808250Z          at System.Threading.Tasks.Task`1.InnerInvoke()
2025-10-22T21:58:17.0905990Z          at System.Threading.ExecutionContext.RunFromThreadPoolDispatchLoop(Thread threadPoolThread, ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-22T21:58:17.1010500Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-22T21:58:17.1110900Z          at System.Threading.ThreadPoolWorkQueue.Dispatch()
2025-10-22T21:58:17.1212200Z          at System.Threading.PortableThreadPool.WorkerThread.WorkerThreadStart()
2025-10-22T21:58:17.1313510Z          at System.Threading.Thread.StartCallback()
2025-10-22T21:58:17.1406260Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:17.1442320Z       [TELEMETRY][L001] Setting _isDisposed = true
2025-10-22T21:58:17.1513620Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:17.1550120Z       [TELEMETRY][L001] Calling StopListening(fromFinalizer=False)...
2025-10-22T21:58:17.1595830Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:17.1631540Z       [TELEMETRY][L001] StopListening(fromFinalizer=False) called
2025-10-22T21:58:17.1662940Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:17.1695750Z       [TELEMETRY][L001] Setting _shouldStop flag to true
2025-10-22T21:58:17.1734100Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:17.1734600Z       [TELEMETRY][L001] _shouldStop flag set. RunLoop pointer: 5249323696
2025-10-22T21:58:17.1753450Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:17.1766570Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:58:17.1783650Z       IOHIDManager 5249318064 is scheduled with run loop 5249323696 with mode kCFRunLoopDefaultMode
2025-10-22T21:58:17.1797180Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:17.1804780Z       [TELEMETRY][L001] Calling CFRunLoopStop(5249323696)
2025-10-22T21:58:17.1837160Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:17.1858140Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:58:17.1859960Z       Flushed existing devices.
2025-10-22T21:58:17.1867590Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:17.1876450Z       [TELEMETRY][L001] CFRunLoopStop() returned
2025-10-22T21:58:17.1890280Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:17.1897450Z       [TELEMETRY][L001] Waiting for thread to exit (1 second timeout)...
2025-10-22T21:58:17.1902340Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:17.1907530Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:58:17.1909270Z       [TELEMETRY][L001] Entering run loop. _shouldStop=True
2025-10-22T21:58:17.1921860Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:17.1927990Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:58:17.1932450Z       [TELEMETRY][L001] Run loop exited after 0 iterations. _shouldStop=True, finalResult=4
2025-10-22T21:58:17.1936850Z fail: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:17.1940770Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:58:17.1951210Z       The run loop was terminated for an unexpected reason: 4
2025-10-22T21:58:17.1956270Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:17.1960420Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:58:17.1964840Z       [TELEMETRY][L001] Listener thread finally block - cleaning up native resources
2025-10-22T21:58:17.1972110Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:17.1977710Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:58:17.1983100Z       [TELEMETRY][L001] Unscheduling IOHIDManager from run loop
2025-10-22T21:58:17.1987000Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:17.1991530Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:58:17.2006250Z       [TELEMETRY][L001] IOHIDManager unscheduled from run loop
2025-10-22T21:58:17.2011320Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:17.2014820Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:58:17.2018690Z       [TELEMETRY][L001] Releasing IOHIDManager
2025-10-22T21:58:17.2023090Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:17.2035540Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:58:17.2039090Z       [TELEMETRY][L001] IOHIDManager released
2025-10-22T21:58:17.2039680Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:17.2040290Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:58:17.2040780Z       [TELEMETRY][L001] Releasing run loop mode CFString
2025-10-22T21:58:17.2041310Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:17.2041750Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:58:17.2042120Z       [TELEMETRY][L001] Run loop mode CFString released
2025-10-22T21:58:17.2042550Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:17.2042920Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:58:17.2043900Z       [TELEMETRY][L001] Listener thread cleanup complete - thread exiting
2025-10-22T21:58:17.2046010Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:17.2049700Z       [TELEMETRY][L001] Thread exited successfully after 0ms
2025-10-22T21:58:17.2050310Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:17.2050690Z       [TELEMETRY][L001] StopListening() complete
2025-10-22T21:58:17.2051320Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:17.2051720Z       [TELEMETRY][L001] StopListening() returned successfully
2025-10-22T21:58:17.2052150Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:17.2052510Z       [TELEMETRY][L001] Calling base.Dispose(True)
2025-10-22T21:58:17.2126300Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:17.2126720Z       [TELEMETRY][L001] <<< DISPOSE-EXIT: Complete
2025-10-22T21:58:17.2138770Z [xUnit.net 00:00:00.58]   Finished:    Yubico.Core.UnitTests
2025-10-22T21:58:17.2139410Z   Passed Yubico.Core.Devices.Hid.UnitTests.MacOSHidDeviceListenerDisposalTests.Dispose_ClearsDelegateReferences [143 ms]
2025-10-22T21:58:17.2139960Z   Standard Output Messages:
2025-10-22T21:58:17.2140260Z  === TEST START: Dispose_ClearsDelegateReferences ===
2025-10-22T21:58:17.2140650Z  [USING-ENTRY] Test=Dispose_ClearsDelegateReferences, Thread=12
2025-10-22T21:58:17.2141100Z  [USING-BODY] Test=Dispose_ClearsDelegateReferences, Listener=L001, Thread=12
2025-10-22T21:58:17.2141490Z  [TEST] Created listener: L001
2025-10-22T21:58:17.2141780Z  [TEST] Disposing listener: L001
2025-10-22T21:58:17.2142170Z  [TEST] Dispose() completed on L001
2025-10-22T21:58:17.2142480Z  [TEST] Forcing GC to collect delegates for L001
2025-10-22T21:58:17.2142810Z  [TEST] Delegates properly released for L001
2025-10-22T21:58:17.2143200Z  [USING-EXIT] Test=Dispose_ClearsDelegateReferences, Listener=L001, Thread=12
2025-10-22T21:58:17.2143630Z 
2025-10-22T21:58:17.2143730Z 
2025-10-22T21:58:17.2143840Z 
2025-10-22T21:58:17.2144010Z Test Run Successful.
2025-10-22T21:58:17.2144300Z Total tests: 1
2025-10-22T21:58:17.2144630Z      Passed: 1
2025-10-22T21:58:17.2144860Z  Total time: 1.7699 Seconds
2025-10-22T21:58:17.2220470Z ##[group]Run actions/upload-artifact@v4
2025-10-22T21:58:17.2220680Z with:
2025-10-22T21:58:17.2220840Z   name: Logs-Test12-Dispose_ClearsDelegateReferences
2025-10-22T21:58:17.2221060Z   path: **/TestResults/*
2025-10-22T21:58:17.2221300Z   if-no-files-found: warn
2025-10-22T21:58:17.2221590Z   compression-level: 6
2025-10-22T21:58:17.2221800Z   overwrite: false
2025-10-22T21:58:17.2222010Z   include-hidden-files: false
2025-10-22T21:58:17.2222170Z env:
2025-10-22T21:58:17.2222450Z   DOTNET_ROOT: /Users/runner/.dotnet
2025-10-22T21:58:17.2222720Z ##[endgroup]
2025-10-22T21:58:18.4230570Z ##[warning]No files were found with the provided path: **/TestResults/*. No artifacts will be uploaded.
2025-10-22T21:58:18.4390620Z Post job cleanup.
2025-10-22T21:58:18.6165860Z Post job cleanup.
2025-10-22T21:58:18.7234710Z [command]/opt/homebrew/bin/git version
2025-10-22T21:58:18.7983480Z git version 2.50.1
2025-10-22T21:58:18.8027260Z Copying '/Users/runner/.gitconfig' to '/Users/runner/work/_temp/891d0c7e-124b-42d8-a366-e81ab94b6942/.gitconfig'
2025-10-22T21:58:18.8034560Z Temporarily overriding HOME='/Users/runner/work/_temp/891d0c7e-124b-42d8-a366-e81ab94b6942' before making global git config changes
2025-10-22T21:58:18.8035510Z Adding repository directory to the temporary git global config as a safe directory
2025-10-22T21:58:18.8039050Z [command]/opt/homebrew/bin/git config --global --add safe.directory /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK
2025-10-22T21:58:18.8156220Z [command]/opt/homebrew/bin/git config --local --name-only --get-regexp core\.sshCommand
2025-10-22T21:58:18.8277740Z [command]/opt/homebrew/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'core\.sshCommand' && git config --local --unset-all 'core.sshCommand' || :"
2025-10-22T21:58:18.9365020Z [command]/opt/homebrew/bin/git config --local --name-only --get-regexp http\.https\:\/\/github\.com\/\.extraheader
2025-10-22T21:58:18.9420720Z http.https://github.com/.extraheader
2025-10-22T21:58:18.9429790Z [command]/opt/homebrew/bin/git config --local --unset-all http.https://github.com/.extraheader
2025-10-22T21:58:18.9495160Z [command]/opt/homebrew/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'http\.https\:\/\/github\.com\/\.extraheader' && git config --local --unset-all 'http.https://github.com/.extraheader' || :"
2025-10-22T21:58:19.0288540Z Cleaning up orphan processes
2025-10-22T21:58:19.1965170Z Terminate orphan process: pid (15360) (dotnet)
