2025-10-22T21:57:52.6579720Z ##[group]Run dotnet test Yubico.Core/tests/Yubico.Core.UnitTests.csproj --filter "FullyQualifiedName~MacOSHidDeviceListenerDisposalTests.Dispose_StopsIOKitCallbacks" --logger "console;verbosity=detailed"
2025-10-22T21:57:52.6581000Z [36;1mdotnet test Yubico.Core/tests/Yubico.Core.UnitTests.csproj --filter "FullyQualifiedName~MacOSHidDeviceListenerDisposalTests.Dispose_StopsIOKitCallbacks" --logger "console;verbosity=detailed"[0m
2025-10-22T21:57:52.6612800Z shell: /bin/bash -e {0}
2025-10-22T21:57:52.6612960Z env:
2025-10-22T21:57:52.6613150Z   DOTNET_ROOT: /Users/runner/.dotnet
2025-10-22T21:57:52.6613360Z   Logging__LogLevel__Default: Information
2025-10-22T21:57:52.6613620Z   Logging__LogLevel__Yubico: Information
2025-10-22T21:57:52.6613820Z ##[endgroup]
2025-10-22T21:57:53.2320010Z   Determining projects to restore...
2025-10-22T21:57:57.2837430Z   Restored /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/Yubico.Core/tests/Yubico.Core.UnitTests.csproj (in 3.07 sec).
2025-10-22T21:57:57.7623180Z   Restored /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/Yubico.Core/src/Yubico.Core.csproj (in 3.57 sec).
2025-10-22T21:58:02.1145410Z   Yubico.Core -> /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/Yubico.Core/src/bin/Debug/netstandard2.1/Yubico.Core.dll
2025-10-22T21:58:04.1922610Z   Yubico.Core.UnitTests -> /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/Yubico.Core/tests/bin/Debug/net8.0/Yubico.Core.UnitTests.dll
2025-10-22T21:58:04.2033460Z Test run for /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/Yubico.Core/tests/bin/Debug/net8.0/Yubico.Core.UnitTests.dll (.NETCoreApp,Version=v8.0)
2025-10-22T21:58:04.3896770Z VSTest version 17.14.1 (arm64)
2025-10-22T21:58:04.3902700Z 
2025-10-22T21:58:04.4708830Z Starting test execution, please wait...
2025-10-22T21:58:04.4892200Z A total of 1 test files matched the specified pattern.
2025-10-22T21:58:04.4893390Z /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/Yubico.Core/tests/bin/Debug/net8.0/Yubico.Core.UnitTests.dll
2025-10-22T21:58:05.1137630Z [xUnit.net 00:00:00.00] xUnit.net VSTest Adapter v3.1.5+1b188a7b0a (64-bit .NET 8.0.21)
2025-10-22T21:58:05.1631270Z [xUnit.net 00:00:00.06]   Discovering: Yubico.Core.UnitTests
2025-10-22T21:58:05.2759780Z [xUnit.net 00:00:00.17]   Discovered:  Yubico.Core.UnitTests
2025-10-22T21:58:05.2904980Z [xUnit.net 00:00:00.18]   Starting:    Yubico.Core.UnitTests
2025-10-22T21:58:05.3602270Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:05.3608760Z       [TELEMETRY][L001] MacOSHidDeviceListener constructor called on thread 7
2025-10-22T21:58:05.3610210Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:05.3650420Z       [TELEMETRY][L001] StartListening() called, creating background thread
2025-10-22T21:58:05.3663580Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:05.3664230Z       [TELEMETRY][L001] Background thread started
2025-10-22T21:58:05.3667070Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:05.3667770Z       [TELEMETRY][L001] MacOSHidDeviceListener constructor complete
2025-10-22T21:58:05.3668490Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:05.3672820Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:58:05.3674120Z       HID listener thread started. ThreadID is 18.
2025-10-22T21:58:05.3719600Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:05.3741880Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:58:05.3744610Z       IOHIDManager 4339163776 is scheduled with run loop 4561440304 with mode kCFRunLoopDefaultMode
2025-10-22T21:58:05.3756390Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:05.3765870Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:58:05.3766720Z       Flushed existing devices.
2025-10-22T21:58:05.3793520Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:05.3824500Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:58:05.3833300Z       [TELEMETRY][L001] Entering run loop. _shouldStop=False
2025-10-22T21:58:05.3856030Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:05.3878510Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:58:05.3888360Z       [TELEMETRY][L001] Loop iter 1: _shouldStop=False, prevResult=4, calling CFRunLoopRunInMode...
2025-10-22T21:58:05.3897950Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:05.3913670Z       [TELEMETRY][L001] >>> DISPOSE-ENTRY: disposing=True, thread=7, _isDisposed=False, _shouldStop=False
2025-10-22T21:58:05.3941790Z         CallStack:
2025-10-22T21:58:05.3961090Z          at Yubico.Core.Devices.Hid.MacOSHidDeviceListener.Dispose(Boolean disposing) in /_/Yubico.Core/src/Yubico/Core/Devices/Hid/MacOSHidDeviceListener.cs:line 154
2025-10-22T21:58:05.3974040Z          at Yubico.Core.Devices.Hid.HidDeviceListener.Dispose() in /_/Yubico.Core/src/Yubico/Core/Devices/Hid/HidDeviceListener.cs:line 153
2025-10-22T21:58:05.3993680Z          at Yubico.Core.Devices.Hid.UnitTests.MacOSHidDeviceListenerDisposalTests.Dispose_StopsIOKitCallbacks() in /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/Yubico.Core/tests/Yubico/Core/Devices/Hid/MacOSHidDeviceListenerDisposalTests.cs:line 423
2025-10-22T21:58:05.4000090Z          at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
2025-10-22T21:58:05.4001240Z          at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
2025-10-22T21:58:05.4002300Z          at Xunit.Sdk.TestInvoker`1.CallTestMethod(Object testClassInstance) in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestInvoker.cs:line 149
2025-10-22T21:58:05.4003450Z          at Xunit.Sdk.TestInvoker`1.<>c__DisplayClass47_0.<<InvokeTestMethodAsync>b__1>d.MoveNext() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestInvoker.cs:line 256
2025-10-22T21:58:05.4004500Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:58:05.4013810Z          at Xunit.Sdk.TestInvoker`1.<>c__DisplayClass47_0.<InvokeTestMethodAsync>b__1()
2025-10-22T21:58:05.4014850Z          at Xunit.Sdk.ExecutionTimer.AggregateAsync(Func`1 asyncAction) in /_/src/xunit.execution/Sdk/Frameworks/ExecutionTimer.cs:line 48
2025-10-22T21:58:05.4015880Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:58:05.4016820Z          at Xunit.Sdk.ExecutionTimer.AggregateAsync(Func`1 asyncAction)
2025-10-22T21:58:05.4017710Z          at Xunit.Sdk.TestInvoker`1.<>c__DisplayClass47_0.<InvokeTestMethodAsync>b__0() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestInvoker.cs:line 215
2025-10-22T21:58:05.4018660Z          at Xunit.Sdk.ExceptionAggregator.RunAsync(Func`1 code) in /_/src/xunit.core/Sdk/ExceptionAggregator.cs:line 90
2025-10-22T21:58:05.4019690Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:58:05.4020500Z          at Xunit.Sdk.ExceptionAggregator.RunAsync(Func`1 code)
2025-10-22T21:58:05.4021590Z          at Xunit.Sdk.TestInvoker`1.InvokeTestMethodAsync(Object testClassInstance) in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestInvoker.cs:line 214
2025-10-22T21:58:05.4022540Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:58:05.4023340Z          at Xunit.Sdk.TestInvoker`1.InvokeTestMethodAsync(Object testClassInstance)
2025-10-22T21:58:05.4024300Z          at Xunit.Sdk.XunitTestInvoker.InvokeTestMethodAsync(Object testClassInstance) in /_/src/xunit.execution/Sdk/Frameworks/Runners/XunitTestInvoker.cs:line 112
2025-10-22T21:58:05.4025270Z          at Xunit.Sdk.TestInvoker`1.<RunAsync>b__46_0() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestInvoker.cs:line 180
2025-10-22T21:58:05.4026100Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:58:05.4027320Z          at Xunit.Sdk.TestInvoker`1.<RunAsync>b__46_0()
2025-10-22T21:58:05.4028020Z          at Xunit.Sdk.ExceptionAggregator.RunAsync[T](Func`1 code) in /_/src/xunit.core/Sdk/ExceptionAggregator.cs:line 107
2025-10-22T21:58:05.4028870Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:58:05.4029960Z          at Xunit.Sdk.ExceptionAggregator.RunAsync[T](Func`1 code)
2025-10-22T21:58:05.4030690Z          at Xunit.Sdk.TestInvoker`1.RunAsync() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestInvoker.cs:line 163
2025-10-22T21:58:05.4031660Z          at Xunit.Sdk.XunitTestRunner.InvokeTestMethodAsync(ExceptionAggregator aggregator) in /_/src/xunit.execution/Sdk/Frameworks/Runners/XunitTestRunner.cs:line 88
2025-10-22T21:58:05.4032910Z          at Xunit.Sdk.XunitTestRunner.InvokeTestAsync(ExceptionAggregator aggregator) in /_/src/xunit.execution/Sdk/Frameworks/Runners/XunitTestRunner.cs:line 70
2025-10-22T21:58:05.4033890Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:58:05.4034780Z          at Xunit.Sdk.XunitTestRunner.InvokeTestAsync(ExceptionAggregator aggregator)
2025-10-22T21:58:05.4035670Z          at Xunit.Sdk.TestRunner`1.<>c__DisplayClass43_0.<RunAsync>b__0() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestRunner.cs:line 149
2025-10-22T21:58:05.4036570Z          at Xunit.Sdk.ExceptionAggregator.RunAsync[T](Func`1 code) in /_/src/xunit.core/Sdk/ExceptionAggregator.cs:line 107
2025-10-22T21:58:05.4037210Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:58:05.4038040Z          at Xunit.Sdk.ExceptionAggregator.RunAsync[T](Func`1 code)
2025-10-22T21:58:05.4038730Z          at Xunit.Sdk.TestRunner`1.RunAsync() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestRunner.cs:line 149
2025-10-22T21:58:05.4039960Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:58:05.4048370Z          at Xunit.Sdk.TestRunner`1.RunAsync()
2025-10-22T21:58:05.4049160Z          at Xunit.Sdk.XunitTestCaseRunner.RunTestAsync() in /_/src/xunit.execution/Sdk/Frameworks/Runners/XunitTestCaseRunner.cs:line 140
2025-10-22T21:58:05.4050290Z          at Xunit.Sdk.TestCaseRunner`1.RunAsync() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestCaseRunner.cs:line 82
2025-10-22T21:58:05.4051340Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:58:05.4052030Z          at Xunit.Sdk.TestCaseRunner`1.RunAsync()
2025-10-22T21:58:05.4053250Z          at Xunit.Sdk.XunitTestCase.RunAsync(IMessageSink diagnosticMessageSink, IMessageBus messageBus, Object[] constructorArguments, ExceptionAggregator aggregator, CancellationTokenSource cancellationTokenSource) in /_/src/xunit.execution/Sdk/Frameworks/XunitTestCase.cs:line 170
2025-10-22T21:58:05.4055300Z          at Xunit.Sdk.SkippableFactTestCase.<>n__0(IMessageSink diagnosticMessageSink, IMessageBus messageBus, Object[] constructorArguments, ExceptionAggregator aggregator, CancellationTokenSource cancellationTokenSource)
2025-10-22T21:58:05.4057010Z          at Xunit.Sdk.SkippableFactTestCase.RunAsync(IMessageSink diagnosticMessageSink, IMessageBus messageBus, Object[] constructorArguments, ExceptionAggregator aggregator, CancellationTokenSource cancellationTokenSource)
2025-10-22T21:58:05.4057960Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:58:05.4059180Z          at Xunit.Sdk.SkippableFactTestCase.RunAsync(IMessageSink diagnosticMessageSink, IMessageBus messageBus, Object[] constructorArguments, ExceptionAggregator aggregator, CancellationTokenSource cancellationTokenSource)
2025-10-22T21:58:05.4060620Z          at Xunit.Sdk.XunitTestMethodRunner.RunTestCaseAsync(IXunitTestCase testCase) in /_/src/xunit.execution/Sdk/Frameworks/Runners/XunitTestMethodRunner.cs:line 45
2025-10-22T21:58:05.4062230Z          at Xunit.Sdk.TestMethodRunner`1.RunTestCasesAsync() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestMethodRunner.cs:line 136
2025-10-22T21:58:05.4066230Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:58:05.4067580Z          at Xunit.Sdk.TestMethodRunner`1.RunTestCasesAsync()
2025-10-22T21:58:05.4068220Z          at Xunit.Sdk.TestMethodRunner`1.RunAsync() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestMethodRunner.cs:line 106
2025-10-22T21:58:05.4069160Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:58:05.4069660Z          at Xunit.Sdk.TestMethodRunner`1.RunAsync()
2025-10-22T21:58:05.4070560Z          at Xunit.Sdk.XunitTestClassRunner.RunTestMethodAsync(ITestMethod testMethod, IReflectionMethodInfo method, IEnumerable`1 testCases, Object[] constructorArguments) in /_/src/xunit.execution/Sdk/Frameworks/Runners/XunitTestClassRunner.cs:line 206
2025-10-22T21:58:05.4071620Z          at Xunit.Sdk.TestClassRunner`1.RunTestMethodsAsync()
2025-10-22T21:58:05.4072200Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:58:05.4072770Z          at Xunit.Sdk.TestClassRunner`1.RunTestMethodsAsync()
2025-10-22T21:58:05.4073420Z          at Xunit.Sdk.TestClassRunner`1.RunAsync() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestClassRunner.cs:line 175
2025-10-22T21:58:05.4074110Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:58:05.4074750Z          at Xunit.Sdk.TestClassRunner`1.RunAsync()
2025-10-22T21:58:05.4075640Z          at Xunit.Sdk.XunitTestCollectionRunner.RunTestClassAsync(ITestClass testClass, IReflectionTypeInfo class, IEnumerable`1 testCases) in /_/src/xunit.execution/Sdk/Frameworks/Runners/XunitTestCollectionRunner.cs:line 185
2025-10-22T21:58:05.4076970Z          at Xunit.Sdk.TestCollectionRunner`1.RunTestClassesAsync()
2025-10-22T21:58:05.4082330Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:58:05.4083190Z          at Xunit.Sdk.TestCollectionRunner`1.RunTestClassesAsync()
2025-10-22T21:58:05.4084010Z          at Xunit.Sdk.TestCollectionRunner`1.RunAsync() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestCollectionRunner.cs:line 101
2025-10-22T21:58:05.4085140Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:58:05.4085860Z          at Xunit.Sdk.TestCollectionRunner`1.RunAsync()
2025-10-22T21:58:05.4087120Z          at Xunit.Sdk.XunitTestAssemblyRunner.RunTestCollectionAsync(IMessageBus messageBus, ITestCollection testCollection, IEnumerable`1 testCases, CancellationTokenSource cancellationTokenSource) in /_/src/xunit.execution/Sdk/Frameworks/Runners/XunitTestAssemblyRunner.cs:line 346
2025-10-22T21:58:05.4088850Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:58:05.4090210Z          at Xunit.Sdk.XunitTestAssemblyRunner.RunTestCollectionAsync(IMessageBus messageBus, ITestCollection testCollection, IEnumerable`1 testCases, CancellationTokenSource cancellationTokenSource)
2025-10-22T21:58:05.4091610Z          at Xunit.Sdk.XunitTestAssemblyRunner.<>c__DisplayClass16_2.<RunTestCollectionsAsync>b__2() in /_/src/xunit.execution/Sdk/Frameworks/Runners/XunitTestAssemblyRunner.cs:line 250
2025-10-22T21:58:05.4092520Z          at System.Threading.Tasks.Task`1.InnerInvoke()
2025-10-22T21:58:05.4094820Z          at System.Threading.ExecutionContext.RunFromThreadPoolDispatchLoop(Thread threadPoolThread, ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-22T21:58:05.4101910Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-22T21:58:05.4110010Z          at System.Threading.ThreadPoolWorkQueue.Dispatch()
2025-10-22T21:58:05.4110850Z          at System.Threading.PortableThreadPool.WorkerThread.WorkerThreadStart()
2025-10-22T21:58:05.4111460Z          at System.Threading.Thread.StartCallback()
2025-10-22T21:58:05.4112550Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:05.4113210Z       [TELEMETRY][L001] Setting _isDisposed = true
2025-10-22T21:58:05.4113800Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:05.4114580Z       [TELEMETRY][L001] Calling StopListening(fromFinalizer=False)...
2025-10-22T21:58:05.4115370Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:05.4116080Z       [TELEMETRY][L001] StopListening(fromFinalizer=False) called
2025-10-22T21:58:05.4116780Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:05.4117470Z       [TELEMETRY][L001] Setting _shouldStop flag to true
2025-10-22T21:58:05.4118130Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:05.4118850Z       [TELEMETRY][L001] _shouldStop flag set. RunLoop pointer: 4561440304
2025-10-22T21:58:05.4119630Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:05.4120290Z       [TELEMETRY][L001] Calling CFRunLoopStop(4561440304)
2025-10-22T21:58:05.4120920Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:05.4121700Z       [TELEMETRY][L001] CFRunLoopStop() returned
2025-10-22T21:58:05.4122360Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:05.4122960Z       [TELEMETRY][L001] Waiting for thread to exit (1 second timeout)...
2025-10-22T21:58:05.4123750Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:05.4124380Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:58:05.4125070Z       [TELEMETRY][L001] Loop iter 1: CFRunLoopRunInMode returned 2 after 6ms
2025-10-22T21:58:05.4125770Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:05.4126420Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:58:05.4127080Z       [TELEMETRY][L001] Run loop exited after 1 iterations. _shouldStop=True, finalResult=2
2025-10-22T21:58:05.4127800Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:05.4128490Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:58:05.4129200Z       [TELEMETRY][L001] Listener thread finally block - cleaning up native resources
2025-10-22T21:58:05.4130020Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:05.4130790Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:58:05.4131390Z       [TELEMETRY][L001] Unscheduling IOHIDManager from run loop
2025-10-22T21:58:05.4132010Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:05.4132690Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:58:05.4133330Z       [TELEMETRY][L001] IOHIDManager unscheduled from run loop
2025-10-22T21:58:05.4133990Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:05.4134610Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:58:05.4135260Z       [TELEMETRY][L001] Releasing IOHIDManager
2025-10-22T21:58:05.4135720Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:05.4136060Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:58:05.4136780Z       [TELEMETRY][L001] IOHIDManager released
2025-10-22T21:58:05.4137500Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:05.4138050Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:58:05.4138750Z       [TELEMETRY][L001] Releasing run loop mode CFString
2025-10-22T21:58:05.4139330Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:05.4140020Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:58:05.4140600Z       [TELEMETRY][L001] Run loop mode CFString released
2025-10-22T21:58:05.4141770Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:05.4142490Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:58:05.4143120Z       [TELEMETRY][L001] Listener thread cleanup complete - thread exiting
2025-10-22T21:58:05.4143830Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:05.4144580Z       [TELEMETRY][L001] Thread exited successfully after 0ms
2025-10-22T21:58:05.4145220Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:05.4145740Z       [TELEMETRY][L001] StopListening() complete
2025-10-22T21:58:05.4146320Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:05.4146890Z       [TELEMETRY][L001] StopListening() returned successfully
2025-10-22T21:58:05.4147480Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:05.4148020Z       [TELEMETRY][L001] Calling base.Dispose(True)
2025-10-22T21:58:05.4148590Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:58:05.4149290Z       [TELEMETRY][L001] <<< DISPOSE-EXIT: Complete
2025-10-22T21:58:05.9471230Z [xUnit.net 00:00:00.84]   Finished:    Yubico.Core.UnitTests
2025-10-22T21:58:06.0151480Z   Passed Yubico.Core.Devices.Hid.UnitTests.MacOSHidDeviceListenerDisposalTests.Dispose_StopsIOKitCallbacks [628 ms]
2025-10-22T21:58:06.0152300Z   Standard Output Messages:
2025-10-22T21:58:06.0152650Z  === TEST START: Dispose_StopsIOKitCallbacks ===
2025-10-22T21:58:06.0153000Z  [USING-ENTRY] Test=Dispose_StopsIOKitCallbacks, Thread=7
2025-10-22T21:58:06.0153470Z  [USING-BODY] Test=Dispose_StopsIOKitCallbacks, Listener=L001, Thread=7
2025-10-22T21:58:06.0153830Z  [TEST] Created listener: L001
2025-10-22T21:58:06.0154090Z  [TEST] Disposing listener: L001
2025-10-22T21:58:06.0154360Z  [TEST] Dispose() completed on L001
2025-10-22T21:58:06.0154650Z  [TEST] Verified no callbacks fired for L001
2025-10-22T21:58:06.0155030Z  [USING-EXIT] Test=Dispose_StopsIOKitCallbacks, Listener=L001, Thread=7
2025-10-22T21:58:06.0155330Z 
2025-10-22T21:58:06.0155420Z 
2025-10-22T21:58:06.0158230Z 
2025-10-22T21:58:06.0177250Z Test Run Successful.
2025-10-22T21:58:06.0177540Z Total tests: 1
2025-10-22T21:58:06.0177770Z      Passed: 1
2025-10-22T21:58:06.0220290Z  Total time: 1.5261 Seconds
