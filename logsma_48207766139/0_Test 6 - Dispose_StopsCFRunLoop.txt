2025-10-22T21:41:46.3391880Z Current runner version: '2.329.0'
2025-10-22T21:41:46.3408900Z ##[group]Runner Image Provisioner
2025-10-22T21:41:46.3409490Z Hosted Compute Agent
2025-10-22T21:41:46.3410000Z Version: 20251016.436
2025-10-22T21:41:46.3410470Z Commit: 8ab8ac8bfd662a3739dab9fe09456aba92132568
2025-10-22T21:41:46.3411020Z Build Date: 2025-10-15T20:44:12Z
2025-10-22T21:41:46.3411510Z ##[endgroup]
2025-10-22T21:41:46.3411920Z ##[group]Operating System
2025-10-22T21:41:46.3412350Z macOS
2025-10-22T21:41:46.3412720Z 15.6.1
2025-10-22T21:41:46.3413190Z 24G90
2025-10-22T21:41:46.3413550Z ##[endgroup]
2025-10-22T21:41:46.3414050Z ##[group]Runner Image
2025-10-22T21:41:46.3414450Z Image: macos-15-arm64
2025-10-22T21:41:46.3414840Z Version: 20251015.0042
2025-10-22T21:41:46.3415600Z Included Software: https://github.com/actions/runner-images/blob/macos-15-arm64/20251015.0042/images/macos/macos-15-arm64-Readme.md
2025-10-22T21:41:46.3416780Z Image Release: https://github.com/actions/runner-images/releases/tag/macos-15-arm64%2F20251015.0042
2025-10-22T21:41:46.3417460Z ##[endgroup]
2025-10-22T21:41:46.3418270Z ##[group]GITHUB_TOKEN Permissions
2025-10-22T21:41:46.3419600Z Contents: read
2025-10-22T21:41:46.3420070Z Metadata: read
2025-10-22T21:41:46.3420440Z Packages: read
2025-10-22T21:41:46.3420820Z ##[endgroup]
2025-10-22T21:41:46.3422310Z Secret source: Actions
2025-10-22T21:41:46.3422790Z Prepare workflow directory
2025-10-22T21:41:46.3740530Z Prepare all required actions
2025-10-22T21:41:46.3770800Z Getting action download info
2025-10-22T21:41:46.6353670Z Download action repository 'actions/checkout@v4' (SHA:08eba0b27e820071cde6df949e0beb9ba4906955)
2025-10-22T21:41:46.9790100Z Download action repository 'actions/setup-dotnet@v4' (SHA:67a3573c9a986a3f9c594539f4ab511d57bb3ce9)
2025-10-22T21:41:48.6004750Z Download action repository 'actions/upload-artifact@v4' (SHA:ea165f8d65b6e75b540449e92b4886f43607fa02)
2025-10-22T21:41:48.7819210Z Complete job name: Test 6 - Dispose_StopsCFRunLoop
2025-10-22T21:41:48.8343250Z ##[group]Run actions/checkout@v4
2025-10-22T21:41:48.8344040Z with:
2025-10-22T21:41:48.8344450Z   repository: Yubico/Yubico.NET.SDK
2025-10-22T21:41:48.8345200Z   token: ***
2025-10-22T21:41:48.8345600Z   ssh-strict: true
2025-10-22T21:41:48.8346030Z   ssh-user: git
2025-10-22T21:41:48.8346430Z   persist-credentials: true
2025-10-22T21:41:48.8346870Z   clean: true
2025-10-22T21:41:48.8347260Z   sparse-checkout-cone-mode: true
2025-10-22T21:41:48.8347720Z   fetch-depth: 1
2025-10-22T21:41:48.8348100Z   fetch-tags: false
2025-10-22T21:41:48.8348930Z   show-progress: true
2025-10-22T21:41:48.8349840Z   lfs: false
2025-10-22T21:41:48.8350640Z   submodules: false
2025-10-22T21:41:48.8351040Z   set-safe-directory: true
2025-10-22T21:41:48.8351900Z ##[endgroup]
2025-10-22T21:41:49.3085920Z Syncing repository: Yubico/Yubico.NET.SDK
2025-10-22T21:41:49.3087920Z ##[group]Getting Git version info
2025-10-22T21:41:49.3088930Z Working directory is '/Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK'
2025-10-22T21:41:49.3090190Z [command]/opt/homebrew/bin/git version
2025-10-22T21:41:49.3602570Z git version 2.50.1
2025-10-22T21:41:49.3655880Z ##[endgroup]
2025-10-22T21:41:49.3662170Z Copying '/Users/runner/.gitconfig' to '/Users/runner/work/_temp/863573d6-dde7-4561-bdc1-f8a664ea7f4b/.gitconfig'
2025-10-22T21:41:49.3664870Z Temporarily overriding HOME='/Users/runner/work/_temp/863573d6-dde7-4561-bdc1-f8a664ea7f4b' before making global git config changes
2025-10-22T21:41:49.3667370Z Adding repository directory to the temporary git global config as a safe directory
2025-10-22T21:41:49.3669740Z [command]/opt/homebrew/bin/git config --global --add safe.directory /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK
2025-10-22T21:41:49.4021760Z Deleting the contents of '/Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK'
2025-10-22T21:41:49.4024900Z ##[group]Initializing the repository
2025-10-22T21:41:49.4028220Z [command]/opt/homebrew/bin/git init /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK
2025-10-22T21:41:49.4117830Z hint: Using 'master' as the name for the initial branch. This default branch name
2025-10-22T21:41:49.4126980Z hint: is subject to change. To configure the initial branch name to use in all
2025-10-22T21:41:49.4149550Z hint: of your new repositories, which will suppress this warning, call:
2025-10-22T21:41:49.4151270Z hint:
2025-10-22T21:41:49.4152320Z hint: 	git config --global init.defaultBranch <name>
2025-10-22T21:41:49.4153850Z hint:
2025-10-22T21:41:49.4154970Z hint: Names commonly chosen instead of 'master' are 'main', 'trunk' and
2025-10-22T21:41:49.4157370Z hint: 'development'. The just-created branch can be renamed via this command:
2025-10-22T21:41:49.4159180Z hint:
2025-10-22T21:41:49.4160060Z hint: 	git branch -m <name>
2025-10-22T21:41:49.4161260Z hint:
2025-10-22T21:41:49.4162520Z hint: Disable this message with "git config set advice.defaultBranchName false"
2025-10-22T21:41:49.4165070Z Initialized empty Git repository in /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/.git/
2025-10-22T21:41:49.4169330Z [command]/opt/homebrew/bin/git remote add origin https://github.com/Yubico/Yubico.NET.SDK
2025-10-22T21:41:49.4206890Z ##[endgroup]
2025-10-22T21:41:49.4208710Z ##[group]Disabling automatic garbage collection
2025-10-22T21:41:49.4210070Z [command]/opt/homebrew/bin/git config --local gc.auto 0
2025-10-22T21:41:49.4308310Z ##[endgroup]
2025-10-22T21:41:49.4310000Z ##[group]Setting up auth
2025-10-22T21:41:49.4311530Z [command]/opt/homebrew/bin/git config --local --name-only --get-regexp core\.sshCommand
2025-10-22T21:41:49.4340350Z [command]/opt/homebrew/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'core\.sshCommand' && git config --local --unset-all 'core.sshCommand' || :"
2025-10-22T21:41:49.6331680Z [command]/opt/homebrew/bin/git config --local --name-only --get-regexp http\.https\:\/\/github\.com\/\.extraheader
2025-10-22T21:41:49.6643590Z [command]/opt/homebrew/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'http\.https\:\/\/github\.com\/\.extraheader' && git config --local --unset-all 'http.https://github.com/.extraheader' || :"
2025-10-22T21:41:49.7573800Z [command]/opt/homebrew/bin/git config --local http.https://github.com/.extraheader AUTHORIZATION: basic ***
2025-10-22T21:41:49.7606470Z ##[endgroup]
2025-10-22T21:41:49.7607700Z ##[group]Fetching the repository
2025-10-22T21:41:49.7613700Z [command]/opt/homebrew/bin/git -c protocol.version=2 fetch --no-tags --prune --no-recurse-submodules --depth=1 origin +61edcc0f6126c293f1d4612607aa535e18b7d3f1:refs/remotes/origin/experiment/isolate-disposal-hang
2025-10-22T21:41:50.9847140Z From https://github.com/Yubico/Yubico.NET.SDK
2025-10-22T21:41:50.9848320Z  * [new ref]         61edcc0f6126c293f1d4612607aa535e18b7d3f1 -> origin/experiment/isolate-disposal-hang
2025-10-22T21:41:50.9912180Z ##[endgroup]
2025-10-22T21:41:50.9912620Z ##[group]Determining the checkout info
2025-10-22T21:41:50.9913070Z ##[endgroup]
2025-10-22T21:41:50.9920400Z [command]/opt/homebrew/bin/git sparse-checkout disable
2025-10-22T21:41:51.0006030Z [command]/opt/homebrew/bin/git config --local --unset-all extensions.worktreeConfig
2025-10-22T21:41:51.0052490Z ##[group]Checking out the ref
2025-10-22T21:41:51.0055190Z [command]/opt/homebrew/bin/git checkout --progress --force -B experiment/isolate-disposal-hang refs/remotes/origin/experiment/isolate-disposal-hang
2025-10-22T21:41:51.2243760Z Switched to a new branch 'experiment/isolate-disposal-hang'
2025-10-22T21:41:51.2348950Z branch 'experiment/isolate-disposal-hang' set up to track 'origin/experiment/isolate-disposal-hang'.
2025-10-22T21:41:51.2565940Z ##[endgroup]
2025-10-22T21:41:51.2888900Z [command]/opt/homebrew/bin/git log -1 --format=%H
2025-10-22T21:41:51.2990210Z 61edcc0f6126c293f1d4612607aa535e18b7d3f1
2025-10-22T21:41:51.3540950Z ##[group]Run actions/setup-dotnet@v4
2025-10-22T21:41:51.3541190Z with:
2025-10-22T21:41:51.3541330Z   global-json-file: ./global.json
2025-10-22T21:41:51.3541610Z   cache: false
2025-10-22T21:41:51.3541780Z ##[endgroup]
2025-10-22T21:41:51.5428470Z [command]/Users/runner/work/_actions/actions/setup-dotnet/v4/externals/install-dotnet.sh --skip-non-versioned-files --runtime dotnet --channel LTS
2025-10-22T21:41:52.4772350Z dotnet-install: .NET Core Runtime with version '8.0.21' is already installed.
2025-10-22T21:41:52.4807520Z [command]/Users/runner/work/_actions/actions/setup-dotnet/v4/externals/install-dotnet.sh --skip-non-versioned-files --channel 9.0
2025-10-22T21:41:53.3310330Z dotnet-install: .NET Core SDK with version '9.0.306' is already installed.
2025-10-22T21:41:53.3445540Z ##[group]Run dotnet nuget add source --username DennisDyallo --password *** --store-password-in-clear-text --name github "https://nuget.pkg.github.com/Yubico/index.json"
2025-10-22T21:41:53.3448930Z [36;1mdotnet nuget add source --username DennisDyallo --password *** --store-password-in-clear-text --name github "https://nuget.pkg.github.com/Yubico/index.json"[0m
2025-10-22T21:41:53.3545070Z shell: /bin/bash -e {0}
2025-10-22T21:41:53.3545330Z env:
2025-10-22T21:41:53.3545620Z   DOTNET_ROOT: /Users/runner/.dotnet
2025-10-22T21:41:53.3545850Z ##[endgroup]
2025-10-22T21:41:54.0220160Z 
2025-10-22T21:41:54.0341160Z Welcome to .NET 9.0!
2025-10-22T21:41:54.0347300Z ---------------------
2025-10-22T21:41:54.0347700Z SDK Version: 9.0.306
2025-10-22T21:41:54.0348540Z 
2025-10-22T21:41:54.0349650Z Telemetry
2025-10-22T21:41:54.0350050Z ---------
2025-10-22T21:41:54.0351130Z The .NET tools collect usage data in order to help us improve your experience. It is collected by Microsoft and shared with the community. You can opt-out of telemetry by setting the DOTNET_CLI_TELEMETRY_OPTOUT environment variable to '1' or 'true' using your favorite shell.
2025-10-22T21:41:54.0352470Z 
2025-10-22T21:41:54.0352850Z Read more about .NET CLI Tools telemetry: https://aka.ms/dotnet-cli-telemetry
2025-10-22T21:41:54.8262860Z 
2025-10-22T21:41:54.8263520Z ----------------
2025-10-22T21:41:54.8264290Z Installed an ASP.NET Core HTTPS development certificate.
2025-10-22T21:41:54.8265090Z To trust the certificate, run 'dotnet dev-certs https --trust'
2025-10-22T21:41:54.8269770Z Learn about HTTPS: https://aka.ms/dotnet-https
2025-10-22T21:41:54.8271930Z 
2025-10-22T21:41:54.8277920Z ----------------
2025-10-22T21:41:54.8278360Z Write your first app: https://aka.ms/dotnet-hello-world
2025-10-22T21:41:54.8279040Z Find out what's new: https://aka.ms/dotnet-whats-new
2025-10-22T21:41:54.8281880Z Explore documentation: https://aka.ms/dotnet-docs
2025-10-22T21:41:54.8282770Z Report issues and find source on GitHub: https://github.com/dotnet/core
2025-10-22T21:41:54.8283550Z Use 'dotnet --help' to see available commands or visit: https://aka.ms/dotnet-cli
2025-10-22T21:41:54.8284270Z --------------------------------------------------------------------------------------
2025-10-22T21:41:55.1129860Z Package source with Name: github added successfully.
2025-10-22T21:41:55.2006030Z ##[group]Run brew install openssl
2025-10-22T21:41:55.2006410Z [36;1mbrew install openssl[0m
2025-10-22T21:41:55.2006680Z [36;1msudo mkdir -p /usr/local/lib[0m
2025-10-22T21:41:55.2007270Z [36;1msudo ln -s $(brew --prefix)/opt/openssl@3/lib/libcrypto.3.dylib /usr/local/lib/libcrypto.3.dylib[0m
2025-10-22T21:41:55.2007930Z [36;1msudo ln -s $(brew --prefix)/opt/openssl@3/lib/libssl.3.dylib /usr/local/lib/libssl.3.dylib[0m
2025-10-22T21:41:55.2051500Z shell: /bin/bash -e {0}
2025-10-22T21:41:55.2051790Z env:
2025-10-22T21:41:55.2052020Z   DOTNET_ROOT: /Users/runner/.dotnet
2025-10-22T21:41:55.2052270Z ##[endgroup]
2025-10-22T21:41:59.8786770Z ##[warning]openssl@3 3.6.0 is already installed and up-to-date.
To reinstall 3.6.0, run:
  brew reinstall openssl@3

2025-10-22T21:42:00.1464290Z ##[group]Run dotnet test Yubico.Core/tests/Yubico.Core.UnitTests.csproj --filter "FullyQualifiedName~MacOSHidDeviceListenerDisposalTests.Dispose_StopsCFRunLoop" --logger "console;verbosity=detailed"
2025-10-22T21:42:00.1465490Z [36;1mdotnet test Yubico.Core/tests/Yubico.Core.UnitTests.csproj --filter "FullyQualifiedName~MacOSHidDeviceListenerDisposalTests.Dispose_StopsCFRunLoop" --logger "console;verbosity=detailed"[0m
2025-10-22T21:42:00.1566970Z shell: /bin/bash -e {0}
2025-10-22T21:42:00.1567240Z env:
2025-10-22T21:42:00.1567460Z   DOTNET_ROOT: /Users/runner/.dotnet
2025-10-22T21:42:00.1567750Z   Logging__LogLevel__Default: Information
2025-10-22T21:42:00.1568140Z   Logging__LogLevel__Yubico: Information
2025-10-22T21:42:00.1568400Z ##[endgroup]
2025-10-22T21:42:01.1275020Z   Determining projects to restore...
2025-10-22T21:42:06.5359490Z   Restored /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/Yubico.Core/tests/Yubico.Core.UnitTests.csproj (in 4.92 sec).
2025-10-22T21:42:06.5661730Z   Restored /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/Yubico.Core/src/Yubico.Core.csproj (in 4.97 sec).
2025-10-22T21:42:14.7208310Z   Yubico.Core -> /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/Yubico.Core/src/bin/Debug/netstandard2.1/Yubico.Core.dll
2025-10-22T21:42:18.5613790Z   Yubico.Core.UnitTests -> /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/Yubico.Core/tests/bin/Debug/net8.0/Yubico.Core.UnitTests.dll
2025-10-22T21:42:18.5771470Z Test run for /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/Yubico.Core/tests/bin/Debug/net8.0/Yubico.Core.UnitTests.dll (.NETCoreApp,Version=v8.0)
2025-10-22T21:42:18.8474670Z VSTest version 17.14.1 (arm64)
2025-10-22T21:42:18.8480690Z 
2025-10-22T21:42:19.0938570Z Starting test execution, please wait...
2025-10-22T21:42:19.1397230Z A total of 1 test files matched the specified pattern.
2025-10-22T21:42:19.1451750Z /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/Yubico.Core/tests/bin/Debug/net8.0/Yubico.Core.UnitTests.dll
2025-10-22T21:42:20.1317460Z [xUnit.net 00:00:00.00] xUnit.net VSTest Adapter v3.1.5+1b188a7b0a (64-bit .NET 8.0.21)
2025-10-22T21:42:20.2197410Z [xUnit.net 00:00:00.12]   Discovering: Yubico.Core.UnitTests
2025-10-22T21:42:20.3929810Z [xUnit.net 00:00:00.29]   Discovered:  Yubico.Core.UnitTests
2025-10-22T21:42:20.4335940Z [xUnit.net 00:00:00.32]   Starting:    Yubico.Core.UnitTests
2025-10-22T21:42:20.5584540Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:20.5626590Z       [TELEMETRY][L001] MacOSHidDeviceListener constructor called on thread 13
2025-10-22T21:42:20.5678690Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:20.5715380Z       [TELEMETRY][L001] StartListening() called, creating background thread
2025-10-22T21:42:20.5716650Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:20.5718480Z       [TELEMETRY][L001] Background thread started
2025-10-22T21:42:20.5723650Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:20.5724330Z       [TELEMETRY][L001] MacOSHidDeviceListener constructor complete
2025-10-22T21:42:20.5750620Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:20.5752390Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:20.5756800Z       HID listener thread started. ThreadID is 18.
2025-10-22T21:42:20.5870570Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:20.5872400Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:20.5873820Z       IOHIDManager 5282846352 is scheduled with run loop 4746044944 with mode kCFRunLoopDefaultMode
2025-10-22T21:42:20.5875830Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:20.5877120Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:20.5878250Z       Flushed existing devices.
2025-10-22T21:42:20.5879490Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:20.5880620Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:20.5884220Z       [TELEMETRY][L001] Entering run loop. _shouldStop=False
2025-10-22T21:42:20.5885830Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:20.5886960Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:20.5888290Z       [TELEMETRY][L001] Loop iter 1: _shouldStop=False, prevResult=4, calling CFRunLoopRunInMode...
2025-10-22T21:42:20.7712630Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:20.7762710Z       [TELEMETRY][L001] >>> DISPOSE-ENTRY: disposing=True, thread=13, _isDisposed=False, _shouldStop=False
2025-10-22T21:42:20.7814820Z         CallStack:
2025-10-22T21:42:20.7847690Z          at Yubico.Core.Devices.Hid.MacOSHidDeviceListener.Dispose(Boolean disposing) in /_/Yubico.Core/src/Yubico/Core/Devices/Hid/MacOSHidDeviceListener.cs:line 154
2025-10-22T21:42:20.7882940Z          at Yubico.Core.Devices.Hid.HidDeviceListener.Dispose() in /_/Yubico.Core/src/Yubico/Core/Devices/Hid/HidDeviceListener.cs:line 153
2025-10-22T21:42:20.7916550Z          at Yubico.Core.Devices.Hid.UnitTests.MacOSHidDeviceListenerDisposalTests.Dispose_StopsCFRunLoop() in /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/Yubico.Core/tests/Yubico/Core/Devices/Hid/MacOSHidDeviceListenerDisposalTests.cs:line 233
2025-10-22T21:42:20.7962610Z          at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
2025-10-22T21:42:20.7967130Z          at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
2025-10-22T21:42:20.7970310Z          at Xunit.Sdk.TestInvoker`1.CallTestMethod(Object testClassInstance) in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestInvoker.cs:line 149
2025-10-22T21:42:20.7973070Z          at Xunit.Sdk.TestInvoker`1.<>c__DisplayClass47_0.<<InvokeTestMethodAsync>b__1>d.MoveNext() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestInvoker.cs:line 256
2025-10-22T21:42:20.7975490Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:20.7977450Z          at Xunit.Sdk.TestInvoker`1.<>c__DisplayClass47_0.<InvokeTestMethodAsync>b__1()
2025-10-22T21:42:20.7979410Z          at Xunit.Sdk.ExecutionTimer.AggregateAsync(Func`1 asyncAction) in /_/src/xunit.execution/Sdk/Frameworks/ExecutionTimer.cs:line 48
2025-10-22T21:42:20.7981670Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:20.7983500Z          at Xunit.Sdk.ExecutionTimer.AggregateAsync(Func`1 asyncAction)
2025-10-22T21:42:20.7985560Z          at Xunit.Sdk.TestInvoker`1.<>c__DisplayClass47_0.<InvokeTestMethodAsync>b__0() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestInvoker.cs:line 215
2025-10-22T21:42:20.7987710Z          at Xunit.Sdk.ExceptionAggregator.RunAsync(Func`1 code) in /_/src/xunit.core/Sdk/ExceptionAggregator.cs:line 90
2025-10-22T21:42:20.7989800Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:20.7991430Z          at Xunit.Sdk.ExceptionAggregator.RunAsync(Func`1 code)
2025-10-22T21:42:20.7993380Z          at Xunit.Sdk.TestInvoker`1.InvokeTestMethodAsync(Object testClassInstance) in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestInvoker.cs:line 214
2025-10-22T21:42:20.7995620Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:20.7997080Z          at Xunit.Sdk.TestInvoker`1.InvokeTestMethodAsync(Object testClassInstance)
2025-10-22T21:42:20.7999410Z          at Xunit.Sdk.XunitTestInvoker.InvokeTestMethodAsync(Object testClassInstance) in /_/src/xunit.execution/Sdk/Frameworks/Runners/XunitTestInvoker.cs:line 112
2025-10-22T21:42:20.8001860Z          at Xunit.Sdk.TestInvoker`1.<RunAsync>b__46_0() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestInvoker.cs:line 180
2025-10-22T21:42:20.8004870Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:20.8006640Z          at Xunit.Sdk.TestInvoker`1.<RunAsync>b__46_0()
2025-10-22T21:42:20.8008510Z          at Xunit.Sdk.ExceptionAggregator.RunAsync[T](Func`1 code) in /_/src/xunit.core/Sdk/ExceptionAggregator.cs:line 107
2025-10-22T21:42:20.8010560Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:20.8013010Z          at Xunit.Sdk.ExceptionAggregator.RunAsync[T](Func`1 code)
2025-10-22T21:42:20.8014650Z          at Xunit.Sdk.TestInvoker`1.RunAsync() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestInvoker.cs:line 163
2025-10-22T21:42:20.8016900Z          at Xunit.Sdk.XunitTestRunner.InvokeTestMethodAsync(ExceptionAggregator aggregator) in /_/src/xunit.execution/Sdk/Frameworks/Runners/XunitTestRunner.cs:line 88
2025-10-22T21:42:20.8019770Z          at Xunit.Sdk.XunitTestRunner.InvokeTestAsync(ExceptionAggregator aggregator) in /_/src/xunit.execution/Sdk/Frameworks/Runners/XunitTestRunner.cs:line 70
2025-10-22T21:42:20.8022230Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:20.8025650Z          at Xunit.Sdk.XunitTestRunner.InvokeTestAsync(ExceptionAggregator aggregator)
2025-10-22T21:42:20.8028060Z          at Xunit.Sdk.TestRunner`1.<>c__DisplayClass43_0.<RunAsync>b__0() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestRunner.cs:line 149
2025-10-22T21:42:20.8030060Z          at Xunit.Sdk.ExceptionAggregator.RunAsync[T](Func`1 code) in /_/src/xunit.core/Sdk/ExceptionAggregator.cs:line 107
2025-10-22T21:42:20.8031790Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:20.8033430Z          at Xunit.Sdk.ExceptionAggregator.RunAsync[T](Func`1 code)
2025-10-22T21:42:20.8034980Z          at Xunit.Sdk.TestRunner`1.RunAsync() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestRunner.cs:line 149
2025-10-22T21:42:20.8036890Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:20.8038340Z          at Xunit.Sdk.TestRunner`1.RunAsync()
2025-10-22T21:42:20.8044870Z          at Xunit.Sdk.XunitTestCaseRunner.RunTestAsync() in /_/src/xunit.execution/Sdk/Frameworks/Runners/XunitTestCaseRunner.cs:line 140
2025-10-22T21:42:20.8047240Z          at Xunit.Sdk.TestCaseRunner`1.RunAsync() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestCaseRunner.cs:line 82
2025-10-22T21:42:20.8048150Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:20.8048860Z          at Xunit.Sdk.TestCaseRunner`1.RunAsync()
2025-10-22T21:42:20.8050080Z          at Xunit.Sdk.XunitTestCase.RunAsync(IMessageSink diagnosticMessageSink, IMessageBus messageBus, Object[] constructorArguments, ExceptionAggregator aggregator, CancellationTokenSource cancellationTokenSource) in /_/src/xunit.execution/Sdk/Frameworks/XunitTestCase.cs:line 170
2025-10-22T21:42:20.8051720Z          at Xunit.Sdk.SkippableFactTestCase.<>n__0(IMessageSink diagnosticMessageSink, IMessageBus messageBus, Object[] constructorArguments, ExceptionAggregator aggregator, CancellationTokenSource cancellationTokenSource)
2025-10-22T21:42:20.8053300Z          at Xunit.Sdk.SkippableFactTestCase.RunAsync(IMessageSink diagnosticMessageSink, IMessageBus messageBus, Object[] constructorArguments, ExceptionAggregator aggregator, CancellationTokenSource cancellationTokenSource)
2025-10-22T21:42:20.8054870Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:20.8056420Z          at Xunit.Sdk.SkippableFactTestCase.RunAsync(IMessageSink diagnosticMessageSink, IMessageBus messageBus, Object[] constructorArguments, ExceptionAggregator aggregator, CancellationTokenSource cancellationTokenSource)
2025-10-22T21:42:20.8058340Z          at Xunit.Sdk.XunitTestMethodRunner.RunTestCaseAsync(IXunitTestCase testCase) in /_/src/xunit.execution/Sdk/Frameworks/Runners/XunitTestMethodRunner.cs:line 45
2025-10-22T21:42:20.8059510Z          at Xunit.Sdk.TestMethodRunner`1.RunTestCasesAsync() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestMethodRunner.cs:line 136
2025-10-22T21:42:20.8060440Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:20.8061430Z          at Xunit.Sdk.TestMethodRunner`1.RunTestCasesAsync()
2025-10-22T21:42:20.8062290Z          at Xunit.Sdk.TestMethodRunner`1.RunAsync() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestMethodRunner.cs:line 106
2025-10-22T21:42:20.8063180Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:20.8063900Z          at Xunit.Sdk.TestMethodRunner`1.RunAsync()
2025-10-22T21:42:20.8064990Z          at Xunit.Sdk.XunitTestClassRunner.RunTestMethodAsync(ITestMethod testMethod, IReflectionMethodInfo method, IEnumerable`1 testCases, Object[] constructorArguments) in /_/src/xunit.execution/Sdk/Frameworks/Runners/XunitTestClassRunner.cs:line 206
2025-10-22T21:42:20.8065870Z          at Xunit.Sdk.TestClassRunner`1.RunTestMethodsAsync()
2025-10-22T21:42:20.8066610Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:20.8067360Z          at Xunit.Sdk.TestClassRunner`1.RunTestMethodsAsync()
2025-10-22T21:42:20.8068050Z          at Xunit.Sdk.TestClassRunner`1.RunAsync() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestClassRunner.cs:line 175
2025-10-22T21:42:20.8068900Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:20.8069620Z          at Xunit.Sdk.TestClassRunner`1.RunAsync()
2025-10-22T21:42:20.8070580Z          at Xunit.Sdk.XunitTestCollectionRunner.RunTestClassAsync(ITestClass testClass, IReflectionTypeInfo class, IEnumerable`1 testCases) in /_/src/xunit.execution/Sdk/Frameworks/Runners/XunitTestCollectionRunner.cs:line 185
2025-10-22T21:42:20.8071640Z          at Xunit.Sdk.TestCollectionRunner`1.RunTestClassesAsync()
2025-10-22T21:42:20.8072470Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:20.8073180Z          at Xunit.Sdk.TestCollectionRunner`1.RunTestClassesAsync()
2025-10-22T21:42:20.8073960Z          at Xunit.Sdk.TestCollectionRunner`1.RunAsync() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestCollectionRunner.cs:line 101
2025-10-22T21:42:20.8077590Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:20.8079330Z          at Xunit.Sdk.TestCollectionRunner`1.RunAsync()
2025-10-22T21:42:20.8082640Z          at Xunit.Sdk.XunitTestAssemblyRunner.RunTestCollectionAsync(IMessageBus messageBus, ITestCollection testCollection, IEnumerable`1 testCases, CancellationTokenSource cancellationTokenSource) in /_/src/xunit.execution/Sdk/Frameworks/Runners/XunitTestAssemblyRunner.cs:line 346
2025-10-22T21:42:20.8086220Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:20.8088960Z          at Xunit.Sdk.XunitTestAssemblyRunner.RunTestCollectionAsync(IMessageBus messageBus, ITestCollection testCollection, IEnumerable`1 testCases, CancellationTokenSource cancellationTokenSource)
2025-10-22T21:42:20.8092240Z          at Xunit.Sdk.XunitTestAssemblyRunner.<>c__DisplayClass16_2.<RunTestCollectionsAsync>b__2() in /_/src/xunit.execution/Sdk/Frameworks/Runners/XunitTestAssemblyRunner.cs:line 250
2025-10-22T21:42:20.8094240Z          at System.Threading.Tasks.Task`1.InnerInvoke()
2025-10-22T21:42:20.8096270Z          at System.Threading.ExecutionContext.RunFromThreadPoolDispatchLoop(Thread threadPoolThread, ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-22T21:42:20.8099590Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-22T21:42:20.8101510Z          at System.Threading.ThreadPoolWorkQueue.Dispatch()
2025-10-22T21:42:20.8103300Z          at System.Threading.PortableThreadPool.WorkerThread.WorkerThreadStart()
2025-10-22T21:42:20.8104800Z          at System.Threading.Thread.StartCallback()
2025-10-22T21:42:20.8106660Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:20.8107970Z       [TELEMETRY][L001] Setting _isDisposed = true
2025-10-22T21:42:20.8109520Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:20.8110920Z       [TELEMETRY][L001] Calling StopListening(fromFinalizer=False)...
2025-10-22T21:42:20.8112340Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:20.8113840Z       [TELEMETRY][L001] StopListening(fromFinalizer=False) called
2025-10-22T21:42:20.8115630Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:20.8117010Z       [TELEMETRY][L001] Setting _shouldStop flag to true
2025-10-22T21:42:20.8118330Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:20.8119760Z       [TELEMETRY][L001] _shouldStop flag set. RunLoop pointer: 4746044944
2025-10-22T21:42:20.8121790Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:20.8133980Z       [TELEMETRY][L001] Calling CFRunLoopStop(4746044944)
2025-10-22T21:42:20.8140210Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:20.8158250Z       [TELEMETRY][L001] CFRunLoopStop() returned
2025-10-22T21:42:20.8162520Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:20.8172010Z       [TELEMETRY][L001] Waiting for thread to exit (1 second timeout)...
2025-10-22T21:42:20.8175150Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:20.8177630Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:20.8179580Z       [TELEMETRY][L001] Loop iter 1: CFRunLoopRunInMode returned 3 after 174ms
2025-10-22T21:42:20.8181530Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:20.8186980Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:20.8188820Z       [TELEMETRY][L001] Run loop exited after 1 iterations. _shouldStop=True, finalResult=3
2025-10-22T21:42:20.8191850Z fail: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:20.8194990Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:20.8195990Z       The run loop was terminated for an unexpected reason: 3
2025-10-22T21:42:20.8198830Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:20.8200770Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:20.8203040Z       [TELEMETRY][L001] Listener thread finally block - cleaning up native resources
2025-10-22T21:42:20.8205250Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:20.8207040Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:20.8210490Z       [TELEMETRY][L001] Unscheduling IOHIDManager from run loop
2025-10-22T21:42:20.8211540Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:20.8221820Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:20.8223170Z       [TELEMETRY][L001] IOHIDManager unscheduled from run loop
2025-10-22T21:42:20.8231490Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:20.8233000Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:20.8233940Z       [TELEMETRY][L001] Releasing IOHIDManager
2025-10-22T21:42:20.8235110Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:20.8236310Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:20.8237110Z       [TELEMETRY][L001] IOHIDManager released
2025-10-22T21:42:20.8238320Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:20.8241680Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:20.8244010Z       [TELEMETRY][L001] Releasing run loop mode CFString
2025-10-22T21:42:20.8244830Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:20.8345510Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:20.8346060Z       [TELEMETRY][L001] Run loop mode CFString released
2025-10-22T21:42:20.8355210Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:20.8356360Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:20.8356920Z       [TELEMETRY][L001] Listener thread cleanup complete - thread exiting
2025-10-22T21:42:20.8357550Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:20.8358050Z       [TELEMETRY][L001] Thread exited successfully after 2ms
2025-10-22T21:42:20.8358510Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:20.8358920Z       [TELEMETRY][L001] StopListening() complete
2025-10-22T21:42:20.8359350Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:20.8359800Z       [TELEMETRY][L001] StopListening() returned successfully
2025-10-22T21:42:20.8360260Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:20.8360740Z       [TELEMETRY][L001] Calling base.Dispose(True)
2025-10-22T21:42:20.8361190Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:20.8361710Z       [TELEMETRY][L001] <<< DISPOSE-EXIT: Complete
2025-10-22T21:42:20.8362160Z [xUnit.net 00:00:00.68]   Finished:    Yubico.Core.UnitTests
2025-10-22T21:42:20.8831980Z   Passed Yubico.Core.Devices.Hid.UnitTests.MacOSHidDeviceListenerDisposalTests.Dispose_StopsCFRunLoop [306 ms]
2025-10-22T21:42:20.8832890Z   Standard Output Messages:
2025-10-22T21:42:20.8834450Z  === TEST START: Dispose_StopsCFRunLoop ===
2025-10-22T21:42:20.8834790Z  [USING-ENTRY] Test=Dispose_StopsCFRunLoop, Thread=13
2025-10-22T21:42:20.8835220Z  [USING-BODY] Test=Dispose_StopsCFRunLoop, Listener=L001, Thread=13
2025-10-22T21:42:20.8863530Z  [TEST] Calling Dispose() on L001
2025-10-22T21:42:20.8874380Z  [TEST] Dispose() completed on L001
2025-10-22T21:42:20.8874750Z  [USING-EXIT] Test=Dispose_StopsCFRunLoop, Listener=L001, Thread=13
2025-10-22T21:42:20.8875110Z 
2025-10-22T21:42:20.8875160Z 
2025-10-22T21:42:20.8875300Z 
2025-10-22T21:42:20.8909680Z Test Run Successful.
2025-10-22T21:42:20.8911430Z Total tests: 1
2025-10-22T21:42:20.8912200Z      Passed: 1
2025-10-22T21:42:20.8956530Z  Total time: 1.7502 Seconds
2025-10-22T21:42:21.0438600Z ##[group]Run actions/upload-artifact@v4
2025-10-22T21:42:21.0438910Z with:
2025-10-22T21:42:21.0439160Z   name: Logs-Test06-Dispose_StopsCFRunLoop
2025-10-22T21:42:21.0439530Z   path: **/TestResults/*
2025-10-22T21:42:21.0439700Z   if-no-files-found: warn
2025-10-22T21:42:21.0439860Z   compression-level: 6
2025-10-22T21:42:21.0440000Z   overwrite: false
2025-10-22T21:42:21.0440150Z   include-hidden-files: false
2025-10-22T21:42:21.0440320Z env:
2025-10-22T21:42:21.0440450Z   DOTNET_ROOT: /Users/runner/.dotnet
2025-10-22T21:42:21.0440690Z ##[endgroup]
2025-10-22T21:42:21.7711210Z ##[warning]No files were found with the provided path: **/TestResults/*. No artifacts will be uploaded.
2025-10-22T21:42:21.7885250Z Post job cleanup.
2025-10-22T21:42:22.0633040Z Post job cleanup.
2025-10-22T21:42:22.2290130Z [command]/opt/homebrew/bin/git version
2025-10-22T21:42:22.2591110Z git version 2.50.1
2025-10-22T21:42:22.2657930Z Copying '/Users/runner/.gitconfig' to '/Users/runner/work/_temp/e2cf1e0a-14cc-476a-86a8-6252fd37b7e6/.gitconfig'
2025-10-22T21:42:22.2666200Z Temporarily overriding HOME='/Users/runner/work/_temp/e2cf1e0a-14cc-476a-86a8-6252fd37b7e6' before making global git config changes
2025-10-22T21:42:22.2667040Z Adding repository directory to the temporary git global config as a safe directory
2025-10-22T21:42:22.2677410Z [command]/opt/homebrew/bin/git config --global --add safe.directory /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK
2025-10-22T21:42:22.2926860Z [command]/opt/homebrew/bin/git config --local --name-only --get-regexp core\.sshCommand
2025-10-22T21:42:22.2932970Z [command]/opt/homebrew/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'core\.sshCommand' && git config --local --unset-all 'core.sshCommand' || :"
2025-10-22T21:42:22.4626110Z [command]/opt/homebrew/bin/git config --local --name-only --get-regexp http\.https\:\/\/github\.com\/\.extraheader
2025-10-22T21:42:22.4713740Z http.https://github.com/.extraheader
2025-10-22T21:42:22.4723760Z [command]/opt/homebrew/bin/git config --local --unset-all http.https://github.com/.extraheader
2025-10-22T21:42:22.4859760Z [command]/opt/homebrew/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'http\.https\:\/\/github\.com\/\.extraheader' && git config --local --unset-all 'http.https://github.com/.extraheader' || :"
2025-10-22T21:42:22.6425650Z Cleaning up orphan processes
2025-10-22T21:42:23.2959790Z Terminate orphan process: pid (5100) (dotnet)
