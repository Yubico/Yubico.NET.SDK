2025-10-22T21:41:57.1280300Z ##[group]Run dotnet test Yubico.Core/tests/Yubico.Core.UnitTests.csproj --filter "FullyQualifiedName~MacOSHidDeviceListenerDisposalTests.Dispose_StopsIOKitCallbacks" --logger "console;verbosity=detailed"
2025-10-22T21:41:57.1284880Z [36;1mdotnet test Yubico.Core/tests/Yubico.Core.UnitTests.csproj --filter "FullyQualifiedName~MacOSHidDeviceListenerDisposalTests.Dispose_StopsIOKitCallbacks" --logger "console;verbosity=detailed"[0m
2025-10-22T21:41:57.1348080Z shell: /bin/bash -e {0}
2025-10-22T21:41:57.1348340Z env:
2025-10-22T21:41:57.1348520Z   DOTNET_ROOT: /Users/runner/.dotnet
2025-10-22T21:41:57.1348740Z   Logging__LogLevel__Default: Information
2025-10-22T21:41:57.1349030Z   Logging__LogLevel__Yubico: Information
2025-10-22T21:41:57.1349230Z ##[endgroup]
2025-10-22T21:41:58.0749580Z   Determining projects to restore...
2025-10-22T21:42:01.1475930Z   Restored /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/Yubico.Core/tests/Yubico.Core.UnitTests.csproj (in 2.6 sec).
2025-10-22T21:42:03.9406540Z   Restored /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/Yubico.Core/src/Yubico.Core.csproj (in 5.4 sec).
2025-10-22T21:42:09.6265640Z   Yubico.Core -> /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/Yubico.Core/src/bin/Debug/netstandard2.1/Yubico.Core.dll
2025-10-22T21:42:11.8616790Z   Yubico.Core.UnitTests -> /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/Yubico.Core/tests/bin/Debug/net8.0/Yubico.Core.UnitTests.dll
2025-10-22T21:42:11.8732440Z Test run for /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/Yubico.Core/tests/bin/Debug/net8.0/Yubico.Core.UnitTests.dll (.NETCoreApp,Version=v8.0)
2025-10-22T21:42:12.0302120Z VSTest version 17.14.1 (arm64)
2025-10-22T21:42:12.0308810Z 
2025-10-22T21:42:12.1284790Z Starting test execution, please wait...
2025-10-22T21:42:12.1490580Z A total of 1 test files matched the specified pattern.
2025-10-22T21:42:12.1491510Z /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/Yubico.Core/tests/bin/Debug/net8.0/Yubico.Core.UnitTests.dll
2025-10-22T21:42:12.6760670Z [xUnit.net 00:00:00.00] xUnit.net VSTest Adapter v3.1.5+1b188a7b0a (64-bit .NET 8.0.21)
2025-10-22T21:42:12.7282070Z [xUnit.net 00:00:00.06]   Discovering: Yubico.Core.UnitTests
2025-10-22T21:42:12.8224020Z [xUnit.net 00:00:00.15]   Discovered:  Yubico.Core.UnitTests
2025-10-22T21:42:12.8368440Z [xUnit.net 00:00:00.17]   Starting:    Yubico.Core.UnitTests
2025-10-22T21:42:12.9083310Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:12.9163160Z       [TELEMETRY][L001] MacOSHidDeviceListener constructor called on thread 13
2025-10-22T21:42:12.9195810Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:12.9199800Z       [TELEMETRY][L001] StartListening() called, creating background thread
2025-10-22T21:42:12.9212550Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:12.9215890Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:12.9216670Z       HID listener thread started. ThreadID is 18.
2025-10-22T21:42:12.9218050Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:12.9218770Z       [TELEMETRY][L001] Background thread started
2025-10-22T21:42:12.9219530Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:12.9220890Z       [TELEMETRY][L001] MacOSHidDeviceListener constructor complete
2025-10-22T21:42:12.9221620Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:12.9222760Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:12.9223500Z       IOHIDManager 5391924432 is scheduled with run loop 5661407440 with mode kCFRunLoopDefaultMode
2025-10-22T21:42:12.9224700Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:12.9225340Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:12.9225930Z       Flushed existing devices.
2025-10-22T21:42:12.9228590Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:12.9229230Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:12.9230410Z       [TELEMETRY][L001] Entering run loop. _shouldStop=False
2025-10-22T21:42:12.9231540Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:12.9232410Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:12.9234570Z       [TELEMETRY][L001] Loop iter 1: _shouldStop=False, prevResult=4, calling CFRunLoopRunInMode...
2025-10-22T21:42:12.9332500Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:12.9335190Z       [TELEMETRY][L001] >>> DISPOSE-ENTRY: disposing=True, thread=13, _isDisposed=False, _shouldStop=False
2025-10-22T21:42:12.9335910Z         CallStack:
2025-10-22T21:42:12.9336810Z          at Yubico.Core.Devices.Hid.MacOSHidDeviceListener.Dispose(Boolean disposing) in /_/Yubico.Core/src/Yubico/Core/Devices/Hid/MacOSHidDeviceListener.cs:line 154
2025-10-22T21:42:12.9337620Z          at Yubico.Core.Devices.Hid.HidDeviceListener.Dispose() in /_/Yubico.Core/src/Yubico/Core/Devices/Hid/HidDeviceListener.cs:line 153
2025-10-22T21:42:12.9338990Z          at Yubico.Core.Devices.Hid.UnitTests.MacOSHidDeviceListenerDisposalTests.Dispose_StopsIOKitCallbacks() in /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/Yubico.Core/tests/Yubico/Core/Devices/Hid/MacOSHidDeviceListenerDisposalTests.cs:line 423
2025-10-22T21:42:12.9340660Z          at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
2025-10-22T21:42:12.9342200Z          at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
2025-10-22T21:42:12.9343560Z          at Xunit.Sdk.TestInvoker`1.CallTestMethod(Object testClassInstance) in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestInvoker.cs:line 149
2025-10-22T21:42:12.9344640Z          at Xunit.Sdk.TestInvoker`1.<>c__DisplayClass47_0.<<InvokeTestMethodAsync>b__1>d.MoveNext() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestInvoker.cs:line 256
2025-10-22T21:42:12.9345750Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:12.9346540Z          at Xunit.Sdk.TestInvoker`1.<>c__DisplayClass47_0.<InvokeTestMethodAsync>b__1()
2025-10-22T21:42:12.9347390Z          at Xunit.Sdk.ExecutionTimer.AggregateAsync(Func`1 asyncAction) in /_/src/xunit.execution/Sdk/Frameworks/ExecutionTimer.cs:line 48
2025-10-22T21:42:12.9348340Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:12.9349030Z          at Xunit.Sdk.ExecutionTimer.AggregateAsync(Func`1 asyncAction)
2025-10-22T21:42:12.9349850Z          at Xunit.Sdk.TestInvoker`1.<>c__DisplayClass47_0.<InvokeTestMethodAsync>b__0() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestInvoker.cs:line 215
2025-10-22T21:42:12.9350830Z          at Xunit.Sdk.ExceptionAggregator.RunAsync(Func`1 code) in /_/src/xunit.core/Sdk/ExceptionAggregator.cs:line 90
2025-10-22T21:42:12.9351750Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:12.9352530Z          at Xunit.Sdk.ExceptionAggregator.RunAsync(Func`1 code)
2025-10-22T21:42:12.9353490Z          at Xunit.Sdk.TestInvoker`1.InvokeTestMethodAsync(Object testClassInstance) in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestInvoker.cs:line 214
2025-10-22T21:42:12.9354420Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:12.9368890Z          at Xunit.Sdk.TestInvoker`1.InvokeTestMethodAsync(Object testClassInstance)
2025-10-22T21:42:12.9372840Z          at Xunit.Sdk.XunitTestInvoker.InvokeTestMethodAsync(Object testClassInstance) in /_/src/xunit.execution/Sdk/Frameworks/Runners/XunitTestInvoker.cs:line 112
2025-10-22T21:42:12.9373770Z          at Xunit.Sdk.TestInvoker`1.<RunAsync>b__46_0() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestInvoker.cs:line 180
2025-10-22T21:42:12.9374560Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:12.9375840Z          at Xunit.Sdk.TestInvoker`1.<RunAsync>b__46_0()
2025-10-22T21:42:12.9376450Z          at Xunit.Sdk.ExceptionAggregator.RunAsync[T](Func`1 code) in /_/src/xunit.core/Sdk/ExceptionAggregator.cs:line 107
2025-10-22T21:42:12.9377250Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:12.9379370Z          at Xunit.Sdk.ExceptionAggregator.RunAsync[T](Func`1 code)
2025-10-22T21:42:12.9380030Z          at Xunit.Sdk.TestInvoker`1.RunAsync() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestInvoker.cs:line 163
2025-10-22T21:42:12.9380930Z          at Xunit.Sdk.XunitTestRunner.InvokeTestMethodAsync(ExceptionAggregator aggregator) in /_/src/xunit.execution/Sdk/Frameworks/Runners/XunitTestRunner.cs:line 88
2025-10-22T21:42:12.9381860Z          at Xunit.Sdk.XunitTestRunner.InvokeTestAsync(ExceptionAggregator aggregator) in /_/src/xunit.execution/Sdk/Frameworks/Runners/XunitTestRunner.cs:line 70
2025-10-22T21:42:12.9383080Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:12.9383860Z          at Xunit.Sdk.XunitTestRunner.InvokeTestAsync(ExceptionAggregator aggregator)
2025-10-22T21:42:12.9384820Z          at Xunit.Sdk.TestRunner`1.<>c__DisplayClass43_0.<RunAsync>b__0() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestRunner.cs:line 149
2025-10-22T21:42:12.9385700Z          at Xunit.Sdk.ExceptionAggregator.RunAsync[T](Func`1 code) in /_/src/xunit.core/Sdk/ExceptionAggregator.cs:line 107
2025-10-22T21:42:12.9386770Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:12.9393490Z          at Xunit.Sdk.ExceptionAggregator.RunAsync[T](Func`1 code)
2025-10-22T21:42:12.9394340Z          at Xunit.Sdk.TestRunner`1.RunAsync() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestRunner.cs:line 149
2025-10-22T21:42:12.9395410Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:12.9396170Z          at Xunit.Sdk.TestRunner`1.RunAsync()
2025-10-22T21:42:12.9396850Z          at Xunit.Sdk.XunitTestCaseRunner.RunTestAsync() in /_/src/xunit.execution/Sdk/Frameworks/Runners/XunitTestCaseRunner.cs:line 140
2025-10-22T21:42:12.9397910Z          at Xunit.Sdk.TestCaseRunner`1.RunAsync() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestCaseRunner.cs:line 82
2025-10-22T21:42:12.9398810Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:12.9399960Z          at Xunit.Sdk.TestCaseRunner`1.RunAsync()
2025-10-22T21:42:12.9401120Z          at Xunit.Sdk.XunitTestCase.RunAsync(IMessageSink diagnosticMessageSink, IMessageBus messageBus, Object[] constructorArguments, ExceptionAggregator aggregator, CancellationTokenSource cancellationTokenSource) in /_/src/xunit.execution/Sdk/Frameworks/XunitTestCase.cs:line 170
2025-10-22T21:42:12.9402820Z          at Xunit.Sdk.SkippableFactTestCase.<>n__0(IMessageSink diagnosticMessageSink, IMessageBus messageBus, Object[] constructorArguments, ExceptionAggregator aggregator, CancellationTokenSource cancellationTokenSource)
2025-10-22T21:42:12.9404020Z          at Xunit.Sdk.SkippableFactTestCase.RunAsync(IMessageSink diagnosticMessageSink, IMessageBus messageBus, Object[] constructorArguments, ExceptionAggregator aggregator, CancellationTokenSource cancellationTokenSource)
2025-10-22T21:42:12.9405210Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:12.9406360Z          at Xunit.Sdk.SkippableFactTestCase.RunAsync(IMessageSink diagnosticMessageSink, IMessageBus messageBus, Object[] constructorArguments, ExceptionAggregator aggregator, CancellationTokenSource cancellationTokenSource)
2025-10-22T21:42:12.9407570Z          at Xunit.Sdk.XunitTestMethodRunner.RunTestCaseAsync(IXunitTestCase testCase) in /_/src/xunit.execution/Sdk/Frameworks/Runners/XunitTestMethodRunner.cs:line 45
2025-10-22T21:42:12.9408900Z          at Xunit.Sdk.TestMethodRunner`1.RunTestCasesAsync() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestMethodRunner.cs:line 136
2025-10-22T21:42:12.9409770Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:12.9410610Z          at Xunit.Sdk.TestMethodRunner`1.RunTestCasesAsync()
2025-10-22T21:42:12.9411260Z          at Xunit.Sdk.TestMethodRunner`1.RunAsync() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestMethodRunner.cs:line 106
2025-10-22T21:42:12.9412060Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:12.9412480Z          at Xunit.Sdk.TestMethodRunner`1.RunAsync()
2025-10-22T21:42:12.9413480Z          at Xunit.Sdk.XunitTestClassRunner.RunTestMethodAsync(ITestMethod testMethod, IReflectionMethodInfo method, IEnumerable`1 testCases, Object[] constructorArguments) in /_/src/xunit.execution/Sdk/Frameworks/Runners/XunitTestClassRunner.cs:line 206
2025-10-22T21:42:12.9414480Z          at Xunit.Sdk.TestClassRunner`1.RunTestMethodsAsync()
2025-10-22T21:42:12.9415120Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:12.9415770Z          at Xunit.Sdk.TestClassRunner`1.RunTestMethodsAsync()
2025-10-22T21:42:12.9416410Z          at Xunit.Sdk.TestClassRunner`1.RunAsync() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestClassRunner.cs:line 175
2025-10-22T21:42:12.9417190Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:12.9417820Z          at Xunit.Sdk.TestClassRunner`1.RunAsync()
2025-10-22T21:42:12.9418710Z          at Xunit.Sdk.XunitTestCollectionRunner.RunTestClassAsync(ITestClass testClass, IReflectionTypeInfo class, IEnumerable`1 testCases) in /_/src/xunit.execution/Sdk/Frameworks/Runners/XunitTestCollectionRunner.cs:line 185
2025-10-22T21:42:12.9419640Z          at Xunit.Sdk.TestCollectionRunner`1.RunTestClassesAsync()
2025-10-22T21:42:12.9420290Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:12.9420950Z          at Xunit.Sdk.TestCollectionRunner`1.RunTestClassesAsync()
2025-10-22T21:42:12.9421630Z          at Xunit.Sdk.TestCollectionRunner`1.RunAsync() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestCollectionRunner.cs:line 101
2025-10-22T21:42:12.9422450Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:12.9423080Z          at Xunit.Sdk.TestCollectionRunner`1.RunAsync()
2025-10-22T21:42:12.9424180Z          at Xunit.Sdk.XunitTestAssemblyRunner.RunTestCollectionAsync(IMessageBus messageBus, ITestCollection testCollection, IEnumerable`1 testCases, CancellationTokenSource cancellationTokenSource) in /_/src/xunit.execution/Sdk/Frameworks/Runners/XunitTestAssemblyRunner.cs:line 346
2025-10-22T21:42:12.9425740Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:12.9426800Z          at Xunit.Sdk.XunitTestAssemblyRunner.RunTestCollectionAsync(IMessageBus messageBus, ITestCollection testCollection, IEnumerable`1 testCases, CancellationTokenSource cancellationTokenSource)
2025-10-22T21:42:12.9427960Z          at Xunit.Sdk.XunitTestAssemblyRunner.<>c__DisplayClass16_2.<RunTestCollectionsAsync>b__2() in /_/src/xunit.execution/Sdk/Frameworks/Runners/XunitTestAssemblyRunner.cs:line 250
2025-10-22T21:42:12.9428730Z          at System.Threading.Tasks.Task`1.InnerInvoke()
2025-10-22T21:42:12.9429520Z          at System.Threading.ExecutionContext.RunFromThreadPoolDispatchLoop(Thread threadPoolThread, ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-22T21:42:12.9430470Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-22T21:42:12.9431320Z          at System.Threading.ThreadPoolWorkQueue.Dispatch()
2025-10-22T21:42:12.9431880Z          at System.Threading.PortableThreadPool.WorkerThread.WorkerThreadStart()
2025-10-22T21:42:12.9432420Z          at System.Threading.Thread.StartCallback()
2025-10-22T21:42:12.9433100Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:12.9433390Z       [TELEMETRY][L001] Setting _isDisposed = true
2025-10-22T21:42:12.9433900Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:12.9434410Z       [TELEMETRY][L001] Calling StopListening(fromFinalizer=False)...
2025-10-22T21:42:12.9434940Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:12.9435430Z       [TELEMETRY][L001] StopListening(fromFinalizer=False) called
2025-10-22T21:42:12.9435960Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:12.9436440Z       [TELEMETRY][L001] Setting _shouldStop flag to true
2025-10-22T21:42:12.9436940Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:12.9437450Z       [TELEMETRY][L001] _shouldStop flag set. RunLoop pointer: 5661407440
2025-10-22T21:42:12.9438000Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:12.9438470Z       [TELEMETRY][L001] Calling CFRunLoopStop(5661407440)
2025-10-22T21:42:12.9438980Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:12.9439440Z       [TELEMETRY][L001] CFRunLoopStop() returned
2025-10-22T21:42:12.9439930Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:12.9440430Z       [TELEMETRY][L001] Waiting for thread to exit (1 second timeout)...
2025-10-22T21:42:12.9440960Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:12.9441430Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:12.9441920Z       [TELEMETRY][L001] Loop iter 1: CFRunLoopRunInMode returned 2 after 13ms
2025-10-22T21:42:12.9442490Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:12.9442960Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:12.9443500Z       [TELEMETRY][L001] Run loop exited after 1 iterations. _shouldStop=True, finalResult=2
2025-10-22T21:42:12.9444190Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:12.9444800Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:12.9445360Z       [TELEMETRY][L001] Listener thread finally block - cleaning up native resources
2025-10-22T21:42:12.9445990Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:12.9446490Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:12.9446980Z       [TELEMETRY][L001] Unscheduling IOHIDManager from run loop
2025-10-22T21:42:12.9447540Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:12.9448050Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:12.9448750Z       [TELEMETRY][L001] IOHIDManager unscheduled from run loop
2025-10-22T21:42:12.9449470Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:12.9450050Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:12.9450670Z       [TELEMETRY][L001] Releasing IOHIDManager
2025-10-22T21:42:12.9451370Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:12.9451970Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:12.9452490Z       [TELEMETRY][L001] IOHIDManager released
2025-10-22T21:42:12.9453220Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:12.9453860Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:12.9454470Z       [TELEMETRY][L001] Releasing run loop mode CFString
2025-10-22T21:42:12.9455090Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:12.9455740Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:12.9456280Z       [TELEMETRY][L001] Run loop mode CFString released
2025-10-22T21:42:12.9457470Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:12.9458030Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:12.9458610Z       [TELEMETRY][L001] Listener thread cleanup complete - thread exiting
2025-10-22T21:42:12.9459320Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:12.9460060Z       [TELEMETRY][L001] Thread exited successfully after 0ms
2025-10-22T21:42:12.9460670Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:12.9461290Z       [TELEMETRY][L001] StopListening() complete
2025-10-22T21:42:12.9461870Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:12.9462440Z       [TELEMETRY][L001] StopListening() returned successfully
2025-10-22T21:42:12.9463160Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:12.9463710Z       [TELEMETRY][L001] Calling base.Dispose(True)
2025-10-22T21:42:12.9470140Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:12.9470730Z       [TELEMETRY][L001] <<< DISPOSE-EXIT: Complete
2025-10-22T21:42:13.4833400Z [xUnit.net 00:00:00.81]   Finished:    Yubico.Core.UnitTests
2025-10-22T21:42:13.5689120Z   Passed Yubico.Core.Devices.Hid.UnitTests.MacOSHidDeviceListenerDisposalTests.Dispose_StopsIOKitCallbacks [613 ms]
2025-10-22T21:42:13.5721190Z   Standard Output Messages:
2025-10-22T21:42:13.5723050Z  === TEST START: Dispose_StopsIOKitCallbacks ===
2025-10-22T21:42:13.5725900Z  [USING-ENTRY] Test=Dispose_StopsIOKitCallbacks, Thread=13
2025-10-22T21:42:13.5813660Z  [USING-BODY] Test=Dispose_StopsIOKitCallbacks, Listener=L001, Thread=13
2025-10-22T21:42:13.5847870Z  [TEST] Created listener: L001
2025-10-22T21:42:13.5864370Z  [TEST] Disposing listener: L001
2025-10-22T21:42:13.5965470Z  [TEST] Dispose() completed on L001
2025-10-22T21:42:13.6066450Z  [TEST] Verified no callbacks fired for L001
2025-10-22T21:42:13.6168460Z  [USING-EXIT] Test=Dispose_StopsIOKitCallbacks, Listener=L001, Thread=13
2025-10-22T21:42:13.6188100Z 
2025-10-22T21:42:13.6220270Z 
2025-10-22T21:42:13.6220650Z 
2025-10-22T21:42:13.6221440Z Test Run Successful.
2025-10-22T21:42:13.6222040Z Total tests: 1
2025-10-22T21:42:13.6222380Z      Passed: 1
2025-10-22T21:42:13.6222730Z  Total time: 1.4180 Seconds
