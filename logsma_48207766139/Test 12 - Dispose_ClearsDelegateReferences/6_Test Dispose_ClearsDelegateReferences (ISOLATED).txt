2025-10-22T21:41:55.0163970Z ##[group]Run dotnet test Yubico.Core/tests/Yubico.Core.UnitTests.csproj --filter "FullyQualifiedName~MacOSHidDeviceListenerDisposalTests.Dispose_ClearsDelegateReferences" --logger "console;verbosity=detailed"
2025-10-22T21:41:55.0165140Z [36;1mdotnet test Yubico.Core/tests/Yubico.Core.UnitTests.csproj --filter "FullyQualifiedName~MacOSHidDeviceListenerDisposalTests.Dispose_ClearsDelegateReferences" --logger "console;verbosity=detailed"[0m
2025-10-22T21:41:55.0197280Z shell: /bin/bash -e {0}
2025-10-22T21:41:55.0197460Z env:
2025-10-22T21:41:55.0197630Z   DOTNET_ROOT: /Users/runner/.dotnet
2025-10-22T21:41:55.0197860Z   Logging__LogLevel__Default: Information
2025-10-22T21:41:55.0198090Z   Logging__LogLevel__Yubico: Information
2025-10-22T21:41:55.0198310Z ##[endgroup]
2025-10-22T21:41:55.5555390Z   Determining projects to restore...
2025-10-22T21:41:58.8365770Z   Restored /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/Yubico.Core/tests/Yubico.Core.UnitTests.csproj (in 2.96 sec).
2025-10-22T21:41:59.3481920Z   Restored /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/Yubico.Core/src/Yubico.Core.csproj (in 3.49 sec).
2025-10-22T21:42:03.4042710Z   Yubico.Core -> /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/Yubico.Core/src/bin/Debug/netstandard2.1/Yubico.Core.dll
2025-10-22T21:42:06.0941890Z   Yubico.Core.UnitTests -> /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/Yubico.Core/tests/bin/Debug/net8.0/Yubico.Core.UnitTests.dll
2025-10-22T21:42:06.1106420Z Test run for /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/Yubico.Core/tests/bin/Debug/net8.0/Yubico.Core.UnitTests.dll (.NETCoreApp,Version=v8.0)
2025-10-22T21:42:06.3617640Z VSTest version 17.14.1 (arm64)
2025-10-22T21:42:06.3623160Z 
2025-10-22T21:42:06.4453380Z Starting test execution, please wait...
2025-10-22T21:42:06.4610710Z A total of 1 test files matched the specified pattern.
2025-10-22T21:42:06.4628790Z /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/Yubico.Core/tests/bin/Debug/net8.0/Yubico.Core.UnitTests.dll
2025-10-22T21:42:06.9947230Z [xUnit.net 00:00:00.00] xUnit.net VSTest Adapter v3.1.5+1b188a7b0a (64-bit .NET 8.0.21)
2025-10-22T21:42:07.0528930Z [xUnit.net 00:00:00.06]   Discovering: Yubico.Core.UnitTests
2025-10-22T21:42:07.1622480Z [xUnit.net 00:00:00.17]   Discovered:  Yubico.Core.UnitTests
2025-10-22T21:42:07.1806300Z [xUnit.net 00:00:00.19]   Starting:    Yubico.Core.UnitTests
2025-10-22T21:42:07.2650660Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:07.2659850Z       [TELEMETRY][L001] MacOSHidDeviceListener constructor called on thread 7
2025-10-22T21:42:07.2703630Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:07.2758550Z       [TELEMETRY][L001] StartListening() called, creating background thread
2025-10-22T21:42:07.2827790Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:07.2850830Z       [TELEMETRY][L001] Background thread started
2025-10-22T21:42:07.2851580Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:07.2852130Z       [TELEMETRY][L001] MacOSHidDeviceListener constructor complete
2025-10-22T21:42:07.2855670Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:07.2856260Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:07.2856740Z       HID listener thread started. ThreadID is 18.
2025-10-22T21:42:07.2863700Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:07.2867200Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:07.2902320Z       IOHIDManager 4695584848 is scheduled with run loop 5232566176 with mode kCFRunLoopDefaultMode
2025-10-22T21:42:07.2910610Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:07.2971280Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:07.3012530Z       Flushed existing devices.
2025-10-22T21:42:07.3034450Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:07.3052550Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:07.3066350Z       [TELEMETRY][L001] Entering run loop. _shouldStop=False
2025-10-22T21:42:07.3095950Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:07.3099740Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:07.3130160Z       [TELEMETRY][L001] Loop iter 1: _shouldStop=False, prevResult=4, calling CFRunLoopRunInMode...
2025-10-22T21:42:07.3137950Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:07.3164220Z       [TELEMETRY][L001] >>> DISPOSE-ENTRY: disposing=True, thread=7, _isDisposed=False, _shouldStop=False
2025-10-22T21:42:07.3196090Z         CallStack:
2025-10-22T21:42:07.3248230Z          at Yubico.Core.Devices.Hid.MacOSHidDeviceListener.Dispose(Boolean disposing) in /_/Yubico.Core/src/Yubico/Core/Devices/Hid/MacOSHidDeviceListener.cs:line 154
2025-10-22T21:42:07.3284760Z          at Yubico.Core.Devices.Hid.HidDeviceListener.Dispose() in /_/Yubico.Core/src/Yubico/Core/Devices/Hid/HidDeviceListener.cs:line 153
2025-10-22T21:42:07.3286580Z          at Yubico.Core.Devices.Hid.UnitTests.MacOSHidDeviceListenerDisposalTests.Dispose_ClearsDelegateReferences() in /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/Yubico.Core/tests/Yubico/Core/Devices/Hid/MacOSHidDeviceListenerDisposalTests.cs:line 455
2025-10-22T21:42:07.3306840Z          at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
2025-10-22T21:42:07.3307940Z          at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
2025-10-22T21:42:07.3309440Z          at Xunit.Sdk.TestInvoker`1.CallTestMethod(Object testClassInstance) in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestInvoker.cs:line 149
2025-10-22T21:42:07.3310600Z          at Xunit.Sdk.TestInvoker`1.<>c__DisplayClass47_0.<<InvokeTestMethodAsync>b__1>d.MoveNext() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestInvoker.cs:line 256
2025-10-22T21:42:07.3311560Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:07.3312110Z          at Xunit.Sdk.TestInvoker`1.<>c__DisplayClass47_0.<InvokeTestMethodAsync>b__1()
2025-10-22T21:42:07.3312690Z          at Xunit.Sdk.ExecutionTimer.AggregateAsync(Func`1 asyncAction) in /_/src/xunit.execution/Sdk/Frameworks/ExecutionTimer.cs:line 48
2025-10-22T21:42:07.3313490Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:07.3314270Z          at Xunit.Sdk.ExecutionTimer.AggregateAsync(Func`1 asyncAction)
2025-10-22T21:42:07.3314980Z          at Xunit.Sdk.TestInvoker`1.<>c__DisplayClass47_0.<InvokeTestMethodAsync>b__0() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestInvoker.cs:line 215
2025-10-22T21:42:07.3315910Z          at Xunit.Sdk.ExceptionAggregator.RunAsync(Func`1 code) in /_/src/xunit.core/Sdk/ExceptionAggregator.cs:line 90
2025-10-22T21:42:07.3316680Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:07.3317330Z          at Xunit.Sdk.ExceptionAggregator.RunAsync(Func`1 code)
2025-10-22T21:42:07.3318010Z          at Xunit.Sdk.TestInvoker`1.InvokeTestMethodAsync(Object testClassInstance) in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestInvoker.cs:line 214
2025-10-22T21:42:07.3318970Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:07.3319670Z          at Xunit.Sdk.TestInvoker`1.InvokeTestMethodAsync(Object testClassInstance)
2025-10-22T21:42:07.3320510Z          at Xunit.Sdk.XunitTestInvoker.InvokeTestMethodAsync(Object testClassInstance) in /_/src/xunit.execution/Sdk/Frameworks/Runners/XunitTestInvoker.cs:line 112
2025-10-22T21:42:07.3321490Z          at Xunit.Sdk.TestInvoker`1.<RunAsync>b__46_0() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestInvoker.cs:line 180
2025-10-22T21:42:07.3322250Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:07.3323260Z          at Xunit.Sdk.TestInvoker`1.<RunAsync>b__46_0()
2025-10-22T21:42:07.3324360Z          at Xunit.Sdk.ExceptionAggregator.RunAsync[T](Func`1 code) in /_/src/xunit.core/Sdk/ExceptionAggregator.cs:line 107
2025-10-22T21:42:07.3325120Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:07.3326110Z          at Xunit.Sdk.ExceptionAggregator.RunAsync[T](Func`1 code)
2025-10-22T21:42:07.3326620Z          at Xunit.Sdk.TestInvoker`1.RunAsync() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestInvoker.cs:line 163
2025-10-22T21:42:07.3327500Z          at Xunit.Sdk.XunitTestRunner.InvokeTestMethodAsync(ExceptionAggregator aggregator) in /_/src/xunit.execution/Sdk/Frameworks/Runners/XunitTestRunner.cs:line 88
2025-10-22T21:42:07.3328400Z          at Xunit.Sdk.XunitTestRunner.InvokeTestAsync(ExceptionAggregator aggregator) in /_/src/xunit.execution/Sdk/Frameworks/Runners/XunitTestRunner.cs:line 70
2025-10-22T21:42:07.3329180Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:07.3329810Z          at Xunit.Sdk.XunitTestRunner.InvokeTestAsync(ExceptionAggregator aggregator)
2025-10-22T21:42:07.3330400Z          at Xunit.Sdk.TestRunner`1.<>c__DisplayClass43_0.<RunAsync>b__0() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestRunner.cs:line 149
2025-10-22T21:42:07.3331050Z          at Xunit.Sdk.ExceptionAggregator.RunAsync[T](Func`1 code) in /_/src/xunit.core/Sdk/ExceptionAggregator.cs:line 107
2025-10-22T21:42:07.3331790Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:07.3332370Z          at Xunit.Sdk.ExceptionAggregator.RunAsync[T](Func`1 code)
2025-10-22T21:42:07.3332840Z          at Xunit.Sdk.TestRunner`1.RunAsync() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestRunner.cs:line 149
2025-10-22T21:42:07.3333510Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:07.3334250Z          at Xunit.Sdk.TestRunner`1.RunAsync()
2025-10-22T21:42:07.3334950Z          at Xunit.Sdk.XunitTestCaseRunner.RunTestAsync() in /_/src/xunit.execution/Sdk/Frameworks/Runners/XunitTestCaseRunner.cs:line 140
2025-10-22T21:42:07.3335690Z          at Xunit.Sdk.TestCaseRunner`1.RunAsync() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestCaseRunner.cs:line 82
2025-10-22T21:42:07.3336400Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:07.3336850Z          at Xunit.Sdk.TestCaseRunner`1.RunAsync()
2025-10-22T21:42:07.3337880Z          at Xunit.Sdk.XunitTestCase.RunAsync(IMessageSink diagnosticMessageSink, IMessageBus messageBus, Object[] constructorArguments, ExceptionAggregator aggregator, CancellationTokenSource cancellationTokenSource) in /_/src/xunit.execution/Sdk/Frameworks/XunitTestCase.cs:line 170
2025-10-22T21:42:07.3339290Z          at Xunit.Sdk.SkippableFactTestCase.<>n__0(IMessageSink diagnosticMessageSink, IMessageBus messageBus, Object[] constructorArguments, ExceptionAggregator aggregator, CancellationTokenSource cancellationTokenSource)
2025-10-22T21:42:07.3340550Z          at Xunit.Sdk.SkippableFactTestCase.RunAsync(IMessageSink diagnosticMessageSink, IMessageBus messageBus, Object[] constructorArguments, ExceptionAggregator aggregator, CancellationTokenSource cancellationTokenSource)
2025-10-22T21:42:07.3341490Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:07.3342410Z          at Xunit.Sdk.SkippableFactTestCase.RunAsync(IMessageSink diagnosticMessageSink, IMessageBus messageBus, Object[] constructorArguments, ExceptionAggregator aggregator, CancellationTokenSource cancellationTokenSource)
2025-10-22T21:42:07.3343530Z          at Xunit.Sdk.XunitTestMethodRunner.RunTestCaseAsync(IXunitTestCase testCase) in /_/src/xunit.execution/Sdk/Frameworks/Runners/XunitTestMethodRunner.cs:line 45
2025-10-22T21:42:07.3344540Z          at Xunit.Sdk.TestMethodRunner`1.RunTestCasesAsync() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestMethodRunner.cs:line 136
2025-10-22T21:42:07.3345220Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:07.3345980Z          at Xunit.Sdk.TestMethodRunner`1.RunTestCasesAsync()
2025-10-22T21:42:07.3346460Z          at Xunit.Sdk.TestMethodRunner`1.RunAsync() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestMethodRunner.cs:line 106
2025-10-22T21:42:07.3347170Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:07.3347790Z          at Xunit.Sdk.TestMethodRunner`1.RunAsync()
2025-10-22T21:42:07.3348640Z          at Xunit.Sdk.XunitTestClassRunner.RunTestMethodAsync(ITestMethod testMethod, IReflectionMethodInfo method, IEnumerable`1 testCases, Object[] constructorArguments) in /_/src/xunit.execution/Sdk/Frameworks/Runners/XunitTestClassRunner.cs:line 206
2025-10-22T21:42:07.3349460Z          at Xunit.Sdk.TestClassRunner`1.RunTestMethodsAsync()
2025-10-22T21:42:07.3349950Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:07.3350520Z          at Xunit.Sdk.TestClassRunner`1.RunTestMethodsAsync()
2025-10-22T21:42:07.3351010Z          at Xunit.Sdk.TestClassRunner`1.RunAsync() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestClassRunner.cs:line 175
2025-10-22T21:42:07.3351640Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:07.3352540Z          at Xunit.Sdk.TestClassRunner`1.RunAsync()
2025-10-22T21:42:07.3353310Z          at Xunit.Sdk.XunitTestCollectionRunner.RunTestClassAsync(ITestClass testClass, IReflectionTypeInfo class, IEnumerable`1 testCases) in /_/src/xunit.execution/Sdk/Frameworks/Runners/XunitTestCollectionRunner.cs:line 185
2025-10-22T21:42:07.3354110Z          at Xunit.Sdk.TestCollectionRunner`1.RunTestClassesAsync()
2025-10-22T21:42:07.3354670Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:07.3355160Z          at Xunit.Sdk.TestCollectionRunner`1.RunTestClassesAsync()
2025-10-22T21:42:07.3355690Z          at Xunit.Sdk.TestCollectionRunner`1.RunAsync() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestCollectionRunner.cs:line 101
2025-10-22T21:42:07.3356420Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:07.3356880Z          at Xunit.Sdk.TestCollectionRunner`1.RunAsync()
2025-10-22T21:42:07.3357810Z          at Xunit.Sdk.XunitTestAssemblyRunner.RunTestCollectionAsync(IMessageBus messageBus, ITestCollection testCollection, IEnumerable`1 testCases, CancellationTokenSource cancellationTokenSource) in /_/src/xunit.execution/Sdk/Frameworks/Runners/XunitTestAssemblyRunner.cs:line 346
2025-10-22T21:42:07.3358900Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:07.3359840Z          at Xunit.Sdk.XunitTestAssemblyRunner.RunTestCollectionAsync(IMessageBus messageBus, ITestCollection testCollection, IEnumerable`1 testCases, CancellationTokenSource cancellationTokenSource)
2025-10-22T21:42:07.3360860Z          at Xunit.Sdk.XunitTestAssemblyRunner.<>c__DisplayClass16_2.<RunTestCollectionsAsync>b__2() in /_/src/xunit.execution/Sdk/Frameworks/Runners/XunitTestAssemblyRunner.cs:line 250
2025-10-22T21:42:07.3361480Z          at System.Threading.Tasks.Task`1.InnerInvoke()
2025-10-22T21:42:07.3362180Z          at System.Threading.ExecutionContext.RunFromThreadPoolDispatchLoop(Thread threadPoolThread, ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-22T21:42:07.3363140Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-22T21:42:07.3363630Z          at System.Threading.ThreadPoolWorkQueue.Dispatch()
2025-10-22T21:42:07.3364100Z          at System.Threading.PortableThreadPool.WorkerThread.WorkerThreadStart()
2025-10-22T21:42:07.3364480Z          at System.Threading.Thread.StartCallback()
2025-10-22T21:42:07.3365040Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:07.3365370Z       [TELEMETRY][L001] Setting _isDisposed = true
2025-10-22T21:42:07.3365750Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:07.3367260Z       [TELEMETRY][L001] Calling StopListening(fromFinalizer=False)...
2025-10-22T21:42:07.3367740Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:07.3368210Z       [TELEMETRY][L001] StopListening(fromFinalizer=False) called
2025-10-22T21:42:07.3368670Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:07.3369080Z       [TELEMETRY][L001] Setting _shouldStop flag to true
2025-10-22T21:42:07.3369580Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:07.3369960Z       [TELEMETRY][L001] _shouldStop flag set. RunLoop pointer: 5232566176
2025-10-22T21:42:07.3370440Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:07.3370820Z       [TELEMETRY][L001] Calling CFRunLoopStop(5232566176)
2025-10-22T21:42:07.3371290Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:07.3371560Z       [TELEMETRY][L001] CFRunLoopStop() returned
2025-10-22T21:42:07.3371900Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:07.3372280Z       [TELEMETRY][L001] Waiting for thread to exit (1 second timeout)...
2025-10-22T21:42:07.3372740Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:07.3373080Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:07.3373470Z       [TELEMETRY][L001] Loop iter 1: CFRunLoopRunInMode returned 2 after 6ms
2025-10-22T21:42:07.3373990Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:07.3374320Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:07.3374740Z       [TELEMETRY][L001] Run loop exited after 1 iterations. _shouldStop=True, finalResult=2
2025-10-22T21:42:07.3375130Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:07.3375560Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:07.3375910Z       [TELEMETRY][L001] Listener thread finally block - cleaning up native resources
2025-10-22T21:42:07.3376350Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:07.3376730Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:07.3377040Z       [TELEMETRY][L001] Unscheduling IOHIDManager from run loop
2025-10-22T21:42:07.3377410Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:07.3377730Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:07.3378090Z       [TELEMETRY][L001] IOHIDManager unscheduled from run loop
2025-10-22T21:42:07.3378450Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:07.3378830Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:07.3379420Z       [TELEMETRY][L001] Releasing IOHIDManager
2025-10-22T21:42:07.3379940Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:07.3380360Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:07.3380910Z       [TELEMETRY][L001] IOHIDManager released
2025-10-22T21:42:07.3381390Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:07.3381790Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:07.3382120Z       [TELEMETRY][L001] Releasing run loop mode CFString
2025-10-22T21:42:07.3382770Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:07.3383140Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:07.3383510Z       [TELEMETRY][L001] Run loop mode CFString released
2025-10-22T21:42:07.3384250Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:07.3384730Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:07.3385160Z       [TELEMETRY][L001] Listener thread cleanup complete - thread exiting
2025-10-22T21:42:07.3385610Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:07.3386350Z       [TELEMETRY][L001] Thread exited successfully after 0ms
2025-10-22T21:42:07.3386760Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:07.3387020Z       [TELEMETRY][L001] StopListening() complete
2025-10-22T21:42:07.3387530Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:07.3397850Z       [TELEMETRY][L001] StopListening() returned successfully
2025-10-22T21:42:07.3398600Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:07.3398900Z       [TELEMETRY][L001] Calling base.Dispose(True)
2025-10-22T21:42:07.3399300Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:07.3399630Z       [TELEMETRY][L001] <<< DISPOSE-EXIT: Complete
2025-10-22T21:42:07.3399990Z [xUnit.net 00:00:00.31]   Finished:    Yubico.Core.UnitTests
2025-10-22T21:42:07.3663120Z   Passed Yubico.Core.Devices.Hid.UnitTests.MacOSHidDeviceListenerDisposalTests.Dispose_ClearsDelegateReferences [97 ms]
2025-10-22T21:42:07.3675440Z   Standard Output Messages:
2025-10-22T21:42:07.3713580Z  === TEST START: Dispose_ClearsDelegateReferences ===
2025-10-22T21:42:07.3745980Z  [USING-ENTRY] Test=Dispose_ClearsDelegateReferences, Thread=7
2025-10-22T21:42:07.3779090Z  [USING-BODY] Test=Dispose_ClearsDelegateReferences, Listener=L001, Thread=7
2025-10-22T21:42:07.3780360Z  [TEST] Created listener: L001
2025-10-22T21:42:07.3807750Z  [TEST] Disposing listener: L001
2025-10-22T21:42:07.4032730Z  [TEST] Dispose() completed on L001
2025-10-22T21:42:07.4069910Z  [TEST] Forcing GC to collect delegates for L001
2025-10-22T21:42:07.4171150Z  [TEST] Delegates properly released for L001
2025-10-22T21:42:07.4191190Z  [USING-EXIT] Test=Dispose_ClearsDelegateReferences, Listener=L001, Thread=7
2025-10-22T21:42:07.4225730Z 
2025-10-22T21:42:07.4226740Z 
2025-10-22T21:42:07.4268610Z 
2025-10-22T21:42:07.4303280Z Test Run Successful.
2025-10-22T21:42:07.4307620Z Total tests: 1
2025-10-22T21:42:07.4307930Z      Passed: 1
2025-10-22T21:42:07.4308240Z  Total time: 0.9053 Seconds
