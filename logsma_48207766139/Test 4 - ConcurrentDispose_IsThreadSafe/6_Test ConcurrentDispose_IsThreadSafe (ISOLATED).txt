2025-10-22T21:41:58.1078320Z ##[group]Run dotnet test Yubico.Core/tests/Yubico.Core.UnitTests.csproj --filter "FullyQualifiedName~MacOSHidDeviceListenerDisposalTests.ConcurrentDispose_IsThreadSafe" --logger "console;verbosity=detailed"
2025-10-22T21:41:58.1079730Z [36;1mdotnet test Yubico.Core/tests/Yubico.Core.UnitTests.csproj --filter "FullyQualifiedName~MacOSHidDeviceListenerDisposalTests.ConcurrentDispose_IsThreadSafe" --logger "console;verbosity=detailed"[0m
2025-10-22T21:41:58.1402150Z shell: /bin/bash -e {0}
2025-10-22T21:41:58.1402370Z env:
2025-10-22T21:41:58.1402570Z   DOTNET_ROOT: /Users/runner/.dotnet
2025-10-22T21:41:58.1402850Z   Logging__LogLevel__Default: Information
2025-10-22T21:41:58.1403310Z   Logging__LogLevel__Yubico: Information
2025-10-22T21:41:58.1403560Z ##[endgroup]
2025-10-22T21:41:59.0510730Z   Determining projects to restore...
2025-10-22T21:42:03.3206070Z   Restored /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/Yubico.Core/src/Yubico.Core.csproj (in 3.92 sec).
2025-10-22T21:42:03.3225830Z   Restored /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/Yubico.Core/tests/Yubico.Core.UnitTests.csproj (in 3.94 sec).
2025-10-22T21:42:11.0802130Z   Yubico.Core -> /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/Yubico.Core/src/bin/Debug/netstandard2.1/Yubico.Core.dll
2025-10-22T21:42:14.4627480Z   Yubico.Core.UnitTests -> /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/Yubico.Core/tests/bin/Debug/net8.0/Yubico.Core.UnitTests.dll
2025-10-22T21:42:14.4763060Z Test run for /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/Yubico.Core/tests/bin/Debug/net8.0/Yubico.Core.UnitTests.dll (.NETCoreApp,Version=v8.0)
2025-10-22T21:42:14.7915390Z VSTest version 17.14.1 (arm64)
2025-10-22T21:42:14.8016740Z 
2025-10-22T21:42:14.9863440Z Starting test execution, please wait...
2025-10-22T21:42:15.0146170Z A total of 1 test files matched the specified pattern.
2025-10-22T21:42:15.0181100Z /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/Yubico.Core/tests/bin/Debug/net8.0/Yubico.Core.UnitTests.dll
2025-10-22T21:42:16.1150040Z [xUnit.net 00:00:00.00] xUnit.net VSTest Adapter v3.1.5+1b188a7b0a (64-bit .NET 8.0.21)
2025-10-22T21:42:16.2495630Z [xUnit.net 00:00:00.14]   Discovering: Yubico.Core.UnitTests
2025-10-22T21:42:16.4183870Z [xUnit.net 00:00:00.31]   Discovered:  Yubico.Core.UnitTests
2025-10-22T21:42:16.4617370Z [xUnit.net 00:00:00.35]   Starting:    Yubico.Core.UnitTests
2025-10-22T21:42:16.5999640Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:16.6118950Z       [TELEMETRY][L001] MacOSHidDeviceListener constructor called on thread 12
2025-10-22T21:42:16.6197260Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:16.6247110Z       [TELEMETRY][L001] StartListening() called, creating background thread
2025-10-22T21:42:16.6319860Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:16.6360610Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:16.6396000Z       HID listener thread started. ThreadID is 18.
2025-10-22T21:42:16.6435700Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:16.6474650Z       [TELEMETRY][L001] Background thread started
2025-10-22T21:42:16.6513920Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:16.6541160Z       [TELEMETRY][L001] MacOSHidDeviceListener constructor complete
2025-10-22T21:42:16.6554850Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:16.6625200Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:16.6660480Z       IOHIDManager 5341582864 is scheduled with run loop 5341597056 with mode kCFRunLoopDefaultMode
2025-10-22T21:42:16.6680270Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:16.6715590Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:16.6740610Z       Flushed existing devices.
2025-10-22T21:42:16.6748860Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:16.6783640Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:16.6828630Z       [TELEMETRY][L001] Entering run loop. _shouldStop=False
2025-10-22T21:42:16.6864250Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:16.6870080Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:16.6891290Z       [TELEMETRY][L001] Loop iter 1: _shouldStop=False, prevResult=4, calling CFRunLoopRunInMode...
2025-10-22T21:42:16.6946710Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:16.6965280Z       [TELEMETRY][L001] >>> DISPOSE-ENTRY: disposing=True, thread=13, _isDisposed=False, _shouldStop=False
2025-10-22T21:42:16.7003620Z         CallStack:
2025-10-22T21:42:16.7060260Z          at Yubico.Core.Devices.Hid.MacOSHidDeviceListener.Dispose(Boolean disposing) in /_/Yubico.Core/src/Yubico/Core/Devices/Hid/MacOSHidDeviceListener.cs:line 154
2025-10-22T21:42:16.7112900Z          at Yubico.Core.Devices.Hid.HidDeviceListener.Dispose() in /_/Yubico.Core/src/Yubico/Core/Devices/Hid/HidDeviceListener.cs:line 153
2025-10-22T21:42:16.7148820Z          at Yubico.Core.Devices.Hid.UnitTests.MacOSHidDeviceListenerDisposalTests.<>c__DisplayClass5_1.<ConcurrentDispose_IsThreadSafe>b__0() in /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/Yubico.Core/tests/Yubico/Core/Devices/Hid/MacOSHidDeviceListenerDisposalTests.cs:line 168
2025-10-22T21:42:16.7184190Z          at System.Threading.ExecutionContext.RunFromThreadPoolDispatchLoop(Thread threadPoolThread, ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-22T21:42:16.7231620Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-22T21:42:16.7264930Z          at System.Threading.ThreadPoolWorkQueue.Dispatch()
2025-10-22T21:42:16.7302530Z          at System.Threading.PortableThreadPool.WorkerThread.WorkerThreadStart()
2025-10-22T21:42:16.7340610Z          at System.Threading.Thread.StartCallback()
2025-10-22T21:42:16.7386240Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:16.7410760Z       [TELEMETRY][L001] Setting _isDisposed = true
2025-10-22T21:42:16.7433420Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:16.7447850Z       [TELEMETRY][L001] Calling StopListening(fromFinalizer=False)...
2025-10-22T21:42:16.7481490Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:16.7489360Z       [TELEMETRY][L001] >>> DISPOSE-ENTRY: disposing=True, thread=12, _isDisposed=False, _shouldStop=False
2025-10-22T21:42:16.7513200Z         CallStack:
2025-10-22T21:42:16.7582150Z          at Yubico.Core.Devices.Hid.MacOSHidDeviceListener.Dispose(Boolean disposing) in /_/Yubico.Core/src/Yubico/Core/Devices/Hid/MacOSHidDeviceListener.cs:line 154
2025-10-22T21:42:16.7616090Z          at Yubico.Core.Devices.Hid.HidDeviceListener.Dispose() in /_/Yubico.Core/src/Yubico/Core/Devices/Hid/HidDeviceListener.cs:line 153
2025-10-22T21:42:16.7669140Z          at Yubico.Core.Devices.Hid.UnitTests.MacOSHidDeviceListenerDisposalTests.<>c__DisplayClass5_1.<ConcurrentDispose_IsThreadSafe>b__0() in /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/Yubico.Core/tests/Yubico/Core/Devices/Hid/MacOSHidDeviceListenerDisposalTests.cs:line 168
2025-10-22T21:42:16.7706480Z          at System.Threading.ExecutionContext.RunFromThreadPoolDispatchLoop(Thread threadPoolThread, ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-22T21:42:16.7710530Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-22T21:42:16.7711670Z          at System.Threading.ThreadPoolWorkQueue.Dispatch()
2025-10-22T21:42:16.7712430Z          at System.Threading.PortableThreadPool.WorkerThread.WorkerThreadStart()
2025-10-22T21:42:16.7715380Z          at System.Threading.Thread.StartCallback()
2025-10-22T21:42:16.7717860Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:16.7732200Z       [TELEMETRY][L001] StopListening(fromFinalizer=False) called
2025-10-22T21:42:16.7761810Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:16.7789840Z       [TELEMETRY][L001] Setting _shouldStop flag to true
2025-10-22T21:42:16.7814830Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:16.7918340Z       [TELEMETRY][L001] _shouldStop flag set. RunLoop pointer: 5341597056
2025-10-22T21:42:16.8023470Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:16.8131490Z       [TELEMETRY][L001] Calling CFRunLoopStop(5341597056)
2025-10-22T21:42:16.8207350Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:16.8254050Z       [TELEMETRY][L001] CFRunLoopStop() returned
2025-10-22T21:42:16.8356300Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:16.8398440Z       [TELEMETRY][L001] Waiting for thread to exit (1 second timeout)...
2025-10-22T21:42:16.8501680Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:16.8522670Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:16.8546630Z       [TELEMETRY][L001] Loop iter 1: CFRunLoopRunInMode returned 2 after 10ms
2025-10-22T21:42:16.8548520Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:16.8549970Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:16.8551520Z       [TELEMETRY][L001] Run loop exited after 1 iterations. _shouldStop=True, finalResult=2
2025-10-22T21:42:16.8553310Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:16.8569970Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:16.8695210Z       [TELEMETRY][L001] Listener thread finally block - cleaning up native resources
2025-10-22T21:42:16.8702490Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:16.8704540Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:16.8704890Z       [TELEMETRY][L001] Unscheduling IOHIDManager from run loop
2025-10-22T21:42:16.8709410Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:16.8710050Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:16.8710660Z       [TELEMETRY][L001] IOHIDManager unscheduled from run loop
2025-10-22T21:42:16.8711200Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:16.8713730Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:16.8714120Z       [TELEMETRY][L001] Releasing IOHIDManager
2025-10-22T21:42:16.8715080Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:16.8716030Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:16.8716770Z       [TELEMETRY][L001] IOHIDManager released
2025-10-22T21:42:16.8717410Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:16.8739440Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:16.8741910Z       [TELEMETRY][L001] Releasing run loop mode CFString
2025-10-22T21:42:16.8758230Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:16.8761850Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:16.8762280Z       [TELEMETRY][L001] Run loop mode CFString released
2025-10-22T21:42:16.8762690Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:16.8763020Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:16.8763430Z       [TELEMETRY][L001] Listener thread cleanup complete - thread exiting
2025-10-22T21:42:16.8763880Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:16.8764290Z       [TELEMETRY][L001] Thread exited successfully after 0ms
2025-10-22T21:42:16.8764710Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:16.8765320Z       [TELEMETRY][L001] StopListening() complete
2025-10-22T21:42:16.8765740Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:16.8766090Z       [TELEMETRY][L001] StopListening() returned successfully
2025-10-22T21:42:16.8766570Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:16.8766950Z       [TELEMETRY][L001] Calling base.Dispose(True)
2025-10-22T21:42:16.8767310Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:16.8768390Z       [TELEMETRY][L001] <<< DISPOSE-EXIT: Complete
2025-10-22T21:42:16.8768830Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:16.8769170Z       [TELEMETRY][L001] Already disposed, returning early
2025-10-22T21:42:16.8769570Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:16.8770670Z       [TELEMETRY][L001] >>> DISPOSE-ENTRY: disposing=True, thread=13, _isDisposed=True, _shouldStop=True
2025-10-22T21:42:16.8771160Z         CallStack:
2025-10-22T21:42:16.8771930Z          at Yubico.Core.Devices.Hid.MacOSHidDeviceListener.Dispose(Boolean disposing) in /_/Yubico.Core/src/Yubico/Core/Devices/Hid/MacOSHidDeviceListener.cs:line 154
2025-10-22T21:42:16.8773010Z          at Yubico.Core.Devices.Hid.HidDeviceListener.Dispose() in /_/Yubico.Core/src/Yubico/Core/Devices/Hid/HidDeviceListener.cs:line 153
2025-10-22T21:42:16.8774560Z          at Yubico.Core.Devices.Hid.UnitTests.MacOSHidDeviceListenerDisposalTests.<>c__DisplayClass5_1.<ConcurrentDispose_IsThreadSafe>b__0() in /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/Yubico.Core/tests/Yubico/Core/Devices/Hid/MacOSHidDeviceListenerDisposalTests.cs:line 168
2025-10-22T21:42:16.8776210Z          at System.Threading.ExecutionContext.RunFromThreadPoolDispatchLoop(Thread threadPoolThread, ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-22T21:42:16.8777270Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-22T21:42:16.8778020Z          at System.Threading.ThreadPoolWorkQueue.Dispatch()
2025-10-22T21:42:16.8778600Z          at System.Threading.PortableThreadPool.WorkerThread.WorkerThreadStart()
2025-10-22T21:42:16.8779140Z          at System.Threading.Thread.StartCallback()
2025-10-22T21:42:16.8779740Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:16.8780180Z       [TELEMETRY][L001] Already disposed, returning early
2025-10-22T21:42:16.8780690Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:16.8781290Z       [TELEMETRY][L001] >>> DISPOSE-ENTRY: disposing=True, thread=12, _isDisposed=True, _shouldStop=True
2025-10-22T21:42:16.8781920Z         CallStack:
2025-10-22T21:42:16.8782640Z          at Yubico.Core.Devices.Hid.MacOSHidDeviceListener.Dispose(Boolean disposing) in /_/Yubico.Core/src/Yubico/Core/Devices/Hid/MacOSHidDeviceListener.cs:line 154
2025-10-22T21:42:16.8783690Z          at Yubico.Core.Devices.Hid.HidDeviceListener.Dispose() in /_/Yubico.Core/src/Yubico/Core/Devices/Hid/HidDeviceListener.cs:line 153
2025-10-22T21:42:16.8785230Z          at Yubico.Core.Devices.Hid.UnitTests.MacOSHidDeviceListenerDisposalTests.<>c__DisplayClass5_1.<ConcurrentDispose_IsThreadSafe>b__0() in /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/Yubico.Core/tests/Yubico/Core/Devices/Hid/MacOSHidDeviceListenerDisposalTests.cs:line 168
2025-10-22T21:42:16.8786840Z          at System.Threading.ExecutionContext.RunFromThreadPoolDispatchLoop(Thread threadPoolThread, ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-22T21:42:16.8787990Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-22T21:42:16.8788760Z          at System.Threading.ThreadPoolWorkQueue.Dispatch()
2025-10-22T21:42:16.8789360Z          at System.Threading.PortableThreadPool.WorkerThread.WorkerThreadStart()
2025-10-22T21:42:16.8789910Z          at System.Threading.Thread.StartCallback()
2025-10-22T21:42:16.8807200Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:16.8808830Z       [TELEMETRY][L001] Already disposed, returning early
2025-10-22T21:42:16.8810200Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:16.8853370Z       [TELEMETRY][L001] >>> DISPOSE-ENTRY: disposing=True, thread=13, _isDisposed=True, _shouldStop=True
2025-10-22T21:42:16.8855830Z         CallStack:
2025-10-22T21:42:16.8857440Z          at Yubico.Core.Devices.Hid.MacOSHidDeviceListener.Dispose(Boolean disposing) in /_/Yubico.Core/src/Yubico/Core/Devices/Hid/MacOSHidDeviceListener.cs:line 154
2025-10-22T21:42:16.8859400Z          at Yubico.Core.Devices.Hid.HidDeviceListener.Dispose() in /_/Yubico.Core/src/Yubico/Core/Devices/Hid/HidDeviceListener.cs:line 153
2025-10-22T21:42:16.8861050Z          at Yubico.Core.Devices.Hid.UnitTests.MacOSHidDeviceListenerDisposalTests.<>c__DisplayClass5_1.<ConcurrentDispose_IsThreadSafe>b__0() in /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/Yubico.Core/tests/Yubico/Core/Devices/Hid/MacOSHidDeviceListenerDisposalTests.cs:line 168
2025-10-22T21:42:16.8863470Z          at System.Threading.ExecutionContext.RunFromThreadPoolDispatchLoop(Thread threadPoolThread, ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-22T21:42:16.8865230Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-22T21:42:16.8866450Z          at System.Threading.ThreadPoolWorkQueue.Dispatch()
2025-10-22T21:42:16.8867200Z          at System.Threading.PortableThreadPool.WorkerThread.WorkerThreadStart()
2025-10-22T21:42:16.8867980Z          at System.Threading.Thread.StartCallback()
2025-10-22T21:42:16.8869740Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:16.8870550Z       [TELEMETRY][L001] Already disposed, returning early
2025-10-22T21:42:16.8871920Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:16.8872590Z       [TELEMETRY][L001] >>> DISPOSE-ENTRY: disposing=True, thread=12, _isDisposed=True, _shouldStop=True
2025-10-22T21:42:16.8875230Z         CallStack:
2025-10-22T21:42:16.8880630Z          at Yubico.Core.Devices.Hid.MacOSHidDeviceListener.Dispose(Boolean disposing) in /_/Yubico.Core/src/Yubico/Core/Devices/Hid/MacOSHidDeviceListener.cs:line 154
2025-10-22T21:42:16.8884430Z          at Yubico.Core.Devices.Hid.HidDeviceListener.Dispose() in /_/Yubico.Core/src/Yubico/Core/Devices/Hid/HidDeviceListener.cs:line 153
2025-10-22T21:42:16.8887740Z          at Yubico.Core.Devices.Hid.UnitTests.MacOSHidDeviceListenerDisposalTests.<>c__DisplayClass5_1.<ConcurrentDispose_IsThreadSafe>b__0() in /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/Yubico.Core/tests/Yubico/Core/Devices/Hid/MacOSHidDeviceListenerDisposalTests.cs:line 168
2025-10-22T21:42:16.8902610Z          at System.Threading.ExecutionContext.RunFromThreadPoolDispatchLoop(Thread threadPoolThread, ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-22T21:42:16.8903710Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-22T21:42:16.8904160Z          at System.Threading.ThreadPoolWorkQueue.Dispatch()
2025-10-22T21:42:16.8904620Z          at System.Threading.PortableThreadPool.WorkerThread.WorkerThreadStart()
2025-10-22T21:42:16.8905060Z          at System.Threading.Thread.StartCallback()
2025-10-22T21:42:16.8905470Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:16.8905840Z       [TELEMETRY][L001] Already disposed, returning early
2025-10-22T21:42:16.8906250Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:16.8906640Z       [TELEMETRY][L001] >>> DISPOSE-ENTRY: disposing=True, thread=13, _isDisposed=True, _shouldStop=True
2025-10-22T21:42:16.8907020Z         CallStack:
2025-10-22T21:42:16.8907710Z          at Yubico.Core.Devices.Hid.MacOSHidDeviceListener.Dispose(Boolean disposing) in /_/Yubico.Core/src/Yubico/Core/Devices/Hid/MacOSHidDeviceListener.cs:line 154
2025-10-22T21:42:16.8908790Z          at Yubico.Core.Devices.Hid.HidDeviceListener.Dispose() in /_/Yubico.Core/src/Yubico/Core/Devices/Hid/HidDeviceListener.cs:line 153
2025-10-22T21:42:16.9032760Z          at Yubico.Core.Devices.Hid.UnitTests.MacOSHidDeviceListenerDisposalTests.<>c__DisplayClass5_1.<ConcurrentDispose_IsThreadSafe>b__0() in /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/Yubico.Core/tests/Yubico/Core/Devices/Hid/MacOSHidDeviceListenerDisposalTests.cs:line 168
2025-10-22T21:42:16.9035010Z          at System.Threading.ExecutionContext.RunFromThreadPoolDispatchLoop(Thread threadPoolThread, ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-22T21:42:16.9035920Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-22T21:42:16.9037080Z          at System.Threading.ThreadPoolWorkQueue.Dispatch()
2025-10-22T21:42:16.9037460Z          at System.Threading.PortableThreadPool.WorkerThread.WorkerThreadStart()
2025-10-22T21:42:16.9038550Z          at System.Threading.Thread.StartCallback()
2025-10-22T21:42:16.9038950Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:16.9039320Z       [TELEMETRY][L001] Already disposed, returning early
2025-10-22T21:42:16.9039730Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:16.9040140Z       [TELEMETRY][L001] >>> DISPOSE-ENTRY: disposing=True, thread=12, _isDisposed=True, _shouldStop=True
2025-10-22T21:42:16.9040520Z         CallStack:
2025-10-22T21:42:16.9041110Z          at Yubico.Core.Devices.Hid.MacOSHidDeviceListener.Dispose(Boolean disposing) in /_/Yubico.Core/src/Yubico/Core/Devices/Hid/MacOSHidDeviceListener.cs:line 154
2025-10-22T21:42:16.9041980Z          at Yubico.Core.Devices.Hid.HidDeviceListener.Dispose() in /_/Yubico.Core/src/Yubico/Core/Devices/Hid/HidDeviceListener.cs:line 153
2025-10-22T21:42:16.9043210Z          at Yubico.Core.Devices.Hid.UnitTests.MacOSHidDeviceListenerDisposalTests.<>c__DisplayClass5_1.<ConcurrentDispose_IsThreadSafe>b__0() in /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/Yubico.Core/tests/Yubico/Core/Devices/Hid/MacOSHidDeviceListenerDisposalTests.cs:line 168
2025-10-22T21:42:16.9044650Z          at System.Threading.ExecutionContext.RunFromThreadPoolDispatchLoop(Thread threadPoolThread, ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-22T21:42:16.9045490Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-22T21:42:16.9046050Z          at System.Threading.ThreadPoolWorkQueue.Dispatch()
2025-10-22T21:42:16.9046440Z          at System.Threading.PortableThreadPool.WorkerThread.WorkerThreadStart()
2025-10-22T21:42:16.9046830Z          at System.Threading.Thread.StartCallback()
2025-10-22T21:42:16.9047170Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:16.9047450Z       [TELEMETRY][L001] Already disposed, returning early
2025-10-22T21:42:16.9047770Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:16.9048150Z       [TELEMETRY][L001] >>> DISPOSE-ENTRY: disposing=True, thread=13, _isDisposed=True, _shouldStop=True
2025-10-22T21:42:16.9048550Z         CallStack:
2025-10-22T21:42:16.9049060Z          at Yubico.Core.Devices.Hid.MacOSHidDeviceListener.Dispose(Boolean disposing) in /_/Yubico.Core/src/Yubico/Core/Devices/Hid/MacOSHidDeviceListener.cs:line 154
2025-10-22T21:42:16.9049960Z          at Yubico.Core.Devices.Hid.HidDeviceListener.Dispose() in /_/Yubico.Core/src/Yubico/Core/Devices/Hid/HidDeviceListener.cs:line 153
2025-10-22T21:42:16.9051160Z          at Yubico.Core.Devices.Hid.UnitTests.MacOSHidDeviceListenerDisposalTests.<>c__DisplayClass5_1.<ConcurrentDispose_IsThreadSafe>b__0() in /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/Yubico.Core/tests/Yubico/Core/Devices/Hid/MacOSHidDeviceListenerDisposalTests.cs:line 168
2025-10-22T21:42:16.9052600Z          at System.Threading.ExecutionContext.RunFromThreadPoolDispatchLoop(Thread threadPoolThread, ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-22T21:42:16.9053350Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-22T21:42:16.9053930Z          at System.Threading.ThreadPoolWorkQueue.Dispatch()
2025-10-22T21:42:16.9054450Z          at System.Threading.PortableThreadPool.WorkerThread.WorkerThreadStart()
2025-10-22T21:42:16.9054880Z          at System.Threading.Thread.StartCallback()
2025-10-22T21:42:16.9055640Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:16.9056030Z       [TELEMETRY][L001] Already disposed, returning early
2025-10-22T21:42:16.9056360Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:16.9056830Z       [TELEMETRY][L001] >>> DISPOSE-ENTRY: disposing=True, thread=12, _isDisposed=True, _shouldStop=True
2025-10-22T21:42:16.9057700Z         CallStack:
2025-10-22T21:42:16.9058290Z          at Yubico.Core.Devices.Hid.MacOSHidDeviceListener.Dispose(Boolean disposing) in /_/Yubico.Core/src/Yubico/Core/Devices/Hid/MacOSHidDeviceListener.cs:line 154
2025-10-22T21:42:16.9059190Z          at Yubico.Core.Devices.Hid.HidDeviceListener.Dispose() in /_/Yubico.Core/src/Yubico/Core/Devices/Hid/HidDeviceListener.cs:line 153
2025-10-22T21:42:16.9060410Z          at Yubico.Core.Devices.Hid.UnitTests.MacOSHidDeviceListenerDisposalTests.<>c__DisplayClass5_1.<ConcurrentDispose_IsThreadSafe>b__0() in /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/Yubico.Core/tests/Yubico/Core/Devices/Hid/MacOSHidDeviceListenerDisposalTests.cs:line 168
2025-10-22T21:42:16.9061710Z          at System.Threading.ExecutionContext.RunFromThreadPoolDispatchLoop(Thread threadPoolThread, ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-22T21:42:16.9062530Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-22T21:42:16.9063050Z          at System.Threading.ThreadPoolWorkQueue.Dispatch()
2025-10-22T21:42:16.9063420Z          at System.Threading.PortableThreadPool.WorkerThread.WorkerThreadStart()
2025-10-22T21:42:16.9063770Z          at System.Threading.Thread.StartCallback()
2025-10-22T21:42:16.9064080Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:16.9064440Z       [TELEMETRY][L001] Already disposed, returning early
2025-10-22T21:42:16.9064840Z [xUnit.net 00:00:00.54]   Finished:    Yubico.Core.UnitTests
2025-10-22T21:42:16.9065400Z   Passed Yubico.Core.Devices.Hid.UnitTests.MacOSHidDeviceListenerDisposalTests.ConcurrentDispose_IsThreadSafe [144 ms]
2025-10-22T21:42:16.9065880Z   Standard Output Messages:
2025-10-22T21:42:16.9066160Z  === TEST START: ConcurrentDispose_IsThreadSafe ===
2025-10-22T21:42:16.9066590Z  [USING-ENTRY] Test=ConcurrentDispose_IsThreadSafe, Thread=12
2025-10-22T21:42:16.9066940Z  [USING-BODY] Test=ConcurrentDispose_IsThreadSafe, Listener=L001, Thread=12
2025-10-22T21:42:16.9067220Z  [TEST] Task 0 calling Dispose() on L001
2025-10-22T21:42:16.9067560Z  [TEST] Task 9 calling Dispose() on L001
2025-10-22T21:42:16.9067840Z  [TEST] Task 0 Dispose() completed on L001
2025-10-22T21:42:16.9068130Z  [TEST] Task 1 calling Dispose() on L001
2025-10-22T21:42:16.9068340Z  [TEST] Task 9 Dispose() completed on L001
2025-10-22T21:42:16.9068630Z  [TEST] Task 8 calling Dispose() on L001
2025-10-22T21:42:16.9068900Z  [TEST] Task 1 Dispose() completed on L001
2025-10-22T21:42:16.9069190Z  [TEST] Task 8 Dispose() completed on L001
2025-10-22T21:42:16.9069520Z  [TEST] Task 2 calling Dispose() on L001
2025-10-22T21:42:16.9069790Z  [TEST] Task 7 calling Dispose() on L001
2025-10-22T21:42:16.9070060Z  [TEST] Task 2 Dispose() completed on L001
2025-10-22T21:42:16.9070330Z  [TEST] Task 3 calling Dispose() on L001
2025-10-22T21:42:16.9070680Z  [TEST] Task 7 Dispose() completed on L001
2025-10-22T21:42:16.9070880Z  [TEST] Task 6 calling Dispose() on L001
2025-10-22T21:42:16.9071130Z  [TEST] Task 3 Dispose() completed on L001
2025-10-22T21:42:16.9071410Z  [TEST] Task 4 calling Dispose() on L001
2025-10-22T21:42:16.9071620Z  [TEST] Task 6 Dispose() completed on L001
2025-10-22T21:42:16.9071840Z  [TEST] Task 5 calling Dispose() on L001
2025-10-22T21:42:16.9072060Z  [TEST] Task 4 Dispose() completed on L001
2025-10-22T21:42:16.9072380Z  [TEST] Task 5 Dispose() completed on L001
2025-10-22T21:42:16.9072750Z  [USING-EXIT] Test=ConcurrentDispose_IsThreadSafe, Listener=L001, Thread=21
2025-10-22T21:42:16.9073050Z 
2025-10-22T21:42:16.9073290Z 
2025-10-22T21:42:16.9073290Z 
2025-10-22T21:42:16.9073440Z Test Run Successful.
2025-10-22T21:42:16.9073650Z Total tests: 1
2025-10-22T21:42:16.9073870Z      Passed: 1
2025-10-22T21:42:16.9074080Z  Total time: 1.7212 Seconds
