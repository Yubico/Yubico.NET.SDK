2025-10-22T21:41:58.7810460Z ##[group]Run dotnet test Yubico.Core/tests/Yubico.Core.UnitTests.csproj --filter "FullyQualifiedName~MacOSHidDeviceListenerDisposalTests.Dispose_TerminatesListenerThread" --logger "console;verbosity=detailed"
2025-10-22T21:41:58.7811740Z [36;1mdotnet test Yubico.Core/tests/Yubico.Core.UnitTests.csproj --filter "FullyQualifiedName~MacOSHidDeviceListenerDisposalTests.Dispose_TerminatesListenerThread" --logger "console;verbosity=detailed"[0m
2025-10-22T21:41:58.7848520Z shell: /bin/bash -e {0}
2025-10-22T21:41:58.7848770Z env:
2025-10-22T21:41:58.7848990Z   DOTNET_ROOT: /Users/runner/.dotnet
2025-10-22T21:41:58.7849250Z   Logging__LogLevel__Default: Information
2025-10-22T21:41:58.7849560Z   Logging__LogLevel__Yubico: Information
2025-10-22T21:41:58.7849800Z ##[endgroup]
2025-10-22T21:42:00.0893360Z   Determining projects to restore...
2025-10-22T21:42:03.6516490Z   Restored /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/Yubico.Core/tests/Yubico.Core.UnitTests.csproj (in 3.07 sec).
2025-10-22T21:42:04.8824480Z   Restored /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/Yubico.Core/src/Yubico.Core.csproj (in 4.31 sec).
2025-10-22T21:42:09.5381370Z   Yubico.Core -> /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/Yubico.Core/src/bin/Debug/netstandard2.1/Yubico.Core.dll
2025-10-22T21:42:12.2472340Z   Yubico.Core.UnitTests -> /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/Yubico.Core/tests/bin/Debug/net8.0/Yubico.Core.UnitTests.dll
2025-10-22T21:42:12.2640390Z Test run for /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/Yubico.Core/tests/bin/Debug/net8.0/Yubico.Core.UnitTests.dll (.NETCoreApp,Version=v8.0)
2025-10-22T21:42:12.6639970Z VSTest version 17.14.1 (arm64)
2025-10-22T21:42:12.6644230Z 
2025-10-22T21:42:12.8682150Z Starting test execution, please wait...
2025-10-22T21:42:12.9036370Z A total of 1 test files matched the specified pattern.
2025-10-22T21:42:12.9055740Z /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/Yubico.Core/tests/bin/Debug/net8.0/Yubico.Core.UnitTests.dll
2025-10-22T21:42:13.8528600Z [xUnit.net 00:00:00.00] xUnit.net VSTest Adapter v3.1.5+1b188a7b0a (64-bit .NET 8.0.21)
2025-10-22T21:42:13.9210330Z [xUnit.net 00:00:00.08]   Discovering: Yubico.Core.UnitTests
2025-10-22T21:42:14.0819000Z [xUnit.net 00:00:00.24]   Discovered:  Yubico.Core.UnitTests
2025-10-22T21:42:14.1146990Z [xUnit.net 00:00:00.27]   Starting:    Yubico.Core.UnitTests
2025-10-22T21:42:14.2561390Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:14.2566800Z       [TELEMETRY][L001] MacOSHidDeviceListener constructor called on thread 13
2025-10-22T21:42:14.2588400Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:14.2609880Z       [TELEMETRY][L001] StartListening() called, creating background thread
2025-10-22T21:42:14.2645960Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:14.2654830Z       [TELEMETRY][L001] Background thread started
2025-10-22T21:42:14.2655680Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:14.2656150Z       [TELEMETRY][L001] MacOSHidDeviceListener constructor complete
2025-10-22T21:42:14.2656800Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:14.2657340Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:14.2658930Z       HID listener thread started. ThreadID is 18.
2025-10-22T21:42:14.2876630Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:14.2877500Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:14.2878230Z       IOHIDManager 5014433536 is scheduled with run loop 5014517136 with mode kCFRunLoopDefaultMode
2025-10-22T21:42:14.2878840Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:14.2879180Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:14.2879470Z       Flushed existing devices.
2025-10-22T21:42:14.3951190Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:14.3951770Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:14.3952200Z       [TELEMETRY][L001] Entering run loop. _shouldStop=False
2025-10-22T21:42:14.3953810Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:14.3954150Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:14.3954680Z       [TELEMETRY][L001] Loop iter 1: _shouldStop=False, prevResult=4, calling CFRunLoopRunInMode...
2025-10-22T21:42:14.3977390Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:14.3978410Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:14.3979650Z       [TELEMETRY][L001] Loop iter 1: CFRunLoopRunInMode returned 3 after 107ms
2025-10-22T21:42:14.3980860Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:14.3981820Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:14.3982840Z       [TELEMETRY][L001] Loop iter 2: _shouldStop=False, prevResult=3, calling CFRunLoopRunInMode...
2025-10-22T21:42:14.4735720Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:14.4738340Z       [TELEMETRY][L001] >>> DISPOSE-ENTRY: disposing=True, thread=13, _isDisposed=False, _shouldStop=False
2025-10-22T21:42:14.4739070Z         CallStack:
2025-10-22T21:42:14.4739880Z          at Yubico.Core.Devices.Hid.MacOSHidDeviceListener.Dispose(Boolean disposing) in /_/Yubico.Core/src/Yubico/Core/Devices/Hid/MacOSHidDeviceListener.cs:line 154
2025-10-22T21:42:14.4740880Z          at Yubico.Core.Devices.Hid.HidDeviceListener.Dispose() in /_/Yubico.Core/src/Yubico/Core/Devices/Hid/HidDeviceListener.cs:line 153
2025-10-22T21:42:14.4742220Z          at Yubico.Core.Devices.Hid.UnitTests.MacOSHidDeviceListenerDisposalTests.Dispose_TerminatesListenerThread() in /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/Yubico.Core/tests/Yubico/Core/Devices/Hid/MacOSHidDeviceListenerDisposalTests.cs:line 201
2025-10-22T21:42:14.4743610Z          at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
2025-10-22T21:42:14.4744230Z          at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
2025-10-22T21:42:14.4745550Z          at Xunit.Sdk.TestInvoker`1.CallTestMethod(Object testClassInstance) in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestInvoker.cs:line 149
2025-10-22T21:42:14.4746390Z          at Xunit.Sdk.TestInvoker`1.<>c__DisplayClass47_0.<<InvokeTestMethodAsync>b__1>d.MoveNext() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestInvoker.cs:line 256
2025-10-22T21:42:14.4747170Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:14.4747790Z          at Xunit.Sdk.TestInvoker`1.<>c__DisplayClass47_0.<InvokeTestMethodAsync>b__1()
2025-10-22T21:42:14.4748390Z          at Xunit.Sdk.ExecutionTimer.AggregateAsync(Func`1 asyncAction) in /_/src/xunit.execution/Sdk/Frameworks/ExecutionTimer.cs:line 48
2025-10-22T21:42:14.4749090Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:14.4749700Z          at Xunit.Sdk.ExecutionTimer.AggregateAsync(Func`1 asyncAction)
2025-10-22T21:42:14.4750290Z          at Xunit.Sdk.TestInvoker`1.<>c__DisplayClass47_0.<InvokeTestMethodAsync>b__0() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestInvoker.cs:line 215
2025-10-22T21:42:14.4751020Z          at Xunit.Sdk.ExceptionAggregator.RunAsync(Func`1 code) in /_/src/xunit.core/Sdk/ExceptionAggregator.cs:line 90
2025-10-22T21:42:14.4751660Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:14.4752250Z          at Xunit.Sdk.ExceptionAggregator.RunAsync(Func`1 code)
2025-10-22T21:42:14.4752830Z          at Xunit.Sdk.TestInvoker`1.InvokeTestMethodAsync(Object testClassInstance) in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestInvoker.cs:line 214
2025-10-22T21:42:14.4753590Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:14.4754900Z          at Xunit.Sdk.TestInvoker`1.InvokeTestMethodAsync(Object testClassInstance)
2025-10-22T21:42:14.4755590Z          at Xunit.Sdk.XunitTestInvoker.InvokeTestMethodAsync(Object testClassInstance) in /_/src/xunit.execution/Sdk/Frameworks/Runners/XunitTestInvoker.cs:line 112
2025-10-22T21:42:14.4756340Z          at Xunit.Sdk.TestInvoker`1.<RunAsync>b__46_0() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestInvoker.cs:line 180
2025-10-22T21:42:14.4757460Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:14.4757940Z          at Xunit.Sdk.TestInvoker`1.<RunAsync>b__46_0()
2025-10-22T21:42:14.4758530Z          at Xunit.Sdk.ExceptionAggregator.RunAsync[T](Func`1 code) in /_/src/xunit.core/Sdk/ExceptionAggregator.cs:line 107
2025-10-22T21:42:14.4759230Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:14.4759740Z          at Xunit.Sdk.ExceptionAggregator.RunAsync[T](Func`1 code)
2025-10-22T21:42:14.4760240Z          at Xunit.Sdk.TestInvoker`1.RunAsync() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestInvoker.cs:line 163
2025-10-22T21:42:14.4761000Z          at Xunit.Sdk.XunitTestRunner.InvokeTestMethodAsync(ExceptionAggregator aggregator) in /_/src/xunit.execution/Sdk/Frameworks/Runners/XunitTestRunner.cs:line 88
2025-10-22T21:42:14.4761960Z          at Xunit.Sdk.XunitTestRunner.InvokeTestAsync(ExceptionAggregator aggregator) in /_/src/xunit.execution/Sdk/Frameworks/Runners/XunitTestRunner.cs:line 70
2025-10-22T21:42:14.4762740Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:14.4763310Z          at Xunit.Sdk.XunitTestRunner.InvokeTestAsync(ExceptionAggregator aggregator)
2025-10-22T21:42:14.4763970Z          at Xunit.Sdk.TestRunner`1.<>c__DisplayClass43_0.<RunAsync>b__0() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestRunner.cs:line 149
2025-10-22T21:42:14.4764630Z          at Xunit.Sdk.ExceptionAggregator.RunAsync[T](Func`1 code) in /_/src/xunit.core/Sdk/ExceptionAggregator.cs:line 107
2025-10-22T21:42:14.4765320Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:14.4765900Z          at Xunit.Sdk.ExceptionAggregator.RunAsync[T](Func`1 code)
2025-10-22T21:42:14.4766390Z          at Xunit.Sdk.TestRunner`1.RunAsync() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestRunner.cs:line 149
2025-10-22T21:42:14.4767010Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:14.4767540Z          at Xunit.Sdk.TestRunner`1.RunAsync()
2025-10-22T21:42:14.4768040Z          at Xunit.Sdk.XunitTestCaseRunner.RunTestAsync() in /_/src/xunit.execution/Sdk/Frameworks/Runners/XunitTestCaseRunner.cs:line 140
2025-10-22T21:42:14.4768730Z          at Xunit.Sdk.TestCaseRunner`1.RunAsync() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestCaseRunner.cs:line 82
2025-10-22T21:42:14.4769460Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:14.4769960Z          at Xunit.Sdk.TestCaseRunner`1.RunAsync()
2025-10-22T21:42:14.4770920Z          at Xunit.Sdk.XunitTestCase.RunAsync(IMessageSink diagnosticMessageSink, IMessageBus messageBus, Object[] constructorArguments, ExceptionAggregator aggregator, CancellationTokenSource cancellationTokenSource) in /_/src/xunit.execution/Sdk/Frameworks/XunitTestCase.cs:line 170
2025-10-22T21:42:14.4772380Z          at Xunit.Sdk.SkippableFactTestCase.<>n__0(IMessageSink diagnosticMessageSink, IMessageBus messageBus, Object[] constructorArguments, ExceptionAggregator aggregator, CancellationTokenSource cancellationTokenSource)
2025-10-22T21:42:14.4773670Z          at Xunit.Sdk.SkippableFactTestCase.RunAsync(IMessageSink diagnosticMessageSink, IMessageBus messageBus, Object[] constructorArguments, ExceptionAggregator aggregator, CancellationTokenSource cancellationTokenSource)
2025-10-22T21:42:14.4775070Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:14.4776100Z          at Xunit.Sdk.SkippableFactTestCase.RunAsync(IMessageSink diagnosticMessageSink, IMessageBus messageBus, Object[] constructorArguments, ExceptionAggregator aggregator, CancellationTokenSource cancellationTokenSource)
2025-10-22T21:42:14.4777690Z          at Xunit.Sdk.XunitTestMethodRunner.RunTestCaseAsync(IXunitTestCase testCase) in /_/src/xunit.execution/Sdk/Frameworks/Runners/XunitTestMethodRunner.cs:line 45
2025-10-22T21:42:14.4778590Z          at Xunit.Sdk.TestMethodRunner`1.RunTestCasesAsync() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestMethodRunner.cs:line 136
2025-10-22T21:42:14.4779290Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:14.4780240Z          at Xunit.Sdk.TestMethodRunner`1.RunTestCasesAsync()
2025-10-22T21:42:14.4780870Z          at Xunit.Sdk.TestMethodRunner`1.RunAsync() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestMethodRunner.cs:line 106
2025-10-22T21:42:14.4781850Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:14.4782410Z          at Xunit.Sdk.TestMethodRunner`1.RunAsync()
2025-10-22T21:42:14.4783380Z          at Xunit.Sdk.XunitTestClassRunner.RunTestMethodAsync(ITestMethod testMethod, IReflectionMethodInfo method, IEnumerable`1 testCases, Object[] constructorArguments) in /_/src/xunit.execution/Sdk/Frameworks/Runners/XunitTestClassRunner.cs:line 206
2025-10-22T21:42:14.4784370Z          at Xunit.Sdk.TestClassRunner`1.RunTestMethodsAsync()
2025-10-22T21:42:14.4785110Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:14.4785890Z          at Xunit.Sdk.TestClassRunner`1.RunTestMethodsAsync()
2025-10-22T21:42:14.4786490Z          at Xunit.Sdk.TestClassRunner`1.RunAsync() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestClassRunner.cs:line 175
2025-10-22T21:42:14.4787320Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:14.4787880Z          at Xunit.Sdk.TestClassRunner`1.RunAsync()
2025-10-22T21:42:14.4788710Z          at Xunit.Sdk.XunitTestCollectionRunner.RunTestClassAsync(ITestClass testClass, IReflectionTypeInfo class, IEnumerable`1 testCases) in /_/src/xunit.execution/Sdk/Frameworks/Runners/XunitTestCollectionRunner.cs:line 185
2025-10-22T21:42:14.4789860Z          at Xunit.Sdk.TestCollectionRunner`1.RunTestClassesAsync()
2025-10-22T21:42:14.4790490Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:14.4791090Z          at Xunit.Sdk.TestCollectionRunner`1.RunTestClassesAsync()
2025-10-22T21:42:14.4792090Z          at Xunit.Sdk.TestCollectionRunner`1.RunAsync() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestCollectionRunner.cs:line 101
2025-10-22T21:42:14.4793090Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:14.4793780Z          at Xunit.Sdk.TestCollectionRunner`1.RunAsync()
2025-10-22T21:42:14.4794770Z          at Xunit.Sdk.XunitTestAssemblyRunner.RunTestCollectionAsync(IMessageBus messageBus, ITestCollection testCollection, IEnumerable`1 testCases, CancellationTokenSource cancellationTokenSource) in /_/src/xunit.execution/Sdk/Frameworks/Runners/XunitTestAssemblyRunner.cs:line 346
2025-10-22T21:42:14.4796090Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:14.4797000Z          at Xunit.Sdk.XunitTestAssemblyRunner.RunTestCollectionAsync(IMessageBus messageBus, ITestCollection testCollection, IEnumerable`1 testCases, CancellationTokenSource cancellationTokenSource)
2025-10-22T21:42:14.4798570Z          at Xunit.Sdk.XunitTestAssemblyRunner.<>c__DisplayClass16_2.<RunTestCollectionsAsync>b__2() in /_/src/xunit.execution/Sdk/Frameworks/Runners/XunitTestAssemblyRunner.cs:line 250
2025-10-22T21:42:14.4799530Z          at System.Threading.Tasks.Task`1.InnerInvoke()
2025-10-22T21:42:14.4800550Z          at System.Threading.ExecutionContext.RunFromThreadPoolDispatchLoop(Thread threadPoolThread, ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-22T21:42:14.4801440Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-22T21:42:14.4802330Z          at System.Threading.ThreadPoolWorkQueue.Dispatch()
2025-10-22T21:42:14.4802850Z          at System.Threading.PortableThreadPool.WorkerThread.WorkerThreadStart()
2025-10-22T21:42:14.4803380Z          at System.Threading.Thread.StartCallback()
2025-10-22T21:42:14.4803920Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:14.4804670Z       [TELEMETRY][L001] Setting _isDisposed = true
2025-10-22T21:42:14.4805090Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:14.4805510Z       [TELEMETRY][L001] Calling StopListening(fromFinalizer=False)...
2025-10-22T21:42:14.4806120Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:14.4806490Z       [TELEMETRY][L001] StopListening(fromFinalizer=False) called
2025-10-22T21:42:14.4806880Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:14.4807300Z       [TELEMETRY][L001] Setting _shouldStop flag to true
2025-10-22T21:42:14.4807790Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:14.4808280Z       [TELEMETRY][L001] _shouldStop flag set. RunLoop pointer: 5014517136
2025-10-22T21:42:14.4808760Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:14.4809340Z       [TELEMETRY][L001] Calling CFRunLoopStop(5014517136)
2025-10-22T21:42:14.4809790Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:14.4810190Z       [TELEMETRY][L001] CFRunLoopStop() returned
2025-10-22T21:42:14.4810700Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:14.4811080Z       [TELEMETRY][L001] Waiting for thread to exit (1 second timeout)...
2025-10-22T21:42:14.4811590Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:14.4812020Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:14.4812440Z       [TELEMETRY][L001] Loop iter 2: CFRunLoopRunInMode returned 2 after 77ms
2025-10-22T21:42:14.4813270Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:14.4813820Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:14.4814300Z       [TELEMETRY][L001] Run loop exited after 2 iterations. _shouldStop=True, finalResult=2
2025-10-22T21:42:14.4814770Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:14.4815270Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:14.4815660Z       [TELEMETRY][L001] Listener thread finally block - cleaning up native resources
2025-10-22T21:42:14.4816110Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:14.4816550Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:14.4817010Z       [TELEMETRY][L001] Unscheduling IOHIDManager from run loop
2025-10-22T21:42:14.4817480Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:14.4817820Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:14.4818160Z       [TELEMETRY][L001] IOHIDManager unscheduled from run loop
2025-10-22T21:42:14.4818540Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:14.4818830Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:14.4819120Z       [TELEMETRY][L001] Releasing IOHIDManager
2025-10-22T21:42:14.4819470Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:14.4819860Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:14.4820550Z       [TELEMETRY][L001] IOHIDManager released
2025-10-22T21:42:14.4821060Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:14.4821370Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:14.4821670Z       [TELEMETRY][L001] Releasing run loop mode CFString
2025-10-22T21:42:14.4822120Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:14.4822510Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:14.4946780Z       [TELEMETRY][L001] Run loop mode CFString released
2025-10-22T21:42:14.4947340Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:14.4947650Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:14.4947980Z       [TELEMETRY][L001] Listener thread cleanup complete - thread exiting
2025-10-22T21:42:14.4948390Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:14.4948800Z       [TELEMETRY][L001] Thread exited successfully after 0ms
2025-10-22T21:42:14.4949180Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:14.4949460Z       [TELEMETRY][L001] StopListening() complete
2025-10-22T21:42:14.4949780Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:14.4950070Z       [TELEMETRY][L001] StopListening() returned successfully
2025-10-22T21:42:14.4950410Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:14.4950700Z       [TELEMETRY][L001] Calling base.Dispose(True)
2025-10-22T21:42:14.4951130Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:14.4951400Z       [TELEMETRY][L001] <<< DISPOSE-EXIT: Complete
2025-10-22T21:42:14.8018110Z [xUnit.net 00:00:00.96]   Finished:    Yubico.Core.UnitTests
2025-10-22T21:42:14.9288950Z   Passed Yubico.Core.Devices.Hid.UnitTests.MacOSHidDeviceListenerDisposalTests.Dispose_TerminatesListenerThread [625 ms]
2025-10-22T21:42:14.9391270Z   Standard Output Messages:
2025-10-22T21:42:14.9392550Z  === TEST START: Dispose_TerminatesListenerThread ===
2025-10-22T21:42:14.9478170Z  [USING-ENTRY] Test=Dispose_TerminatesListenerThread, Thread=13
2025-10-22T21:42:14.9557710Z  [USING-BODY] Test=Dispose_TerminatesListenerThread, Listener=L001, Thread=13
2025-10-22T21:42:14.9687180Z  [TEST] Calling Dispose() on L001
2025-10-22T21:42:14.9794700Z  [TEST] Dispose() completed on L001
2025-10-22T21:42:14.9901450Z  [USING-EXIT] Test=Dispose_TerminatesListenerThread, Listener=L001, Thread=13
2025-10-22T21:42:15.0022710Z 
2025-10-22T21:42:15.0123030Z 
2025-10-22T21:42:15.0226950Z 
2025-10-22T21:42:15.0330040Z Test Run Successful.
2025-10-22T21:42:15.0419900Z Total tests: 1
2025-10-22T21:42:15.0491910Z      Passed: 1
2025-10-22T21:42:15.0528260Z  Total time: 2.0192 Seconds
