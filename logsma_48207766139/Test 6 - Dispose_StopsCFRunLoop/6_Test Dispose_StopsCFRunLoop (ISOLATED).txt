2025-10-22T21:42:00.1464270Z ##[group]Run dotnet test Yubico.Core/tests/Yubico.Core.UnitTests.csproj --filter "FullyQualifiedName~MacOSHidDeviceListenerDisposalTests.Dispose_StopsCFRunLoop" --logger "console;verbosity=detailed"
2025-10-22T21:42:00.1465490Z [36;1mdotnet test Yubico.Core/tests/Yubico.Core.UnitTests.csproj --filter "FullyQualifiedName~MacOSHidDeviceListenerDisposalTests.Dispose_StopsCFRunLoop" --logger "console;verbosity=detailed"[0m
2025-10-22T21:42:00.1566960Z shell: /bin/bash -e {0}
2025-10-22T21:42:00.1567240Z env:
2025-10-22T21:42:00.1567450Z   DOTNET_ROOT: /Users/runner/.dotnet
2025-10-22T21:42:00.1567740Z   Logging__LogLevel__Default: Information
2025-10-22T21:42:00.1568140Z   Logging__LogLevel__Yubico: Information
2025-10-22T21:42:00.1568390Z ##[endgroup]
2025-10-22T21:42:01.1274860Z   Determining projects to restore...
2025-10-22T21:42:06.5359160Z   Restored /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/Yubico.Core/tests/Yubico.Core.UnitTests.csproj (in 4.92 sec).
2025-10-22T21:42:06.5660910Z   Restored /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/Yubico.Core/src/Yubico.Core.csproj (in 4.97 sec).
2025-10-22T21:42:14.7206530Z   Yubico.Core -> /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/Yubico.Core/src/bin/Debug/netstandard2.1/Yubico.Core.dll
2025-10-22T21:42:18.5613460Z   Yubico.Core.UnitTests -> /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/Yubico.Core/tests/bin/Debug/net8.0/Yubico.Core.UnitTests.dll
2025-10-22T21:42:18.5771420Z Test run for /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/Yubico.Core/tests/bin/Debug/net8.0/Yubico.Core.UnitTests.dll (.NETCoreApp,Version=v8.0)
2025-10-22T21:42:18.8474610Z VSTest version 17.14.1 (arm64)
2025-10-22T21:42:18.8480690Z 
2025-10-22T21:42:19.0938520Z Starting test execution, please wait...
2025-10-22T21:42:19.1397180Z A total of 1 test files matched the specified pattern.
2025-10-22T21:42:19.1451690Z /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/Yubico.Core/tests/bin/Debug/net8.0/Yubico.Core.UnitTests.dll
2025-10-22T21:42:20.1317170Z [xUnit.net 00:00:00.00] xUnit.net VSTest Adapter v3.1.5+1b188a7b0a (64-bit .NET 8.0.21)
2025-10-22T21:42:20.2197370Z [xUnit.net 00:00:00.12]   Discovering: Yubico.Core.UnitTests
2025-10-22T21:42:20.3929720Z [xUnit.net 00:00:00.29]   Discovered:  Yubico.Core.UnitTests
2025-10-22T21:42:20.4335870Z [xUnit.net 00:00:00.32]   Starting:    Yubico.Core.UnitTests
2025-10-22T21:42:20.5584500Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:20.5626520Z       [TELEMETRY][L001] MacOSHidDeviceListener constructor called on thread 13
2025-10-22T21:42:20.5678640Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:20.5715310Z       [TELEMETRY][L001] StartListening() called, creating background thread
2025-10-22T21:42:20.5716640Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:20.5718470Z       [TELEMETRY][L001] Background thread started
2025-10-22T21:42:20.5723640Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:20.5724290Z       [TELEMETRY][L001] MacOSHidDeviceListener constructor complete
2025-10-22T21:42:20.5750560Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:20.5752370Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:20.5756790Z       HID listener thread started. ThreadID is 18.
2025-10-22T21:42:20.5870510Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:20.5872390Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:20.5873810Z       IOHIDManager 5282846352 is scheduled with run loop 4746044944 with mode kCFRunLoopDefaultMode
2025-10-22T21:42:20.5875820Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:20.5877110Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:20.5878240Z       Flushed existing devices.
2025-10-22T21:42:20.5879480Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:20.5880610Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:20.5881820Z       [TELEMETRY][L001] Entering run loop. _shouldStop=False
2025-10-22T21:42:20.5885820Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:20.5886950Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:20.5888290Z       [TELEMETRY][L001] Loop iter 1: _shouldStop=False, prevResult=4, calling CFRunLoopRunInMode...
2025-10-22T21:42:20.7712550Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:20.7762670Z       [TELEMETRY][L001] >>> DISPOSE-ENTRY: disposing=True, thread=13, _isDisposed=False, _shouldStop=False
2025-10-22T21:42:20.7814760Z         CallStack:
2025-10-22T21:42:20.7847660Z          at Yubico.Core.Devices.Hid.MacOSHidDeviceListener.Dispose(Boolean disposing) in /_/Yubico.Core/src/Yubico/Core/Devices/Hid/MacOSHidDeviceListener.cs:line 154
2025-10-22T21:42:20.7882920Z          at Yubico.Core.Devices.Hid.HidDeviceListener.Dispose() in /_/Yubico.Core/src/Yubico/Core/Devices/Hid/HidDeviceListener.cs:line 153
2025-10-22T21:42:20.7916510Z          at Yubico.Core.Devices.Hid.UnitTests.MacOSHidDeviceListenerDisposalTests.Dispose_StopsCFRunLoop() in /Users/runner/work/Yubico.NET.SDK/Yubico.NET.SDK/Yubico.Core/tests/Yubico/Core/Devices/Hid/MacOSHidDeviceListenerDisposalTests.cs:line 233
2025-10-22T21:42:20.7962570Z          at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
2025-10-22T21:42:20.7967090Z          at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
2025-10-22T21:42:20.7970300Z          at Xunit.Sdk.TestInvoker`1.CallTestMethod(Object testClassInstance) in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestInvoker.cs:line 149
2025-10-22T21:42:20.7973060Z          at Xunit.Sdk.TestInvoker`1.<>c__DisplayClass47_0.<<InvokeTestMethodAsync>b__1>d.MoveNext() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestInvoker.cs:line 256
2025-10-22T21:42:20.7975450Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:20.7977450Z          at Xunit.Sdk.TestInvoker`1.<>c__DisplayClass47_0.<InvokeTestMethodAsync>b__1()
2025-10-22T21:42:20.7979410Z          at Xunit.Sdk.ExecutionTimer.AggregateAsync(Func`1 asyncAction) in /_/src/xunit.execution/Sdk/Frameworks/ExecutionTimer.cs:line 48
2025-10-22T21:42:20.7981660Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:20.7983490Z          at Xunit.Sdk.ExecutionTimer.AggregateAsync(Func`1 asyncAction)
2025-10-22T21:42:20.7985550Z          at Xunit.Sdk.TestInvoker`1.<>c__DisplayClass47_0.<InvokeTestMethodAsync>b__0() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestInvoker.cs:line 215
2025-10-22T21:42:20.7987700Z          at Xunit.Sdk.ExceptionAggregator.RunAsync(Func`1 code) in /_/src/xunit.core/Sdk/ExceptionAggregator.cs:line 90
2025-10-22T21:42:20.7989780Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:20.7991430Z          at Xunit.Sdk.ExceptionAggregator.RunAsync(Func`1 code)
2025-10-22T21:42:20.7993370Z          at Xunit.Sdk.TestInvoker`1.InvokeTestMethodAsync(Object testClassInstance) in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestInvoker.cs:line 214
2025-10-22T21:42:20.7995620Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:20.7997070Z          at Xunit.Sdk.TestInvoker`1.InvokeTestMethodAsync(Object testClassInstance)
2025-10-22T21:42:20.7999390Z          at Xunit.Sdk.XunitTestInvoker.InvokeTestMethodAsync(Object testClassInstance) in /_/src/xunit.execution/Sdk/Frameworks/Runners/XunitTestInvoker.cs:line 112
2025-10-22T21:42:20.8001860Z          at Xunit.Sdk.TestInvoker`1.<RunAsync>b__46_0() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestInvoker.cs:line 180
2025-10-22T21:42:20.8003900Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:20.8006500Z          at Xunit.Sdk.TestInvoker`1.<RunAsync>b__46_0()
2025-10-22T21:42:20.8008510Z          at Xunit.Sdk.ExceptionAggregator.RunAsync[T](Func`1 code) in /_/src/xunit.core/Sdk/ExceptionAggregator.cs:line 107
2025-10-22T21:42:20.8010560Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:20.8013000Z          at Xunit.Sdk.ExceptionAggregator.RunAsync[T](Func`1 code)
2025-10-22T21:42:20.8014640Z          at Xunit.Sdk.TestInvoker`1.RunAsync() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestInvoker.cs:line 163
2025-10-22T21:42:20.8016890Z          at Xunit.Sdk.XunitTestRunner.InvokeTestMethodAsync(ExceptionAggregator aggregator) in /_/src/xunit.execution/Sdk/Frameworks/Runners/XunitTestRunner.cs:line 88
2025-10-22T21:42:20.8019760Z          at Xunit.Sdk.XunitTestRunner.InvokeTestAsync(ExceptionAggregator aggregator) in /_/src/xunit.execution/Sdk/Frameworks/Runners/XunitTestRunner.cs:line 70
2025-10-22T21:42:20.8022220Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:20.8025640Z          at Xunit.Sdk.XunitTestRunner.InvokeTestAsync(ExceptionAggregator aggregator)
2025-10-22T21:42:20.8027920Z          at Xunit.Sdk.TestRunner`1.<>c__DisplayClass43_0.<RunAsync>b__0() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestRunner.cs:line 149
2025-10-22T21:42:20.8030050Z          at Xunit.Sdk.ExceptionAggregator.RunAsync[T](Func`1 code) in /_/src/xunit.core/Sdk/ExceptionAggregator.cs:line 107
2025-10-22T21:42:20.8031790Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:20.8033420Z          at Xunit.Sdk.ExceptionAggregator.RunAsync[T](Func`1 code)
2025-10-22T21:42:20.8034970Z          at Xunit.Sdk.TestRunner`1.RunAsync() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestRunner.cs:line 149
2025-10-22T21:42:20.8036880Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:20.8038330Z          at Xunit.Sdk.TestRunner`1.RunAsync()
2025-10-22T21:42:20.8044850Z          at Xunit.Sdk.XunitTestCaseRunner.RunTestAsync() in /_/src/xunit.execution/Sdk/Frameworks/Runners/XunitTestCaseRunner.cs:line 140
2025-10-22T21:42:20.8047220Z          at Xunit.Sdk.TestCaseRunner`1.RunAsync() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestCaseRunner.cs:line 82
2025-10-22T21:42:20.8048150Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:20.8048830Z          at Xunit.Sdk.TestCaseRunner`1.RunAsync()
2025-10-22T21:42:20.8050060Z          at Xunit.Sdk.XunitTestCase.RunAsync(IMessageSink diagnosticMessageSink, IMessageBus messageBus, Object[] constructorArguments, ExceptionAggregator aggregator, CancellationTokenSource cancellationTokenSource) in /_/src/xunit.execution/Sdk/Frameworks/XunitTestCase.cs:line 170
2025-10-22T21:42:20.8051710Z          at Xunit.Sdk.SkippableFactTestCase.<>n__0(IMessageSink diagnosticMessageSink, IMessageBus messageBus, Object[] constructorArguments, ExceptionAggregator aggregator, CancellationTokenSource cancellationTokenSource)
2025-10-22T21:42:20.8053290Z          at Xunit.Sdk.SkippableFactTestCase.RunAsync(IMessageSink diagnosticMessageSink, IMessageBus messageBus, Object[] constructorArguments, ExceptionAggregator aggregator, CancellationTokenSource cancellationTokenSource)
2025-10-22T21:42:20.8054860Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:20.8056410Z          at Xunit.Sdk.SkippableFactTestCase.RunAsync(IMessageSink diagnosticMessageSink, IMessageBus messageBus, Object[] constructorArguments, ExceptionAggregator aggregator, CancellationTokenSource cancellationTokenSource)
2025-10-22T21:42:20.8057750Z          at Xunit.Sdk.XunitTestMethodRunner.RunTestCaseAsync(IXunitTestCase testCase) in /_/src/xunit.execution/Sdk/Frameworks/Runners/XunitTestMethodRunner.cs:line 45
2025-10-22T21:42:20.8059510Z          at Xunit.Sdk.TestMethodRunner`1.RunTestCasesAsync() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestMethodRunner.cs:line 136
2025-10-22T21:42:20.8060430Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:20.8061430Z          at Xunit.Sdk.TestMethodRunner`1.RunTestCasesAsync()
2025-10-22T21:42:20.8062290Z          at Xunit.Sdk.TestMethodRunner`1.RunAsync() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestMethodRunner.cs:line 106
2025-10-22T21:42:20.8063170Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:20.8063900Z          at Xunit.Sdk.TestMethodRunner`1.RunAsync()
2025-10-22T21:42:20.8064980Z          at Xunit.Sdk.XunitTestClassRunner.RunTestMethodAsync(ITestMethod testMethod, IReflectionMethodInfo method, IEnumerable`1 testCases, Object[] constructorArguments) in /_/src/xunit.execution/Sdk/Frameworks/Runners/XunitTestClassRunner.cs:line 206
2025-10-22T21:42:20.8065870Z          at Xunit.Sdk.TestClassRunner`1.RunTestMethodsAsync()
2025-10-22T21:42:20.8066610Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:20.8067360Z          at Xunit.Sdk.TestClassRunner`1.RunTestMethodsAsync()
2025-10-22T21:42:20.8068050Z          at Xunit.Sdk.TestClassRunner`1.RunAsync() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestClassRunner.cs:line 175
2025-10-22T21:42:20.8068900Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:20.8069610Z          at Xunit.Sdk.TestClassRunner`1.RunAsync()
2025-10-22T21:42:20.8070570Z          at Xunit.Sdk.XunitTestCollectionRunner.RunTestClassAsync(ITestClass testClass, IReflectionTypeInfo class, IEnumerable`1 testCases) in /_/src/xunit.execution/Sdk/Frameworks/Runners/XunitTestCollectionRunner.cs:line 185
2025-10-22T21:42:20.8071640Z          at Xunit.Sdk.TestCollectionRunner`1.RunTestClassesAsync()
2025-10-22T21:42:20.8072460Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:20.8073170Z          at Xunit.Sdk.TestCollectionRunner`1.RunTestClassesAsync()
2025-10-22T21:42:20.8073960Z          at Xunit.Sdk.TestCollectionRunner`1.RunAsync() in /_/src/xunit.execution/Sdk/Frameworks/Runners/TestCollectionRunner.cs:line 101
2025-10-22T21:42:20.8077550Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:20.8079320Z          at Xunit.Sdk.TestCollectionRunner`1.RunAsync()
2025-10-22T21:42:20.8082600Z          at Xunit.Sdk.XunitTestAssemblyRunner.RunTestCollectionAsync(IMessageBus messageBus, ITestCollection testCollection, IEnumerable`1 testCases, CancellationTokenSource cancellationTokenSource) in /_/src/xunit.execution/Sdk/Frameworks/Runners/XunitTestAssemblyRunner.cs:line 346
2025-10-22T21:42:20.8086200Z          at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
2025-10-22T21:42:20.8088950Z          at Xunit.Sdk.XunitTestAssemblyRunner.RunTestCollectionAsync(IMessageBus messageBus, ITestCollection testCollection, IEnumerable`1 testCases, CancellationTokenSource cancellationTokenSource)
2025-10-22T21:42:20.8092230Z          at Xunit.Sdk.XunitTestAssemblyRunner.<>c__DisplayClass16_2.<RunTestCollectionsAsync>b__2() in /_/src/xunit.execution/Sdk/Frameworks/Runners/XunitTestAssemblyRunner.cs:line 250
2025-10-22T21:42:20.8094230Z          at System.Threading.Tasks.Task`1.InnerInvoke()
2025-10-22T21:42:20.8096270Z          at System.Threading.ExecutionContext.RunFromThreadPoolDispatchLoop(Thread threadPoolThread, ExecutionContext executionContext, ContextCallback callback, Object state)
2025-10-22T21:42:20.8098810Z          at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
2025-10-22T21:42:20.8101490Z          at System.Threading.ThreadPoolWorkQueue.Dispatch()
2025-10-22T21:42:20.8103290Z          at System.Threading.PortableThreadPool.WorkerThread.WorkerThreadStart()
2025-10-22T21:42:20.8104790Z          at System.Threading.Thread.StartCallback()
2025-10-22T21:42:20.8106650Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:20.8107960Z       [TELEMETRY][L001] Setting _isDisposed = true
2025-10-22T21:42:20.8109400Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:20.8110910Z       [TELEMETRY][L001] Calling StopListening(fromFinalizer=False)...
2025-10-22T21:42:20.8112330Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:20.8113820Z       [TELEMETRY][L001] StopListening(fromFinalizer=False) called
2025-10-22T21:42:20.8115620Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:20.8116980Z       [TELEMETRY][L001] Setting _shouldStop flag to true
2025-10-22T21:42:20.8118320Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:20.8119750Z       [TELEMETRY][L001] _shouldStop flag set. RunLoop pointer: 4746044944
2025-10-22T21:42:20.8121780Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:20.8133950Z       [TELEMETRY][L001] Calling CFRunLoopStop(4746044944)
2025-10-22T21:42:20.8140180Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:20.8158220Z       [TELEMETRY][L001] CFRunLoopStop() returned
2025-10-22T21:42:20.8162470Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:20.8171990Z       [TELEMETRY][L001] Waiting for thread to exit (1 second timeout)...
2025-10-22T21:42:20.8175120Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:20.8177610Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:20.8179130Z       [TELEMETRY][L001] Loop iter 1: CFRunLoopRunInMode returned 3 after 174ms
2025-10-22T21:42:20.8181520Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:20.8186940Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:20.8188800Z       [TELEMETRY][L001] Run loop exited after 1 iterations. _shouldStop=True, finalResult=3
2025-10-22T21:42:20.8191840Z fail: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:20.8194980Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:20.8195980Z       The run loop was terminated for an unexpected reason: 3
2025-10-22T21:42:20.8198820Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:20.8200760Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:20.8203030Z       [TELEMETRY][L001] Listener thread finally block - cleaning up native resources
2025-10-22T21:42:20.8205240Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:20.8207030Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:20.8210440Z       [TELEMETRY][L001] Unscheduling IOHIDManager from run loop
2025-10-22T21:42:20.8211540Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:20.8221780Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:20.8223160Z       [TELEMETRY][L001] IOHIDManager unscheduled from run loop
2025-10-22T21:42:20.8231470Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:20.8232990Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:20.8233940Z       [TELEMETRY][L001] Releasing IOHIDManager
2025-10-22T21:42:20.8235100Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:20.8236300Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:20.8237100Z       [TELEMETRY][L001] IOHIDManager released
2025-10-22T21:42:20.8238310Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:20.8241660Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:20.8243300Z       [TELEMETRY][L001] Releasing run loop mode CFString
2025-10-22T21:42:20.8244830Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:20.8345480Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:20.8346050Z       [TELEMETRY][L001] Run loop mode CFString released
2025-10-22T21:42:20.8355200Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:20.8356340Z       => MacOSHidDeviceListener.StartListening()
2025-10-22T21:42:20.8356910Z       [TELEMETRY][L001] Listener thread cleanup complete - thread exiting
2025-10-22T21:42:20.8357540Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:20.8358040Z       [TELEMETRY][L001] Thread exited successfully after 2ms
2025-10-22T21:42:20.8358510Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:20.8358920Z       [TELEMETRY][L001] StopListening() complete
2025-10-22T21:42:20.8359350Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:20.8359790Z       [TELEMETRY][L001] StopListening() returned successfully
2025-10-22T21:42:20.8360260Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:20.8360740Z       [TELEMETRY][L001] Calling base.Dispose(True)
2025-10-22T21:42:20.8361180Z info: Yubico.Core.Devices.Hid.MacOSHidDeviceListener[0]
2025-10-22T21:42:20.8361710Z       [TELEMETRY][L001] <<< DISPOSE-EXIT: Complete
2025-10-22T21:42:20.8362160Z [xUnit.net 00:00:00.68]   Finished:    Yubico.Core.UnitTests
2025-10-22T21:42:20.8831920Z   Passed Yubico.Core.Devices.Hid.UnitTests.MacOSHidDeviceListenerDisposalTests.Dispose_StopsCFRunLoop [306 ms]
2025-10-22T21:42:20.8832880Z   Standard Output Messages:
2025-10-22T21:42:20.8834440Z  === TEST START: Dispose_StopsCFRunLoop ===
2025-10-22T21:42:20.8834790Z  [USING-ENTRY] Test=Dispose_StopsCFRunLoop, Thread=13
2025-10-22T21:42:20.8835220Z  [USING-BODY] Test=Dispose_StopsCFRunLoop, Listener=L001, Thread=13
2025-10-22T21:42:20.8863490Z  [TEST] Calling Dispose() on L001
2025-10-22T21:42:20.8874350Z  [TEST] Dispose() completed on L001
2025-10-22T21:42:20.8874740Z  [USING-EXIT] Test=Dispose_StopsCFRunLoop, Listener=L001, Thread=13
2025-10-22T21:42:20.8875110Z 
2025-10-22T21:42:20.8875160Z 
2025-10-22T21:42:20.8875300Z 
2025-10-22T21:42:20.8909610Z Test Run Successful.
2025-10-22T21:42:20.8911410Z Total tests: 1
2025-10-22T21:42:20.8912190Z      Passed: 1
2025-10-22T21:42:20.8956460Z  Total time: 1.7502 Seconds
